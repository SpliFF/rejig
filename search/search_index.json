{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Rejig","text":"<p>Comprehensive Python code refactoring, analysis, and transformation.</p> <p>Rejig provides a fluent API for finding and modifying Python code elements. Whether you're building codemods, automating refactoring, analyzing code quality, or managing large-scale migrations, Rejig gives you precise control over your codebase.</p>"},{"location":"#features","title":"Features","text":""},{"location":"#code-manipulation","title":"Code Manipulation","text":"<ul> <li>Target-based API \u2014 Everything is a target: files, modules, classes, functions, methods, lines</li> <li>Fluent chaining \u2014 <code>rj.file(\"app.py\").find_class(\"User\").find_method(\"save\")</code></li> <li>Batch operations \u2014 Apply changes to multiple targets with <code>TargetList</code></li> <li>Atomic transactions \u2014 Collect changes and apply atomically with rollback</li> <li>Patch support \u2014 Parse, generate, apply, and reverse unified/git diffs</li> <li>Safe by default \u2014 Operations return <code>Result</code> objects, never raise exceptions</li> <li>Dry-run mode \u2014 Preview all changes before applying</li> </ul>"},{"location":"#code-analysis","title":"Code Analysis","text":"<ul> <li>Complexity analysis \u2014 Cyclomatic complexity, nesting depth, function length</li> <li>Dead code detection \u2014 Unused functions, classes, variables, imports</li> <li>Pattern detection \u2014 Missing type hints, bare excepts, magic numbers</li> <li>Security scanning \u2014 Hardcoded secrets, injection vulnerabilities, unsafe operations</li> <li>Optimization detection \u2014 Duplicate code, loop improvements</li> </ul>"},{"location":"#code-transformation","title":"Code Transformation","text":"<ul> <li>Import management \u2014 Organize, detect unused, fix circular imports</li> <li>Type hints \u2014 Infer, modernize, and generate type annotations</li> <li>Docstrings \u2014 Generate and update in Google, NumPy, or Sphinx style</li> <li>Code generation \u2014 Dunder methods, properties, test stubs</li> <li>Modernization \u2014 f-strings, Python 3.10+ syntax, deprecated API replacement</li> </ul>"},{"location":"#project-management","title":"Project Management","text":"<ul> <li>pyproject.toml \u2014 Manage metadata, dependencies, scripts</li> <li>Tool configuration \u2014 Black, Ruff, mypy, pytest, isort, coverage</li> <li>Package format conversion \u2014 requirements.txt, Poetry, PEP 621, UV</li> </ul>"},{"location":"#framework-support","title":"Framework Support","text":"<ul> <li>Django \u2014 Settings, URLs, app discovery</li> <li>Flask \u2014 Routes, blueprints, error handlers</li> <li>FastAPI \u2014 Endpoints, dependencies, middleware</li> <li>SQLAlchemy \u2014 Models, relationships</li> </ul>"},{"location":"#quick-example","title":"Quick Example","text":"<pre><code>from rejig import Rejig\n\nrj = Rejig(\"src/\")\n\n# Find all test classes and add a decorator\nrj.find_classes(pattern=\"^Test\").add_decorator(\"pytest.mark.slow\")\n\n# Rename a method and update all references\nrj.file(\"models.py\").find_class(\"User\").find_method(\"get_name\").rename(\"get_full_name\")\n\n# Add type hints to all functions\nrj.find_functions().infer_type_hints()\n\n# Generate docstrings for functions without them\nrj.find_functions().without_docstrings().generate_docstrings(style=\"google\")\n\n# Find security issues\nsecurity_issues = rj.find_security_issues()\nprint(f\"Found {len(security_issues)} security issues\")\n\n# Modify pyproject.toml\nrj.toml(\"pyproject.toml\").set(\"tool.black.line-length\", 110)\n</code></pre>"},{"location":"#why-rejig","title":"Why Rejig?","text":"Task Without Rejig With Rejig Rename a method Find/replace (breaks things) <code>target.rename(\"new_name\")</code> Add decorator to many classes Manual editing <code>targets.add_decorator(\"@cached\")</code> Find security vulnerabilities External tools, CI setup <code>rj.find_security_issues()</code> Add type hints to legacy code Manual annotation <code>rj.find_functions().infer_type_hints()</code> Generate docstrings Write each one <code>targets.generate_docstrings()</code> Update pyproject.toml Parse, modify, serialize <code>rj.toml(path).set(key, value)</code> Find duplicate code Manual review <code>rj.find_optimization_opportunities()</code>"},{"location":"#installation","title":"Installation","text":"<pre><code>pip install rejig\n\n# With framework support\npip install rejig[django]\npip install rejig[all]\n</code></pre>"},{"location":"#documentation","title":"Documentation","text":""},{"location":"#getting-started","title":"Getting Started","text":"<ul> <li>Installation \u2014 Install and verify</li> <li>Quickstart \u2014 Get up and running in 5 minutes</li> <li>Core Concepts \u2014 Understand targets, results, and the API design</li> </ul>"},{"location":"#guides","title":"Guides","text":""},{"location":"#finding-modifying-code","title":"Finding &amp; Modifying Code","text":"<ul> <li>Finding Code \u2014 Locate classes, functions, methods, and more</li> <li>Modifying Code \u2014 Rename, add, remove, and transform code</li> <li>Batch Operations \u2014 Work with multiple targets</li> <li>Line Operations \u2014 Work with individual lines and ranges</li> </ul>"},{"location":"#code-quality","title":"Code Quality","text":"<ul> <li>Code Analysis \u2014 Complexity, dead code, patterns</li> <li>Security Analysis \u2014 Find vulnerabilities and secrets</li> <li>Code Optimization \u2014 Detect duplicates and improvements</li> </ul>"},{"location":"#code-transformation_1","title":"Code Transformation","text":"<ul> <li>Import Management \u2014 Organize and manage imports</li> <li>Type Hints \u2014 Infer, modernize, and add type annotations</li> <li>Docstrings \u2014 Generate and update documentation</li> <li>Code Generation \u2014 Generate boilerplate code</li> </ul>"},{"location":"#configuration","title":"Configuration","text":"<ul> <li>Config Files \u2014 TOML, YAML, JSON, INI manipulation</li> <li>Project Management \u2014 pyproject.toml and dependencies</li> <li>Transactions \u2014 Atomic operations with rollback</li> <li>Patching \u2014 Parse, generate, apply, and reverse patches</li> </ul>"},{"location":"#framework-specific","title":"Framework-Specific","text":"<ul> <li>Django \u2014 Django project operations</li> <li>Flask \u2014 Flask application refactoring</li> <li>FastAPI \u2014 FastAPI endpoint management</li> </ul>"},{"location":"#error-handling","title":"Error Handling","text":"<ul> <li>Error Handling \u2014 Result-based error handling patterns</li> </ul>"},{"location":"#examples-recipes","title":"Examples &amp; Recipes","text":"<ul> <li>Refactoring Patterns \u2014 Common refactoring scenarios</li> <li>Codemod Recipes \u2014 Ready-to-use migration scripts</li> <li>Optimization Recipes \u2014 Code quality improvements</li> <li>Analysis Recipes \u2014 Code analysis scripts</li> <li>Security Recipes \u2014 Security scanning scripts</li> </ul>"},{"location":"#api-reference","title":"API Reference","text":"<ul> <li>Rejig Class \u2014 Main entry point</li> <li>Targets \u2014 All target classes</li> <li>Results \u2014 Result classes</li> <li>Patching \u2014 Patch parsing, generation, and targets</li> <li>Analysis \u2014 Analysis types and findings</li> <li>Security \u2014 Security types and findings</li> </ul>"},{"location":"#sample-projects","title":"Sample Projects","text":"<ul> <li>Sample Projects \u2014 Test projects for trying recipes</li> </ul>"},{"location":"examples/analysis-recipes/","title":"Analysis Recipes","text":"<p>Ready-to-use scripts for analyzing your Python codebase.</p>"},{"location":"examples/analysis-recipes/#quick-audit-script","title":"Quick Audit Script","text":"<pre><code>#!/usr/bin/env python\n\"\"\"Quick codebase audit script.\"\"\"\nfrom rejig import Rejig\n\ndef audit(path: str = \"src/\") -&gt; None:\n    rj = Rejig(path)\n\n    # Get all issues\n    issues = rj.find_analysis_issues()\n    security = rj.find_security_issues()\n    optimization = rj.find_optimization_opportunities()\n\n    # Summary\n    print(\"=\" * 60)\n    print(\"CODEBASE AUDIT REPORT\")\n    print(\"=\" * 60)\n    print()\n\n    # Analysis issues\n    print(\"Code Analysis:\")\n    print(f\"  {issues.summary()}\")\n    if issues.by_severity(\"high\"):\n        print(\"\\n  High Priority:\")\n        for issue in issues.by_severity(\"high\")[:5]:\n            print(f\"    - {issue.file_path}:{issue.line_number}\")\n            print(f\"      {issue.type}: {issue.message}\")\n\n    # Security issues\n    print(\"\\nSecurity:\")\n    print(f\"  {security.summary()}\")\n    if security.critical() or security.high():\n        print(\"\\n  Critical/High Issues:\")\n        for issue in (security.critical() + security.high())[:5]:\n            print(f\"    - [{issue.severity}] {issue.file_path}:{issue.line_number}\")\n            print(f\"      {issue.message}\")\n\n    # Optimization opportunities\n    print(\"\\nOptimization Opportunities:\")\n    print(f\"  Total: {len(optimization)} findings\")\n    by_type = optimization.count_by_type()\n    for type_name, count in sorted(by_type.items(), key=lambda x: -x[1])[:5]:\n        print(f\"    {type_name}: {count}\")\n\n    print()\n    print(\"=\" * 60)\n\nif __name__ == \"__main__\":\n    import sys\n    path = sys.argv[1] if len(sys.argv) &gt; 1 else \"src/\"\n    audit(path)\n</code></pre>"},{"location":"examples/analysis-recipes/#complexity-report","title":"Complexity Report","text":"<pre><code>#!/usr/bin/env python\n\"\"\"Generate complexity report.\"\"\"\nfrom rejig import Rejig, ComplexityAnalyzer\n\ndef complexity_report(path: str = \"src/\", threshold: int = 10) -&gt; None:\n    rj = Rejig(path)\n    analyzer = ComplexityAnalyzer(rj)\n\n    print(\"COMPLEXITY REPORT\")\n    print(\"=\" * 60)\n    print(f\"Threshold: {threshold}\")\n    print()\n\n    # Find complex functions\n    complex_funcs = analyzer.find_complex_functions(threshold)\n\n    if not complex_funcs:\n        print(\"No functions exceed complexity threshold.\")\n        return\n\n    print(f\"Found {len(complex_funcs)} complex functions:\\n\")\n\n    # Group by file\n    by_file = {}\n    for func, complexity in complex_funcs:\n        file_path = str(func.file_path)\n        if file_path not in by_file:\n            by_file[file_path] = []\n        by_file[file_path].append((func, complexity))\n\n    for file_path, funcs in sorted(by_file.items()):\n        print(f\"{file_path}\")\n        for func, c in sorted(funcs, key=lambda x: -x[1].cyclomatic):\n            print(f\"  {func.name}:\")\n            print(f\"    Cyclomatic: {c.cyclomatic}\")\n            print(f\"    Nesting: {c.max_nesting}\")\n            print(f\"    Lines: {c.lines}\")\n        print()\n\nif __name__ == \"__main__\":\n    import sys\n    path = sys.argv[1] if len(sys.argv) &gt; 1 else \"src/\"\n    complexity_report(path)\n</code></pre>"},{"location":"examples/analysis-recipes/#dead-code-finder","title":"Dead Code Finder","text":"<pre><code>#!/usr/bin/env python\n\"\"\"Find potentially dead code.\"\"\"\nfrom rejig import Rejig, DeadCodeAnalyzer\n\ndef find_dead_code(path: str = \"src/\") -&gt; None:\n    rj = Rejig(path)\n    analyzer = DeadCodeAnalyzer(rj)\n\n    print(\"DEAD CODE ANALYSIS\")\n    print(\"=\" * 60)\n    print()\n\n    # Unused functions\n    unused_funcs = analyzer.find_unused_functions()\n    print(f\"Unused Functions: {len(unused_funcs)}\")\n    for func in unused_funcs[:10]:\n        confidence_marker = {\n            \"high\": \"[!]\",\n            \"medium\": \"[?]\",\n            \"low\": \"[ ]\",\n        }.get(func.confidence, \"[ ]\")\n        print(f\"  {confidence_marker} {func.file_path}:{func.line_number} - {func.name}\")\n    if len(unused_funcs) &gt; 10:\n        print(f\"  ... and {len(unused_funcs) - 10} more\")\n    print()\n\n    # Unused classes\n    unused_classes = analyzer.find_unused_classes()\n    print(f\"Unused Classes: {len(unused_classes)}\")\n    for cls in unused_classes[:10]:\n        print(f\"  {cls.file_path}:{cls.line_number} - {cls.name}\")\n    print()\n\n    # Unused imports\n    unused_imports = analyzer.find_unused_imports()\n    print(f\"Unused Imports: {len(unused_imports)}\")\n    by_file = {}\n    for imp in unused_imports:\n        file_path = str(imp.file_path)\n        if file_path not in by_file:\n            by_file[file_path] = []\n        by_file[file_path].append(imp)\n\n    for file_path, imps in sorted(by_file.items())[:5]:\n        print(f\"  {file_path}: {len(imps)} unused imports\")\n\nif __name__ == \"__main__\":\n    import sys\n    path = sys.argv[1] if len(sys.argv) &gt; 1 else \"src/\"\n    find_dead_code(path)\n</code></pre>"},{"location":"examples/analysis-recipes/#type-hint-coverage","title":"Type Hint Coverage","text":"<pre><code>#!/usr/bin/env python\n\"\"\"Check type hint coverage.\"\"\"\nfrom rejig import Rejig, TypeHintAnalyzer\n\ndef type_coverage(path: str = \"src/\") -&gt; None:\n    rj = Rejig(path)\n    analyzer = TypeHintAnalyzer(rj)\n\n    stats = analyzer.coverage_stats()\n\n    print(\"TYPE HINT COVERAGE REPORT\")\n    print(\"=\" * 60)\n    print()\n    print(f\"Overall Coverage: {stats.coverage_percent:.1f}%\")\n    print()\n    print(f\"Functions: {stats.typed_functions}/{stats.total_functions} typed\")\n    print(f\"Methods: {stats.typed_methods}/{stats.total_methods} typed\")\n    print()\n\n    # Coverage by file\n    print(\"Coverage by File:\")\n    print(\"-\" * 40)\n\n    files = sorted(stats.by_file.items(), key=lambda x: x[1].coverage_percent)\n\n    # Show lowest coverage files\n    print(\"\\nLowest Coverage:\")\n    for file_path, file_stats in files[:10]:\n        bar = \"#\" * int(file_stats.coverage_percent / 5)\n        print(f\"  {file_stats.coverage_percent:5.1f}% |{bar:&lt;20}| {file_path}\")\n\n    print(\"\\nHighest Coverage:\")\n    for file_path, file_stats in files[-10:]:\n        bar = \"#\" * int(file_stats.coverage_percent / 5)\n        print(f\"  {file_stats.coverage_percent:5.1f}% |{bar:&lt;20}| {file_path}\")\n\nif __name__ == \"__main__\":\n    import sys\n    path = sys.argv[1] if len(sys.argv) &gt; 1 else \"src/\"\n    type_coverage(path)\n</code></pre>"},{"location":"examples/analysis-recipes/#docstring-coverage","title":"Docstring Coverage","text":"<pre><code>#!/usr/bin/env python\n\"\"\"Check docstring coverage.\"\"\"\nfrom rejig import Rejig, DocstringAnalyzer\n\ndef docstring_coverage(path: str = \"src/\") -&gt; None:\n    rj = Rejig(path)\n    analyzer = DocstringAnalyzer(rj)\n\n    report = analyzer.analyze()\n\n    print(\"DOCSTRING COVERAGE REPORT\")\n    print(\"=\" * 60)\n    print()\n    print(f\"Overall Coverage: {report.coverage_percent:.1f}%\")\n    print()\n    print(f\"Total functions/methods: {report.total_functions}\")\n    print(f\"With docstrings: {report.with_docstrings}\")\n    print(f\"Missing docstrings: {report.total_functions - report.with_docstrings}\")\n    print()\n\n    # Style breakdown\n    print(\"Docstring Styles:\")\n    for style, count in sorted(report.styles.items(), key=lambda x: -x[1]):\n        print(f\"  {style}: {count}\")\n    print()\n\n    # Missing by file\n    print(\"Files Missing Docstrings:\")\n    missing_by_file = report.missing_by_file()\n    for file_path, missing in sorted(missing_by_file.items(), key=lambda x: -len(x[1]))[:10]:\n        print(f\"  {file_path}: {len(missing)} missing\")\n        for func_name in missing[:3]:\n            print(f\"    - {func_name}\")\n        if len(missing) &gt; 3:\n            print(f\"    ... and {len(missing) - 3} more\")\n\nif __name__ == \"__main__\":\n    import sys\n    path = sys.argv[1] if len(sys.argv) &gt; 1 else \"src/\"\n    docstring_coverage(path)\n</code></pre>"},{"location":"examples/analysis-recipes/#todo-tracker","title":"TODO Tracker","text":"<pre><code>#!/usr/bin/env python\n\"\"\"Track TODO comments in codebase.\"\"\"\nfrom rejig import Rejig\nfrom collections import defaultdict\n\ndef track_todos(path: str = \"src/\") -&gt; None:\n    rj = Rejig(path)\n    todos = rj.find_todos()\n\n    print(\"TODO TRACKING REPORT\")\n    print(\"=\" * 60)\n    print()\n    print(f\"Total TODOs: {len(todos)}\")\n    print()\n\n    # By type\n    by_type = todos.count_by_type()\n    print(\"By Type:\")\n    for todo_type, count in sorted(by_type.items(), key=lambda x: -x[1]):\n        print(f\"  {todo_type}: {count}\")\n    print()\n\n    # By author (if available)\n    by_author = defaultdict(list)\n    for todo in todos:\n        author = todo.author or \"unassigned\"\n        by_author[author].append(todo)\n\n    print(\"By Author:\")\n    for author, author_todos in sorted(by_author.items(), key=lambda x: -len(x[1])):\n        print(f\"  {author}: {len(author_todos)}\")\n    print()\n\n    # High priority\n    high_priority = todos.by_priority(1) + todos.by_priority(2)\n    if high_priority:\n        print(f\"High Priority ({len(high_priority)}):\")\n        for todo in high_priority[:10]:\n            print(f\"  [{todo.todo_type}] {todo.file_path}:{todo.line_number}\")\n            print(f\"    {todo.text[:60]}...\")\n    print()\n\n    # Without issue refs\n    no_issues = todos.without_issue_refs()\n    print(f\"Without Issue References: {len(no_issues)}\")\n    if no_issues:\n        print(\"  Consider linking these to issues for tracking:\")\n        for todo in no_issues[:5]:\n            print(f\"    - {todo.file_path}:{todo.line_number}\")\n\nif __name__ == \"__main__\":\n    import sys\n    path = sys.argv[1] if len(sys.argv) &gt; 1 else \"src/\"\n    track_todos(path)\n</code></pre>"},{"location":"examples/analysis-recipes/#import-graph-analysis","title":"Import Graph Analysis","text":"<pre><code>#!/usr/bin/env python\n\"\"\"Analyze import structure.\"\"\"\nfrom rejig import Rejig, ImportGraph\n\ndef analyze_imports(path: str = \"src/\") -&gt; None:\n    rj = Rejig(path)\n    graph = ImportGraph(rj)\n    graph.build()\n\n    print(\"IMPORT GRAPH ANALYSIS\")\n    print(\"=\" * 60)\n    print()\n\n    # Basic stats\n    print(f\"Total modules: {graph.module_count}\")\n    print(f\"Total import edges: {graph.edge_count}\")\n    print()\n\n    # Circular imports\n    cycles = graph.find_circular_imports()\n    print(f\"Circular Imports: {len(cycles)}\")\n    for i, cycle in enumerate(cycles[:5], 1):\n        print(f\"  {i}. {' -&gt; '.join(cycle.modules)}\")\n    if len(cycles) &gt; 5:\n        print(f\"  ... and {len(cycles) - 5} more\")\n    print()\n\n    # Most imported modules\n    print(\"Most Imported Modules:\")\n    most_imported = graph.most_imported(10)\n    for module, count in most_imported:\n        print(f\"  {module}: imported by {count} modules\")\n    print()\n\n    # Modules with most imports\n    print(\"Modules with Most Dependencies:\")\n    most_deps = graph.most_dependencies(10)\n    for module, count in most_deps:\n        print(f\"  {module}: imports {count} modules\")\n\nif __name__ == \"__main__\":\n    import sys\n    path = sys.argv[1] if len(sys.argv) &gt; 1 else \"src/\"\n    analyze_imports(path)\n</code></pre>"},{"location":"examples/analysis-recipes/#full-codebase-report","title":"Full Codebase Report","text":"<pre><code>#!/usr/bin/env python\n\"\"\"Generate comprehensive codebase report.\"\"\"\nimport json\nfrom pathlib import Path\nfrom rejig import (\n    Rejig,\n    CodeMetrics,\n    TypeHintAnalyzer,\n    DocstringAnalyzer,\n    ComplexityAnalyzer,\n    DeadCodeAnalyzer,\n    SecurityReporter,\n    AnalysisReporter,\n)\n\ndef full_report(path: str = \"src/\", output: str = \"report.json\") -&gt; None:\n    rj = Rejig(path)\n\n    report = {\n        \"path\": str(path),\n        \"metrics\": {},\n        \"type_hints\": {},\n        \"docstrings\": {},\n        \"complexity\": {},\n        \"dead_code\": {},\n        \"security\": {},\n        \"analysis\": {},\n    }\n\n    # Code metrics\n    metrics = CodeMetrics(rj)\n    project_metrics = metrics.analyze_project()\n    report[\"metrics\"] = {\n        \"files\": project_metrics.file_count,\n        \"total_loc\": project_metrics.total_loc,\n        \"functions\": project_metrics.total_functions,\n        \"classes\": project_metrics.total_classes,\n        \"avg_complexity\": project_metrics.avg_complexity,\n    }\n\n    # Type hint coverage\n    type_analyzer = TypeHintAnalyzer(rj)\n    type_stats = type_analyzer.coverage_stats()\n    report[\"type_hints\"] = {\n        \"coverage_percent\": type_stats.coverage_percent,\n        \"typed_functions\": type_stats.typed_functions,\n        \"total_functions\": type_stats.total_functions,\n    }\n\n    # Docstring coverage\n    doc_analyzer = DocstringAnalyzer(rj)\n    doc_report = doc_analyzer.analyze()\n    report[\"docstrings\"] = {\n        \"coverage_percent\": doc_report.coverage_percent,\n        \"with_docstrings\": doc_report.with_docstrings,\n        \"total\": doc_report.total_functions,\n    }\n\n    # Complexity\n    complexity_analyzer = ComplexityAnalyzer(rj)\n    complex_funcs = complexity_analyzer.find_complex_functions(10)\n    report[\"complexity\"] = {\n        \"functions_over_threshold\": len(complex_funcs),\n        \"top_5\": [\n            {\"name\": f.name, \"file\": str(f.file_path), \"complexity\": c.cyclomatic}\n            for f, c in complex_funcs[:5]\n        ],\n    }\n\n    # Dead code\n    dead_analyzer = DeadCodeAnalyzer(rj)\n    report[\"dead_code\"] = {\n        \"unused_functions\": len(dead_analyzer.find_unused_functions()),\n        \"unused_classes\": len(dead_analyzer.find_unused_classes()),\n        \"unused_imports\": len(dead_analyzer.find_unused_imports()),\n    }\n\n    # Security\n    security = rj.find_security_issues()\n    report[\"security\"] = {\n        \"total\": len(security),\n        \"by_severity\": security.count_by_severity(),\n        \"by_type\": security.count_by_type(),\n    }\n\n    # Analysis\n    issues = rj.find_analysis_issues()\n    report[\"analysis\"] = {\n        \"total\": len(issues),\n        \"by_severity\": issues.count_by_severity(),\n        \"by_type\": issues.count_by_type(),\n    }\n\n    # Save report\n    with open(output, \"w\") as f:\n        json.dump(report, f, indent=2, default=str)\n\n    print(f\"Report saved to {output}\")\n\n    # Print summary\n    print(\"\\nSUMMARY\")\n    print(\"=\" * 40)\n    print(f\"Files: {report['metrics']['files']}\")\n    print(f\"Lines of code: {report['metrics']['total_loc']}\")\n    print(f\"Type hint coverage: {report['type_hints']['coverage_percent']:.1f}%\")\n    print(f\"Docstring coverage: {report['docstrings']['coverage_percent']:.1f}%\")\n    print(f\"Security issues: {report['security']['total']}\")\n    print(f\"Analysis issues: {report['analysis']['total']}\")\n\nif __name__ == \"__main__\":\n    import sys\n    path = sys.argv[1] if len(sys.argv) &gt; 1 else \"src/\"\n    output = sys.argv[2] if len(sys.argv) &gt; 2 else \"report.json\"\n    full_report(path, output)\n</code></pre>"},{"location":"examples/analysis-recipes/#ci-integration-script","title":"CI Integration Script","text":"<pre><code>#!/usr/bin/env python\n\"\"\"CI integration script with configurable thresholds.\"\"\"\nimport sys\nfrom rejig import Rejig\n\ndef ci_check(\n    path: str = \"src/\",\n    max_complexity: int = 15,\n    min_type_coverage: float = 80.0,\n    min_doc_coverage: float = 70.0,\n    fail_on_security: bool = True,\n) -&gt; int:\n    rj = Rejig(path)\n    failed = False\n\n    # Security check\n    if fail_on_security:\n        security = rj.find_security_issues()\n        critical_high = security.critical() + security.high()\n        if critical_high:\n            print(f\"FAIL: {len(critical_high)} critical/high security issues\")\n            for issue in critical_high[:5]:\n                print(f\"  - {issue.file_path}:{issue.line_number}: {issue.message}\")\n            failed = True\n        else:\n            print(\"PASS: No critical/high security issues\")\n\n    # Complexity check\n    from rejig import ComplexityAnalyzer\n    analyzer = ComplexityAnalyzer(rj)\n    complex_funcs = analyzer.find_complex_functions(max_complexity)\n    if complex_funcs:\n        print(f\"FAIL: {len(complex_funcs)} functions exceed complexity {max_complexity}\")\n        failed = True\n    else:\n        print(f\"PASS: No functions exceed complexity {max_complexity}\")\n\n    # Type coverage check\n    from rejig import TypeHintAnalyzer\n    type_analyzer = TypeHintAnalyzer(rj)\n    type_stats = type_analyzer.coverage_stats()\n    if type_stats.coverage_percent &lt; min_type_coverage:\n        print(f\"FAIL: Type hint coverage {type_stats.coverage_percent:.1f}% &lt; {min_type_coverage}%\")\n        failed = True\n    else:\n        print(f\"PASS: Type hint coverage {type_stats.coverage_percent:.1f}%\")\n\n    # Docstring coverage check\n    from rejig import DocstringAnalyzer\n    doc_analyzer = DocstringAnalyzer(rj)\n    doc_report = doc_analyzer.analyze()\n    if doc_report.coverage_percent &lt; min_doc_coverage:\n        print(f\"FAIL: Docstring coverage {doc_report.coverage_percent:.1f}% &lt; {min_doc_coverage}%\")\n        failed = True\n    else:\n        print(f\"PASS: Docstring coverage {doc_report.coverage_percent:.1f}%\")\n\n    return 1 if failed else 0\n\nif __name__ == \"__main__\":\n    sys.exit(ci_check())\n</code></pre>"},{"location":"examples/codemod-recipes/","title":"Codemod Recipes","text":"<p>Ready-to-use scripts for common code migrations.</p>"},{"location":"examples/codemod-recipes/#django-migrations","title":"Django Migrations","text":""},{"location":"examples/codemod-recipes/#rename-model","title":"Rename Model","text":"<pre><code>from rejig import Rejig\n\ndef rename_django_model(rj: Rejig, old_name: str, new_name: str):\n    \"\"\"Rename a Django model and update references.\"\"\"\n\n    # Rename the model class\n    model = rj.find_classes(old_name).first()\n    if not model:\n        print(f\"Model {old_name} not found\")\n        return\n\n    model.rename(new_name)\n\n    # Update Meta.db_table if it exists\n    meta = model.find_class(\"Meta\")\n    if meta.exists():\n        # Keep the old table name to avoid migration\n        content = meta.get_content()\n        if \"db_table\" not in str(content.data):\n            meta.add_attribute(\"db_table\", type_hint=\"str\",\n                             default=f'\"{old_name.lower()}\"')\n\n    # Update ForeignKey references in other models\n    for cls in rj.find_classes():\n        content = cls.get_content()\n        if content and old_name in str(content.data):\n            # This is simplified - real impl would use CST\n            pass\n\n    print(f\"Renamed {old_name} to {new_name}\")\n\n\nrj = Rejig(\"myapp/\")\nrename_django_model(rj, \"UserProfile\", \"Profile\")\n</code></pre>"},{"location":"examples/codemod-recipes/#add-createdupdated-timestamps","title":"Add Created/Updated Timestamps","text":"<pre><code>def add_timestamps_to_models(rj: Rejig):\n    \"\"\"Add created_at and updated_at to all models.\"\"\"\n\n    for cls in rj.find_classes():\n        # Check if it's a Django model\n        content = cls.get_content()\n        if not content or \"models.Model\" not in str(content.data):\n            continue\n\n        # Skip if already has timestamps\n        if \"created_at\" in str(content.data):\n            continue\n\n        # Add the fields\n        cls.add_attribute(\n            \"created_at\",\n            type_hint=\"models.DateTimeField\",\n            default=\"models.DateTimeField(auto_now_add=True)\"\n        )\n        cls.add_attribute(\n            \"updated_at\",\n            type_hint=\"models.DateTimeField\",\n            default=\"models.DateTimeField(auto_now=True)\"\n        )\n\n        print(f\"Added timestamps to {cls.name}\")\n\n\nrj = Rejig(\"myapp/models/\")\nadd_timestamps_to_models(rj)\n</code></pre>"},{"location":"examples/codemod-recipes/#testing-migrations","title":"Testing Migrations","text":""},{"location":"examples/codemod-recipes/#convert-unittest-to-pytest","title":"Convert unittest to pytest","text":"<pre><code>def convert_unittest_to_pytest(rj: Rejig):\n    \"\"\"Convert unittest test classes to pytest functions.\"\"\"\n\n    for cls in rj.find_classes(pattern=\"^Test\"):\n        # Skip if not a unittest class\n        content = cls.get_content()\n        if not content or \"unittest.TestCase\" not in str(content.data):\n            continue\n\n        # Remove the base class\n        cls.remove_base_class(\"unittest.TestCase\")\n\n        # Convert setUp to fixture\n        setup = cls.find_method(\"setUp\")\n        if setup.exists():\n            setup.rename(\"setup_method\")\n            setup.add_decorator(\"pytest.fixture(autouse=True)\")\n\n        # Convert assertion methods\n        for method in cls.find_methods(pattern=\"^test_\"):\n            # This would need more sophisticated replacement\n            # assertEqual \u2192 assert x == y\n            # assertTrue \u2192 assert x\n            pass\n\n        print(f\"Converted {cls.name}\")\n\n\nrj = Rejig(\"tests/\")\nconvert_unittest_to_pytest(rj)\n</code></pre>"},{"location":"examples/codemod-recipes/#add-pytest-markers","title":"Add pytest Markers","text":"<pre><code>def add_integration_markers(rj: Rejig):\n    \"\"\"Mark tests that use database or network as integration tests.\"\"\"\n\n    integration_indicators = [\"database\", \"db\", \"requests\", \"httpx\", \"aiohttp\"]\n\n    for cls in rj.find_classes(pattern=\"^Test\"):\n        content = cls.get_content()\n        if not content:\n            continue\n\n        content_str = str(content.data).lower()\n\n        # Check for integration test indicators\n        is_integration = any(ind in content_str for ind in integration_indicators)\n\n        if is_integration:\n            cls.add_decorator(\"pytest.mark.integration\")\n            print(f\"Marked {cls.name} as integration\")\n\n\nrj = Rejig(\"tests/\")\nadd_integration_markers(rj)\n</code></pre>"},{"location":"examples/codemod-recipes/#type-hint-migrations","title":"Type Hint Migrations","text":""},{"location":"examples/codemod-recipes/#add-type-hints-from-defaults","title":"Add Type Hints from Defaults","text":"<pre><code>def add_type_hints_from_defaults(rj: Rejig):\n    \"\"\"Infer type hints from default parameter values.\"\"\"\n\n    type_map = {\n        \"None\": \"None\",\n        \"True\": \"bool\",\n        \"False\": \"bool\",\n        \"[]\": \"list\",\n        \"{}\": \"dict\",\n        '\"\"': \"str\",\n        \"''\": \"str\",\n        \"0\": \"int\",\n        \"0.0\": \"float\",\n    }\n\n    for func in rj.find_functions():\n        if func.has_type_hints():\n            continue\n\n        # This would need actual parameter inspection\n        # Simplified example\n        func.infer_type_hints()\n        print(f\"Added hints to {func.name}\")\n\n\nrj = Rejig(\"src/\")\nadd_type_hints_from_defaults(rj)\n</code></pre>"},{"location":"examples/codemod-recipes/#modernize-type-hints","title":"Modernize Type Hints","text":"<pre><code>def modernize_all_type_hints(rj: Rejig):\n    \"\"\"Update to Python 3.10+ type hint syntax.\"\"\"\n\n    for file in rj.find_files():\n        result = file.modernize_type_hints()\n        if result.files_changed:\n            print(f\"Modernized {file.path}\")\n\n\nrj = Rejig(\"src/\")\nmodernize_all_type_hints(rj)\n</code></pre>"},{"location":"examples/codemod-recipes/#api-migrations","title":"API Migrations","text":""},{"location":"examples/codemod-recipes/#rename-function-across-codebase","title":"Rename Function Across Codebase","text":"<pre><code>def rename_api_function(rj: Rejig, old_name: str, new_name: str):\n    \"\"\"Rename a function and update all call sites.\"\"\"\n\n    # Find and rename the function definition\n    func = rj.find_functions(old_name).first()\n    if func:\n        func.rename(new_name)\n        print(f\"Renamed definition: {old_name} \u2192 {new_name}\")\n\n    # Update imports\n    for file in rj.find_files():\n        content = file.get_content()\n        if not content:\n            continue\n\n        if f\"from .* import.*{old_name}\" in str(content.data):\n            # Update import statement\n            file.replace_pattern(\n                rf\"(from .* import.*)(\\b{old_name}\\b)\",\n                rf\"\\1{new_name}\"\n            )\n\n        # Update call sites\n        file.replace_pattern(rf\"\\b{old_name}\\s*\\(\", f\"{new_name}(\")\n\n\nrj = Rejig(\"src/\")\nrename_api_function(rj, \"process_data\", \"transform_data\")\n</code></pre>"},{"location":"examples/codemod-recipes/#deprecate-and-redirect","title":"Deprecate and Redirect","text":"<pre><code>def deprecate_function(rj: Rejig, old_name: str, new_name: str):\n    \"\"\"Add deprecation wrapper that redirects to new function.\"\"\"\n\n    func = rj.find_functions(old_name).first()\n    if not func:\n        print(f\"Function {old_name} not found\")\n        return\n\n    # Get the file\n    file = rj.file(func.file_path)\n\n    # Add deprecation wrapper\n    wrapper = f'''\ndef {old_name}(*args, **kwargs):\n    \"\"\"Deprecated: Use {new_name} instead.\"\"\"\n    import warnings\n    warnings.warn(\n        \"{old_name} is deprecated, use {new_name}\",\n        DeprecationWarning,\n        stacklevel=2\n    )\n    return {new_name}(*args, **kwargs)\n'''\n\n    # Rename original\n    func.rename(new_name)\n\n    # Add wrapper after the renamed function\n    # (This would need proper positioning logic)\n    print(f\"Deprecated {old_name} \u2192 {new_name}\")\n\n\nrj = Rejig(\"src/\")\ndeprecate_function(rj, \"old_api\", \"new_api\")\n</code></pre>"},{"location":"examples/codemod-recipes/#cleanup-codemods","title":"Cleanup Codemods","text":""},{"location":"examples/codemod-recipes/#remove-debug-statements","title":"Remove Debug Statements","text":"<pre><code>def remove_debug_statements(rj: Rejig):\n    \"\"\"Remove print statements and debugger calls.\"\"\"\n\n    debug_patterns = [\n        r\"^\\s*print\\s*\\(\",\n        r\"^\\s*import pdb\",\n        r\"^\\s*pdb\\.set_trace\\(\\)\",\n        r\"^\\s*breakpoint\\(\\)\",\n        r\"^\\s*import ipdb\",\n        r\"^\\s*ipdb\\.set_trace\\(\\)\",\n    ]\n\n    for file in rj.find_files():\n        for pattern in debug_patterns:\n            file.replace_pattern(pattern, \"\")\n\n        print(f\"Cleaned {file.path}\")\n\n\nrj = Rejig(\"src/\")\nremove_debug_statements(rj)\n</code></pre>"},{"location":"examples/codemod-recipes/#remove-unused-type-ignores","title":"Remove Unused Type Ignores","text":"<pre><code>def cleanup_type_ignores(rj: Rejig):\n    \"\"\"Remove type: ignore comments that are no longer needed.\"\"\"\n\n    result = rj.remove_unused_type_ignores()\n\n    if result.files_changed:\n        print(f\"Cleaned {len(result.files_changed)} files\")\n        for f in result.files_changed:\n            print(f\"  - {f}\")\n\n\nrj = Rejig(\"src/\")\ncleanup_type_ignores(rj)\n</code></pre>"},{"location":"examples/codemod-recipes/#standardize-string-quotes","title":"Standardize String Quotes","text":"<pre><code>def standardize_quotes(rj: Rejig):\n    \"\"\"Convert all strings to double quotes (let Black handle it).\"\"\"\n\n    # This is better handled by Black, but as an example:\n    for file in rj.find_files():\n        file.replace_pattern(r\"'([^']*)'\", r'\"\\1\"')\n\n\n# Better approach: just run Black\nimport subprocess\nsubprocess.run([\"black\", \"src/\"])\n</code></pre>"},{"location":"examples/codemod-recipes/#project-setup-codemods","title":"Project Setup Codemods","text":""},{"location":"examples/codemod-recipes/#initialize-pyprojecttoml","title":"Initialize pyproject.toml","text":"<pre><code>def init_pyproject(rj: Rejig, project_name: str):\n    \"\"\"Create a modern pyproject.toml.\"\"\"\n\n    toml = rj.toml(\"pyproject.toml\")\n\n    # Project metadata\n    toml.set(\"project.name\", project_name)\n    toml.set(\"project.version\", \"0.1.0\")\n    toml.set(\"project.requires-python\", \"&gt;=3.10\")\n    toml.set(\"project.dependencies\", [])\n    toml.set(\"project.optional-dependencies.dev\", [\n        \"pytest&gt;=7.0\",\n        \"black&gt;=23.0\",\n        \"ruff&gt;=0.1.0\",\n        \"mypy&gt;=1.0\",\n    ])\n\n    # Tool configuration\n    toml.set(\"tool.black.line-length\", 110)\n    toml.set(\"tool.ruff.select\", [\"E\", \"F\", \"W\", \"I\"])\n    toml.set(\"tool.ruff.line-length\", 110)\n    toml.set(\"tool.mypy.python_version\", \"3.10\")\n    toml.set(\"tool.mypy.strict\", True)\n    toml.set(\"tool.pytest.ini_options.testpaths\", [\"tests\"])\n\n    print(f\"Created pyproject.toml for {project_name}\")\n\n\nrj = Rejig(\".\")\ninit_pyproject(rj, \"my-project\")\n</code></pre>"},{"location":"examples/codemod-recipes/#running-codemods","title":"Running Codemods","text":""},{"location":"examples/codemod-recipes/#as-a-script","title":"As a Script","text":"<pre><code>#!/usr/bin/env python3\n\"\"\"Codemod: Add type hints to all functions.\"\"\"\n\nfrom rejig import Rejig\nimport sys\n\ndef main():\n    path = sys.argv[1] if len(sys.argv) &gt; 1 else \"src/\"\n    rj = Rejig(path)\n\n    results = (\n        rj.find_functions()\n        .filter(lambda f: not f.has_type_hints())\n        .infer_type_hints()\n    )\n\n    print(f\"Updated {len(results.succeeded)} functions\")\n    if results.failed:\n        print(f\"Failed: {len(results.failed)}\")\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>"},{"location":"examples/codemod-recipes/#with-dry-run","title":"With Dry Run","text":"<pre><code>def run_codemod(rj: Rejig, dry_run: bool = True):\n    \"\"\"Run codemod with optional dry run.\"\"\"\n\n    if dry_run:\n        rj = Rejig(rj.root, dry_run=True)\n        print(\"DRY RUN - no files will be modified\")\n\n    # Your codemod logic here\n    result = rj.find_classes(\"^Test\").add_decorator(\"@slow\")\n\n    if dry_run:\n        print(f\"Would modify {len(result)} classes\")\n    else:\n        print(f\"Modified {len(result.files_changed)} files\")\n\n\nrj = Rejig(\"src/\")\nrun_codemod(rj, dry_run=True)   # Preview\nrun_codemod(rj, dry_run=False)  # Apply\n</code></pre>"},{"location":"examples/optimization-recipes/","title":"Optimization Recipes","text":"<p>Ready-to-use scripts for code optimization analysis and reporting.</p>"},{"location":"examples/optimization-recipes/#quick-audit","title":"Quick Audit","text":""},{"location":"examples/optimization-recipes/#full-codebase-scan","title":"Full Codebase Scan","text":"<pre><code>from rejig import Rejig, DRYAnalyzer, LoopOptimizer\n\ndef audit_codebase(path: str):\n    \"\"\"Run a complete optimization audit.\"\"\"\n    rj = Rejig(path)\n\n    print(f\"Auditing: {path}\")\n    print(\"=\" * 50)\n\n    # DRY Analysis\n    dry = DRYAnalyzer(rj)\n    dry_issues = dry.find_all_issues()\n\n    print(\"\\nDRY Violations:\")\n    print(dry_issues.summary())\n\n    # Loop Analysis\n    loops = LoopOptimizer(rj)\n    loop_issues = loops.find_all_issues()\n\n    print(\"\\nLoop Optimizations:\")\n    print(loop_issues.summary())\n\n    # Summary\n    total = len(dry_issues) + len(loop_issues)\n    print(f\"\\nTotal: {total} optimization opportunities\")\n\n    return dry_issues, loop_issues\n\n\naudit_codebase(\"src/\")\n</code></pre>"},{"location":"examples/optimization-recipes/#single-file-analysis","title":"Single File Analysis","text":"<pre><code>def analyze_file(rj: Rejig, file_path: str):\n    \"\"\"Analyze a single file for optimization opportunities.\"\"\"\n    from pathlib import Path\n\n    dry = DRYAnalyzer(rj)\n    loops = LoopOptimizer(rj)\n\n    path = Path(file_path)\n\n    dry_issues = dry.find_all_issues().in_file(path)\n    loop_issues = loops.find_all_issues().in_file(path)\n\n    print(f\"Analysis for {file_path}:\")\n\n    if dry_issues:\n        print(\"\\nDRY Issues:\")\n        for issue in dry_issues:\n            print(f\"  Line {issue.line_number}: {issue.message}\")\n\n    if loop_issues:\n        print(\"\\nLoop Issues:\")\n        for issue in loop_issues:\n            print(f\"  Line {issue.line_number}: {issue.message}\")\n            print(f\"    Suggested: {issue.suggested_code}\")\n\n    if not dry_issues and not loop_issues:\n        print(\"  No optimization opportunities found\")\n\n\nrj = Rejig(\"src/\")\nanalyze_file(rj, \"src/utils.py\")\n</code></pre>"},{"location":"examples/optimization-recipes/#dry-recipes","title":"DRY Recipes","text":""},{"location":"examples/optimization-recipes/#extract-duplicate-code-report","title":"Extract Duplicate Code Report","text":"<pre><code>from rejig import Rejig, DRYAnalyzer\nfrom collections import defaultdict\n\ndef find_extraction_candidates(rj: Rejig):\n    \"\"\"Find code blocks that should be extracted to functions.\"\"\"\n    dry = DRYAnalyzer(rj)\n\n    duplicates = dry.find_duplicate_code_blocks(\n        min_lines=5,       # At least 5 lines\n        min_occurrences=2  # At least 2 occurrences\n    )\n\n    # Group by hash to find related duplicates\n    groups = defaultdict(list)\n    for dup in duplicates:\n        # Use the original code as a rough grouping key\n        key = dup.original_code[:100]\n        groups[key].append(dup)\n\n    print(\"Extraction Candidates:\")\n    print(\"=\" * 50)\n\n    for i, (_, group) in enumerate(groups.items(), 1):\n        print(f\"\\nCandidate {i}: {len(group)} occurrences\")\n        print(f\"Lines: {group[0].finding.context.get('line_count', '?')}\")\n        print(\"Locations:\")\n        for dup in group:\n            print(f\"  - {dup.location}\")\n        print(\"Sample code:\")\n        print(\"  \" + group[0].original_code[:200].replace(\"\\n\", \"\\n  \"))\n\n\nrj = Rejig(\"src/\")\nfind_extraction_candidates(rj)\n</code></pre>"},{"location":"examples/optimization-recipes/#magic-number-cleanup","title":"Magic Number Cleanup","text":"<pre><code>def identify_magic_numbers(rj: Rejig):\n    \"\"\"Find magic numbers and suggest constant names.\"\"\"\n    dry = DRYAnalyzer(rj)\n\n    literals = dry.find_duplicate_literals(min_occurrences=2)\n\n    # Filter to just numbers\n    numbers = [\n        lit for lit in literals\n        if lit.finding.context.get(\"literal_type\") == \"integer\"\n    ]\n\n    print(\"Magic Numbers Found:\")\n    print(\"=\" * 50)\n\n    # Group by value\n    by_value = {}\n    for num in numbers:\n        value = num.original_code\n        if value not in by_value:\n            by_value[value] = []\n        by_value[value].append(num)\n\n    # Sort by frequency\n    sorted_values = sorted(\n        by_value.items(),\n        key=lambda x: len(x[1]),\n        reverse=True\n    )\n\n    for value, occurrences in sorted_values:\n        count = len(occurrences)\n        print(f\"\\n{value} (used {count} times)\")\n\n        # Suggest a constant name based on context\n        contexts = [o.finding.name for o in occurrences if o.finding.name]\n        if contexts:\n            suggested_name = suggest_constant_name(value, contexts)\n            print(f\"  Suggested: {suggested_name} = {value}\")\n\n        print(\"  Locations:\")\n        for occ in occurrences[:5]:\n            print(f\"    - {occ.location}\")\n        if count &gt; 5:\n            print(f\"    ... and {count - 5} more\")\n\n\ndef suggest_constant_name(value: str, contexts: list[str]) -&gt; str:\n    \"\"\"Suggest a constant name based on usage context.\"\"\"\n    # Simple heuristic - in practice, use more sophisticated analysis\n    common_patterns = {\n        \"60\": \"SECONDS_PER_MINUTE\",\n        \"3600\": \"SECONDS_PER_HOUR\",\n        \"86400\": \"SECONDS_PER_DAY\",\n        \"1000\": \"MILLISECONDS_PER_SECOND\",\n        \"1024\": \"BYTES_PER_KB\",\n        \"100\": \"PERCENTAGE_MAX\",\n    }\n    return common_patterns.get(value, f\"CONSTANT_{value}\")\n\n\nrj = Rejig(\"src/\")\nidentify_magic_numbers(rj)\n</code></pre>"},{"location":"examples/optimization-recipes/#string-constant-extraction","title":"String Constant Extraction","text":"<pre><code>def find_repeated_strings(rj: Rejig, min_length: int = 10):\n    \"\"\"Find repeated string literals that should be constants.\"\"\"\n    dry = DRYAnalyzer(rj)\n\n    literals = dry.find_duplicate_literals(min_occurrences=2)\n\n    # Filter to strings of sufficient length\n    strings = [\n        lit for lit in literals\n        if lit.finding.context.get(\"literal_type\") == \"string\"\n        and len(lit.original_code) &gt;= min_length\n    ]\n\n    print(f\"Repeated Strings (&gt;= {min_length} chars):\")\n    print(\"=\" * 50)\n\n    # Group by value\n    by_value = {}\n    for s in strings:\n        value = s.original_code\n        if value not in by_value:\n            by_value[value] = []\n        by_value[value].append(s)\n\n    for value, occurrences in sorted(by_value.items(), key=lambda x: -len(x[1])):\n        count = len(occurrences)\n        print(f\"\\n{value[:50]}{'...' if len(value) &gt; 50 else ''}\")\n        print(f\"  Used {count} times\")\n        print(\"  Locations:\")\n        for occ in occurrences[:3]:\n            print(f\"    - {occ.location}\")\n\n\nrj = Rejig(\"src/\")\nfind_repeated_strings(rj)\n</code></pre>"},{"location":"examples/optimization-recipes/#similar-function-consolidation","title":"Similar Function Consolidation","text":"<pre><code>def find_consolidation_candidates(rj: Rejig):\n    \"\"\"Find similar functions that could be merged.\"\"\"\n    dry = DRYAnalyzer(rj)\n\n    similar = dry.find_similar_functions()\n\n    if not similar:\n        print(\"No similar functions found\")\n        return\n\n    print(\"Similar Function Groups:\")\n    print(\"=\" * 50)\n\n    # Group by similarity\n    seen = set()\n    groups = []\n\n    for func in similar:\n        if func.name in seen:\n            continue\n\n        similar_names = func.finding.context.get(\"similar_functions\", [])\n        group = [func.name] + similar_names\n\n        for name in group:\n            seen.add(name)\n\n        groups.append({\n            \"functions\": group,\n            \"location\": func.location,\n            \"params\": func.finding.context.get(\"param_count\"),\n            \"statements\": func.finding.context.get(\"statement_count\"),\n        })\n\n    for i, group in enumerate(groups, 1):\n        print(f\"\\nGroup {i}:\")\n        print(f\"  Functions: {', '.join(group['functions'])}\")\n        print(f\"  Parameters: {group['params']}\")\n        print(f\"  Statements: {group['statements']}\")\n        print(\"  Suggestion: Consider merging into a single parameterized function\")\n\n\nrj = Rejig(\"src/\")\nfind_consolidation_candidates(rj)\n</code></pre>"},{"location":"examples/optimization-recipes/#loop-recipes","title":"Loop Recipes","text":""},{"location":"examples/optimization-recipes/#comprehension-conversion-guide","title":"Comprehension Conversion Guide","text":"<pre><code>def generate_comprehension_fixes(rj: Rejig):\n    \"\"\"Generate copy-paste ready comprehension conversions.\"\"\"\n    loops = LoopOptimizer(rj)\n\n    comprehensions = loops.find_comprehension_opportunities()\n\n    if not comprehensions:\n        print(\"No loop-to-comprehension conversions found\")\n        return\n\n    print(\"Loop to Comprehension Conversions:\")\n    print(\"=\" * 50)\n\n    for opt in comprehensions.sorted_by_location():\n        print(f\"\\n{opt.location}\")\n        print(\"-\" * 40)\n        print(\"Before:\")\n        print(indent(opt.original_code, \"  \"))\n        print(\"\\nAfter:\")\n        print(indent(opt.suggested_code, \"  \"))\n        print(f\"\\nBenefit: {opt.finding.estimated_improvement}\")\n\n\ndef indent(text: str, prefix: str) -&gt; str:\n    \"\"\"Indent each line of text.\"\"\"\n    return \"\\n\".join(prefix + line for line in text.split(\"\\n\"))\n\n\nrj = Rejig(\"src/\")\ngenerate_comprehension_fixes(rj)\n</code></pre>"},{"location":"examples/optimization-recipes/#builtin-replacement-guide","title":"Builtin Replacement Guide","text":"<pre><code>def generate_builtin_fixes(rj: Rejig):\n    \"\"\"Generate builtin function replacements.\"\"\"\n    loops = LoopOptimizer(rj)\n\n    builtins = loops.find_builtin_opportunities()\n\n    # Group by builtin type\n    by_type = builtins.group_by_type()\n\n    print(\"Builtin Function Replacements:\")\n    print(\"=\" * 50)\n\n    for opt_type, issues in by_type.items():\n        print(f\"\\n## {opt_type.name}\")\n        print(f\"Found: {len(issues)} occurrences\\n\")\n\n        for opt in issues:\n            print(f\"  {opt.location}\")\n            print(f\"    {opt.suggested_code}\")\n\n\nrj = Rejig(\"src/\")\ngenerate_builtin_fixes(rj)\n</code></pre>"},{"location":"examples/optimization-recipes/#performance-hotspot-finder","title":"Performance Hotspot Finder","text":"<pre><code>def find_performance_hotspots(rj: Rejig):\n    \"\"\"Find the most impactful performance improvements.\"\"\"\n    loops = LoopOptimizer(rj)\n\n    all_issues = loops.find_all_issues(min_confidence=0.8)\n\n    # Prioritize by type (some optimizations have bigger impact)\n    high_impact_types = {\n        \"SLOW_LOOP_TO_JOIN\",       # O(n) vs O(n\u00b2)\n        \"SLOW_LOOP_TO_SUM\",        # C implementation\n        \"SLOW_LOOP_TO_ANY_ALL\",    # Short-circuit\n    }\n\n    hotspots = [\n        opt for opt in all_issues\n        if opt.type.name in high_impact_types\n    ]\n\n    print(\"Performance Hotspots:\")\n    print(\"=\" * 50)\n\n    if not hotspots:\n        print(\"No high-impact optimizations found\")\n        return\n\n    for opt in hotspots:\n        print(f\"\\n{opt.location}\")\n        print(f\"  Type: {opt.type.name}\")\n        print(f\"  Impact: {opt.finding.estimated_improvement}\")\n        print(f\"  Fix: {opt.suggested_code}\")\n\n\nrj = Rejig(\"src/\")\nfind_performance_hotspots(rj)\n</code></pre>"},{"location":"examples/optimization-recipes/#report-generation","title":"Report Generation","text":""},{"location":"examples/optimization-recipes/#markdown-report","title":"Markdown Report","text":"<pre><code>def generate_markdown_report(rj: Rejig) -&gt; str:\n    \"\"\"Generate a comprehensive markdown report.\"\"\"\n    dry = DRYAnalyzer(rj)\n    loops = LoopOptimizer(rj)\n\n    dry_issues = dry.find_all_issues()\n    loop_issues = loops.find_all_issues()\n\n    lines = [\n        \"# Code Optimization Report\",\n        \"\",\n        f\"Generated for: `{rj.root}`\",\n        \"\",\n        \"## Summary\",\n        \"\",\n        f\"- **DRY violations:** {len(dry_issues)}\",\n        f\"- **Loop optimizations:** {len(loop_issues)}\",\n        f\"- **Total opportunities:** {len(dry_issues) + len(loop_issues)}\",\n        \"\",\n    ]\n\n    # DRY Section\n    lines.extend([\n        \"## DRY Violations\",\n        \"\",\n    ])\n\n    if dry_issues:\n        for opt_type, issues in dry_issues.group_by_type().items():\n            lines.append(f\"### {opt_type.name.replace('_', ' ').title()}\")\n            lines.append(\"\")\n            for issue in issues:\n                lines.append(f\"- `{issue.location}`: {issue.message}\")\n            lines.append(\"\")\n    else:\n        lines.append(\"No DRY violations found.\")\n        lines.append(\"\")\n\n    # Loop Section\n    lines.extend([\n        \"## Loop Optimizations\",\n        \"\",\n    ])\n\n    if loop_issues:\n        for opt_type, issues in loop_issues.group_by_type().items():\n            lines.append(f\"### {opt_type.name.replace('_', ' ').title()}\")\n            lines.append(\"\")\n            for issue in issues:\n                lines.append(f\"**{issue.location}**\")\n                lines.append(\"\")\n                lines.append(\"```python\")\n                lines.append(f\"# Before:\")\n                lines.append(issue.original_code)\n                lines.append(\"\")\n                lines.append(f\"# After:\")\n                lines.append(issue.suggested_code)\n                lines.append(\"```\")\n                lines.append(\"\")\n    else:\n        lines.append(\"No loop optimizations found.\")\n        lines.append(\"\")\n\n    return \"\\n\".join(lines)\n\n\nrj = Rejig(\"src/\")\nreport = generate_markdown_report(rj)\nprint(report)\n\n# Or save to file\nwith open(\"optimization-report.md\", \"w\") as f:\n    f.write(report)\n</code></pre>"},{"location":"examples/optimization-recipes/#json-export","title":"JSON Export","text":"<pre><code>import json\nfrom pathlib import Path\n\ndef export_to_json(rj: Rejig, output_path: str):\n    \"\"\"Export optimization findings to JSON.\"\"\"\n    dry = DRYAnalyzer(rj)\n    loops = LoopOptimizer(rj)\n\n    dry_issues = dry.find_all_issues()\n    loop_issues = loops.find_all_issues()\n\n    data = {\n        \"root\": str(rj.root),\n        \"summary\": {\n            \"dry_violations\": len(dry_issues),\n            \"loop_optimizations\": len(loop_issues),\n            \"total\": len(dry_issues) + len(loop_issues),\n        },\n        \"dry_issues\": dry_issues.to_list_of_dicts(),\n        \"loop_issues\": loop_issues.to_list_of_dicts(),\n    }\n\n    with open(output_path, \"w\") as f:\n        json.dump(data, f, indent=2, default=str)\n\n    print(f\"Exported to {output_path}\")\n\n\nrj = Rejig(\"src/\")\nexport_to_json(rj, \"optimization-findings.json\")\n</code></pre>"},{"location":"examples/optimization-recipes/#html-report","title":"HTML Report","text":"<pre><code>def generate_html_report(rj: Rejig) -&gt; str:\n    \"\"\"Generate an HTML report with syntax highlighting.\"\"\"\n    dry = DRYAnalyzer(rj)\n    loops = LoopOptimizer(rj)\n\n    dry_issues = dry.find_all_issues()\n    loop_issues = loops.find_all_issues()\n\n    html = f\"\"\"&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;Optimization Report&lt;/title&gt;\n    &lt;style&gt;\n        body {{ font-family: -apple-system, BlinkMacSystemFont, sans-serif; margin: 2em; }}\n        .issue {{ border: 1px solid #ddd; padding: 1em; margin: 1em 0; border-radius: 4px; }}\n        .location {{ color: #666; font-family: monospace; }}\n        .code {{ background: #f5f5f5; padding: 1em; border-radius: 4px; overflow-x: auto; }}\n        pre {{ margin: 0; }}\n        h2 {{ color: #333; }}\n        .count {{ color: #888; font-weight: normal; }}\n    &lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h1&gt;Code Optimization Report&lt;/h1&gt;\n    &lt;p&gt;Path: &lt;code&gt;{rj.root}&lt;/code&gt;&lt;/p&gt;\n\n    &lt;h2&gt;Summary&lt;/h2&gt;\n    &lt;ul&gt;\n        &lt;li&gt;DRY violations: {len(dry_issues)}&lt;/li&gt;\n        &lt;li&gt;Loop optimizations: {len(loop_issues)}&lt;/li&gt;\n    &lt;/ul&gt;\n\n    &lt;h2&gt;Loop Optimizations &lt;span class=\"count\"&gt;({len(loop_issues)})&lt;/span&gt;&lt;/h2&gt;\n\"\"\"\n\n    for issue in loop_issues:\n        html += f\"\"\"\n    &lt;div class=\"issue\"&gt;\n        &lt;div class=\"location\"&gt;{issue.location}&lt;/div&gt;\n        &lt;p&gt;{issue.message}&lt;/p&gt;\n        &lt;div class=\"code\"&gt;\n            &lt;pre&gt;&lt;code&gt;# Before:\n{issue.original_code}\n\n# After:\n{issue.suggested_code}&lt;/code&gt;&lt;/pre&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\"\"\"\n\n    html += \"\"\"\n&lt;/body&gt;\n&lt;/html&gt;\n\"\"\"\n    return html\n\n\nrj = Rejig(\"src/\")\nhtml = generate_html_report(rj)\nwith open(\"report.html\", \"w\") as f:\n    f.write(html)\n</code></pre>"},{"location":"examples/optimization-recipes/#ci-integration","title":"CI Integration","text":""},{"location":"examples/optimization-recipes/#pre-commit-hook","title":"Pre-commit Hook","text":"<pre><code>#!/usr/bin/env python3\n\"\"\"Pre-commit hook for optimization checks.\"\"\"\n\nimport subprocess\nimport sys\nfrom pathlib import Path\n\nfrom rejig import Rejig, DRYAnalyzer, LoopOptimizer\n\ndef get_staged_files():\n    \"\"\"Get list of staged Python files.\"\"\"\n    result = subprocess.run(\n        [\"git\", \"diff\", \"--cached\", \"--name-only\", \"--diff-filter=ACM\"],\n        capture_output=True,\n        text=True\n    )\n    return [f for f in result.stdout.splitlines() if f.endswith(\".py\")]\n\n\ndef check_files(files: list[str]) -&gt; int:\n    \"\"\"Check staged files for optimization issues.\"\"\"\n    if not files:\n        return 0\n\n    rj = Rejig(\".\")\n    loops = LoopOptimizer(rj)\n\n    issues_found = 0\n\n    for file_path in files:\n        path = Path(file_path)\n        file_issues = loops.find_all_issues(min_confidence=0.9).in_file(path)\n\n        if file_issues:\n            print(f\"\\n{file_path}:\")\n            for issue in file_issues:\n                print(f\"  Line {issue.line_number}: {issue.message}\")\n                issues_found += 1\n\n    return issues_found\n\n\nif __name__ == \"__main__\":\n    files = get_staged_files()\n    issues = check_files(files)\n\n    if issues:\n        print(f\"\\nFound {issues} optimization issues. Consider fixing before commit.\")\n        sys.exit(1)\n\n    sys.exit(0)\n</code></pre>"},{"location":"examples/optimization-recipes/#github-action","title":"GitHub Action","text":"<pre><code># .github/workflows/optimize.yml\nname: Code Optimization Check\n\non:\n  pull_request:\n    paths:\n      - '**.py'\n\njobs:\n  optimize:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - uses: actions/setup-python@v5\n        with:\n          python-version: '3.11'\n\n      - name: Install dependencies\n        run: pip install rejig\n\n      - name: Run optimization check\n        run: |\n          python - &lt;&lt; 'EOF'\n          from rejig import Rejig, LoopOptimizer\n\n          rj = Rejig(\"src/\")\n          loops = LoopOptimizer(rj)\n\n          issues = loops.find_all_issues(min_confidence=0.9)\n\n          if issues:\n              print(\"::warning::Found optimization opportunities:\")\n              for issue in issues:\n                  print(f\"::warning file={issue.file_path},line={issue.line_number}::{issue.message}\")\n          EOF\n</code></pre>"},{"location":"examples/optimization-recipes/#interactive-analysis","title":"Interactive Analysis","text":""},{"location":"examples/optimization-recipes/#repl-exploration","title":"REPL Exploration","text":"<pre><code># Start Python REPL and explore interactively\nfrom rejig import Rejig, DRYAnalyzer, LoopOptimizer\n\nrj = Rejig(\"src/\")\ndry = DRYAnalyzer(rj)\nloops = LoopOptimizer(rj)\n\n# Explore DRY issues\ndry_issues = dry.find_all_issues()\nprint(dry_issues.summary())\n\n# Drill into specific types\nduplicates = dry_issues.dry_issues()\nfor d in duplicates[:5]:\n    print(f\"{d.location}: {d.message}\")\n\n# Explore loop issues\nloop_issues = loops.find_all_issues()\n\n# Filter to specific file\nfile_issues = loop_issues.in_file(\"src/utils.py\")\n\n# Get suggestions\nfor issue in file_issues:\n    print(f\"Line {issue.line_number}:\")\n    print(f\"  Current: {issue.original_code}\")\n    print(f\"  Better:  {issue.suggested_code}\")\n</code></pre>"},{"location":"examples/refactoring-patterns/","title":"Refactoring Patterns","text":"<p>Common refactoring scenarios with Rejig.</p>"},{"location":"examples/refactoring-patterns/#renaming","title":"Renaming","text":""},{"location":"examples/refactoring-patterns/#rename-a-class","title":"Rename a Class","text":"<pre><code>from rejig import Rejig\n\nrj = Rejig(\"src/\")\n\n# Find and rename\ncls = rj.find_classes(\"OldClassName\").first()\nif cls:\n    result = cls.rename(\"NewClassName\")\n    print(f\"Changed: {result.files_changed}\")\n</code></pre>"},{"location":"examples/refactoring-patterns/#rename-a-method-across-classes","title":"Rename a Method Across Classes","text":"<pre><code># Rename in a specific class\ncls = rj.file(\"models.py\").find_class(\"User\")\ncls.find_method(\"get_name\").rename(\"get_full_name\")\n\n# Rename in all classes that have it\nfor cls in rj.find_classes():\n    method = cls.find_method(\"old_method\")\n    if method.exists():\n        method.rename(\"new_method\")\n</code></pre>"},{"location":"examples/refactoring-patterns/#rename-with-pattern","title":"Rename with Pattern","text":"<pre><code># Rename all classes matching a pattern\nresults = rj.find_classes(pattern=\"^Old\").rename(r\"^Old\", \"New\")\n# OldUser \u2192 NewUser, OldOrder \u2192 NewOrder\n</code></pre>"},{"location":"examples/refactoring-patterns/#adding-code","title":"Adding Code","text":""},{"location":"examples/refactoring-patterns/#add-method-to-all-classes","title":"Add Method to All Classes","text":"<pre><code># Add a `validate` method to all model classes\nfor cls in rj.find_classes(pattern=\".*Model$\"):\n    if not cls.find_method(\"validate\").exists():\n        cls.add_method(\"validate\", body=\"return True\", return_type=\"bool\")\n</code></pre>"},{"location":"examples/refactoring-patterns/#add-decorator-to-test-classes","title":"Add Decorator to Test Classes","text":"<pre><code>rj.find_classes(pattern=\"^Test\").add_decorator(\"pytest.mark.integration\")\n</code></pre>"},{"location":"examples/refactoring-patterns/#add-type-hints","title":"Add Type Hints","text":"<pre><code># Add return type to all public functions\nfor func in rj.find_functions():\n    if not func.name.startswith(\"_\") and not func.has_type_hints():\n        func.set_return_type(\"None\")  # Or infer: func.infer_type_hints()\n</code></pre>"},{"location":"examples/refactoring-patterns/#add-docstrings","title":"Add Docstrings","text":"<pre><code># Generate docstrings for undocumented functions\n(\n    rj.find_functions()\n    .filter(lambda f: not f.has_docstring())\n    .generate_docstrings(style=\"google\")\n)\n</code></pre>"},{"location":"examples/refactoring-patterns/#removing-code","title":"Removing Code","text":""},{"location":"examples/refactoring-patterns/#remove-deprecated-decorator","title":"Remove Deprecated Decorator","text":"<pre><code>rj.find_classes().remove_decorator(\"deprecated\")\nrj.find_functions().remove_decorator(\"deprecated\")\n</code></pre>"},{"location":"examples/refactoring-patterns/#remove-unused-imports","title":"Remove Unused Imports","text":"<pre><code>for file in rj.find_files():\n    file.remove_unused_imports()\n</code></pre>"},{"location":"examples/refactoring-patterns/#delete-methods","title":"Delete Methods","text":"<pre><code># Delete all methods named `_old_helper`\nfor cls in rj.find_classes():\n    method = cls.find_method(\"_old_helper\")\n    if method.exists():\n        method.delete()\n</code></pre>"},{"location":"examples/refactoring-patterns/#moving-code","title":"Moving Code","text":""},{"location":"examples/refactoring-patterns/#extract-method-to-function","title":"Extract Method to Function","text":"<pre><code>cls = rj.file(\"views.py\").find_class(\"UserView\")\nmethod = cls.find_method(\"_format_response\")\nmethod.extract_to_function(\"format_response\")\n</code></pre>"},{"location":"examples/refactoring-patterns/#move-lines","title":"Move Lines","text":"<pre><code>file = rj.file(\"utils.py\")\n\n# Move a block of code to a different position\nfile.lines(50, 75).move_to(10)\n\n# Move to another file\nfile.lines(100, 150).move_to_file(\"helpers.py\", after_line=20)\n</code></pre>"},{"location":"examples/refactoring-patterns/#converting-code","title":"Converting Code","text":""},{"location":"examples/refactoring-patterns/#convert-classes-to-dataclasses","title":"Convert Classes to Dataclasses","text":"<pre><code># Find classes that look like data containers\nfor cls in rj.find_classes():\n    methods = cls.find_methods()\n    # If only __init__ and simple methods, convert\n    if len(methods) &lt;= 3:\n        cls.convert_to_dataclass()\n</code></pre>"},{"location":"examples/refactoring-patterns/#convert-sync-to-async","title":"Convert Sync to Async","text":"<pre><code># Convert all functions in an async module\nfor func in rj.file(\"async_utils.py\").find_functions():\n    func.convert_to_async()\n</code></pre>"},{"location":"examples/refactoring-patterns/#modernize-type-hints","title":"Modernize Type Hints","text":"<pre><code># Update to Python 3.10+ style\nfor file in rj.find_files():\n    file.modernize_type_hints()  # List[str] \u2192 list[str]\n</code></pre>"},{"location":"examples/refactoring-patterns/#bulk-updates","title":"Bulk Updates","text":""},{"location":"examples/refactoring-patterns/#add-logging-to-all-methods","title":"Add Logging to All Methods","text":"<pre><code>for cls in rj.find_classes(pattern=\".*Service$\"):\n    for method in cls.find_methods():\n        if not method.name.startswith(\"_\"):\n            method.insert_statement(\n                f\"logger.debug('Entering {method.name}')\",\n                position=\"start\"\n            )\n</code></pre>"},{"location":"examples/refactoring-patterns/#add-validation-to-setters","title":"Add Validation to Setters","text":"<pre><code>for cls in rj.find_classes(pattern=\".*Model$\"):\n    for method in cls.find_methods(pattern=\"^set_\"):\n        method.insert_statement(\"self._validate()\", position=\"start\")\n</code></pre>"},{"location":"examples/refactoring-patterns/#standardize-error-handling","title":"Standardize Error Handling","text":"<pre><code>for func in rj.find_functions(pattern=\"^fetch_\"):\n    func.wrap_with_try_except(\n        exceptions=[\"ConnectionError\", \"Timeout\"],\n        handler=\"logger.error(f'Fetch failed: {e}'); raise\"\n    )\n</code></pre>"},{"location":"examples/refactoring-patterns/#configuration-updates","title":"Configuration Updates","text":""},{"location":"examples/refactoring-patterns/#update-pyprojecttoml","title":"Update pyproject.toml","text":"<pre><code>toml = rj.toml(\"pyproject.toml\")\n\n# Update version\ntoml.set(\"project.version\", \"2.0.0\")\n\n# Configure tools\ntoml.set(\"tool.black.line-length\", 110)\ntoml.set(\"tool.ruff.select\", [\"E\", \"F\", \"W\", \"I\"])\n</code></pre>"},{"location":"examples/refactoring-patterns/#sync-versions-across-files","title":"Sync Versions Across Files","text":"<pre><code>version = \"2.0.0\"\n\nrj.toml(\"pyproject.toml\").set(\"project.version\", version)\nrj.json(\"package.json\").set(\"version\", version)\n\ninit = rj.file(\"src/mypackage/__init__.py\")\ninit.replace_pattern(r'__version__ = \"[^\"]+\"', f'__version__ = \"{version}\"')\n</code></pre>"},{"location":"examples/refactoring-patterns/#safety-patterns","title":"Safety Patterns","text":""},{"location":"examples/refactoring-patterns/#dry-run-first","title":"Dry Run First","text":"<pre><code># Preview changes\nrj_dry = Rejig(\"src/\", dry_run=True)\nresult = rj_dry.find_classes(\"User\").first().rename(\"UserModel\")\nprint(f\"Would: {result.message}\")\n\n# Then apply\nrj = Rejig(\"src/\")\nresult = rj.find_classes(\"User\").first().rename(\"UserModel\")\n</code></pre>"},{"location":"examples/refactoring-patterns/#validate-before-bulk-changes","title":"Validate Before Bulk Changes","text":"<pre><code>classes = rj.find_classes(pattern=\"^Test\")\n\n# Check what will be affected\nprint(f\"Will modify {len(classes)} classes:\")\nfor cls in classes:\n    print(f\"  - {cls.name} in {cls.file_path}\")\n\n# Confirm before proceeding\nif input(\"Continue? [y/N] \").lower() == \"y\":\n    classes.add_decorator(\"@slow\")\n</code></pre>"},{"location":"examples/refactoring-patterns/#handle-partial-failures","title":"Handle Partial Failures","text":"<pre><code>results = rj.find_classes().add_decorator(\"@dataclass\")\n\nif results.partial_success:\n    print(f\"Succeeded: {len(results.succeeded)}\")\n    print(f\"Failed: {len(results.failed)}\")\n\n    for r in results.failed:\n        print(f\"  - {r.message}\")\n</code></pre>"},{"location":"examples/security-recipes/","title":"Security Recipes","text":"<p>Ready-to-use scripts for security scanning and remediation.</p>"},{"location":"examples/security-recipes/#quick-security-scan","title":"Quick Security Scan","text":"<pre><code>#!/usr/bin/env python\n\"\"\"Quick security scan of codebase.\"\"\"\nfrom rejig import Rejig\n\ndef security_scan(path: str = \"src/\") -&gt; int:\n    rj = Rejig(path)\n    security = rj.find_security_issues()\n\n    print(\"SECURITY SCAN RESULTS\")\n    print(\"=\" * 60)\n    print()\n\n    if not security:\n        print(\"No security issues found!\")\n        return 0\n\n    print(security.summary())\n    print()\n\n    # Critical issues\n    critical = security.critical()\n    if critical:\n        print(\"CRITICAL ISSUES:\")\n        print(\"-\" * 40)\n        for issue in critical:\n            print(f\"  {issue.file_path}:{issue.line_number}\")\n            print(f\"    Type: {issue.type}\")\n            print(f\"    {issue.message}\")\n            if issue.code_snippet:\n                print(f\"    Code: {issue.code_snippet[:60]}...\")\n            print()\n\n    # High issues\n    high = security.high()\n    if high:\n        print(\"HIGH SEVERITY ISSUES:\")\n        print(\"-\" * 40)\n        for issue in high:\n            print(f\"  {issue.file_path}:{issue.line_number}\")\n            print(f\"    Type: {issue.type}\")\n            print(f\"    {issue.message}\")\n            print()\n\n    # Return exit code\n    if critical or high:\n        return 1\n    return 0\n\nif __name__ == \"__main__\":\n    import sys\n    path = sys.argv[1] if len(sys.argv) &gt; 1 else \"src/\"\n    sys.exit(security_scan(path))\n</code></pre>"},{"location":"examples/security-recipes/#secrets-scanner","title":"Secrets Scanner","text":"<pre><code>#!/usr/bin/env python\n\"\"\"Scan for hardcoded secrets.\"\"\"\nfrom rejig import Rejig, SecretsScanner\n\ndef scan_secrets(path: str = \"src/\") -&gt; None:\n    rj = Rejig(path)\n    scanner = SecretsScanner(rj)\n\n    # Add custom patterns for your organization\n    scanner.add_pattern(\n        name=\"internal_api_key\",\n        pattern=r\"INTERNAL_[A-Z_]+_KEY\\s*=\\s*['\\\"][^'\\\"]{20,}['\\\"]\",\n        severity=\"high\",\n    )\n\n    secrets = scanner.find_all()\n\n    print(\"SECRETS SCAN\")\n    print(\"=\" * 60)\n    print()\n\n    if not secrets:\n        print(\"No hardcoded secrets detected!\")\n        return\n\n    print(f\"Found {len(secrets)} potential secrets:\\n\")\n\n    # Group by type\n    by_type = {}\n    for secret in secrets:\n        if secret.type not in by_type:\n            by_type[secret.type] = []\n        by_type[secret.type].append(secret)\n\n    for secret_type, items in sorted(by_type.items()):\n        print(f\"{secret_type} ({len(items)}):\")\n        for item in items[:5]:\n            print(f\"  {item.file_path}:{item.line_number}\")\n            print(f\"    Confidence: {item.confidence}\")\n            # Don't print the actual secret value!\n            print(f\"    Pattern matched: {item.pattern_name}\")\n        if len(items) &gt; 5:\n            print(f\"  ... and {len(items) - 5} more\")\n        print()\n\n    print(\"\\nRecommendations:\")\n    print(\"  1. Move secrets to environment variables\")\n    print(\"  2. Use a secrets manager (AWS Secrets Manager, HashiCorp Vault)\")\n    print(\"  3. Add detected files to .gitignore if they contain real secrets\")\n\nif __name__ == \"__main__\":\n    import sys\n    path = sys.argv[1] if len(sys.argv) &gt; 1 else \"src/\"\n    scan_secrets(path)\n</code></pre>"},{"location":"examples/security-recipes/#sql-injection-finder","title":"SQL Injection Finder","text":"<pre><code>#!/usr/bin/env python\n\"\"\"Find potential SQL injection vulnerabilities.\"\"\"\nfrom rejig import Rejig, VulnerabilityScanner\n\ndef find_sql_injection(path: str = \"src/\") -&gt; None:\n    rj = Rejig(path)\n    scanner = VulnerabilityScanner(rj)\n\n    issues = scanner.find_sql_injection()\n\n    print(\"SQL INJECTION SCAN\")\n    print(\"=\" * 60)\n    print()\n\n    if not issues:\n        print(\"No SQL injection patterns detected!\")\n        return\n\n    print(f\"Found {len(issues)} potential SQL injection points:\\n\")\n\n    for issue in issues:\n        print(f\"{issue.file_path}:{issue.line_number}\")\n        print(f\"  Code: {issue.code_snippet}\")\n        print(f\"  Risk: {issue.severity}\")\n        print()\n\n    print(\"Remediation:\")\n    print(\"  - Use parameterized queries\")\n    print(\"  - Use ORM methods instead of raw SQL\")\n    print(\"  - Validate and sanitize all user input\")\n    print()\n    print(\"Example fix:\")\n    print(\"  UNSAFE: cursor.execute(f\\\"SELECT * FROM users WHERE id = {user_id}\\\")\")\n    print(\"  SAFE:   cursor.execute(\\\"SELECT * FROM users WHERE id = %s\\\", (user_id,))\")\n\nif __name__ == \"__main__\":\n    import sys\n    path = sys.argv[1] if len(sys.argv) &gt; 1 else \"src/\"\n    find_sql_injection(path)\n</code></pre>"},{"location":"examples/security-recipes/#command-injection-finder","title":"Command Injection Finder","text":"<pre><code>#!/usr/bin/env python\n\"\"\"Find potential command injection vulnerabilities.\"\"\"\nfrom rejig import Rejig, VulnerabilityScanner\n\ndef find_command_injection(path: str = \"src/\") -&gt; None:\n    rj = Rejig(path)\n    scanner = VulnerabilityScanner(rj)\n\n    issues = scanner.find_command_injection()\n\n    print(\"COMMAND INJECTION SCAN\")\n    print(\"=\" * 60)\n    print()\n\n    if not issues:\n        print(\"No command injection patterns detected!\")\n        return\n\n    print(f\"Found {len(issues)} potential command injection points:\\n\")\n\n    for issue in issues:\n        print(f\"{issue.file_path}:{issue.line_number}\")\n        print(f\"  Code: {issue.code_snippet}\")\n        print(f\"  Risk: {issue.severity}\")\n        print()\n\n    print(\"Remediation:\")\n    print(\"  - Use subprocess with shell=False\")\n    print(\"  - Pass arguments as a list, not a string\")\n    print(\"  - Avoid os.system(), use subprocess instead\")\n    print()\n    print(\"Example fix:\")\n    print(\"  UNSAFE: os.system(f'ls {user_dir}')\")\n    print(\"  SAFE:   subprocess.run(['ls', user_dir], shell=False)\")\n\nif __name__ == \"__main__\":\n    import sys\n    path = sys.argv[1] if len(sys.argv) &gt; 1 else \"src/\"\n    find_command_injection(path)\n</code></pre>"},{"location":"examples/security-recipes/#unsafe-deserialization-finder","title":"Unsafe Deserialization Finder","text":"<pre><code>#!/usr/bin/env python\n\"\"\"Find unsafe pickle/yaml usage.\"\"\"\nfrom rejig import Rejig, VulnerabilityScanner\n\ndef find_unsafe_deserialize(path: str = \"src/\") -&gt; None:\n    rj = Rejig(path)\n    scanner = VulnerabilityScanner(rj)\n\n    yaml_issues = scanner.find_unsafe_yaml()\n    pickle_issues = scanner.find_unsafe_pickle()\n\n    print(\"UNSAFE DESERIALIZATION SCAN\")\n    print(\"=\" * 60)\n    print()\n\n    if not yaml_issues and not pickle_issues:\n        print(\"No unsafe deserialization patterns detected!\")\n        return\n\n    if yaml_issues:\n        print(f\"Unsafe YAML usage ({len(yaml_issues)}):\")\n        print(\"-\" * 40)\n        for issue in yaml_issues:\n            print(f\"  {issue.file_path}:{issue.line_number}\")\n            print(f\"    {issue.code_snippet}\")\n        print()\n        print(\"  Fix: Use yaml.safe_load() instead of yaml.load()\")\n        print()\n\n    if pickle_issues:\n        print(f\"Unsafe Pickle usage ({len(pickle_issues)}):\")\n        print(\"-\" * 40)\n        for issue in pickle_issues:\n            print(f\"  {issue.file_path}:{issue.line_number}\")\n            print(f\"    {issue.code_snippet}\")\n        print()\n        print(\"  Fix: Use JSON or other safe serialization formats\")\n        print(\"       Never unpickle data from untrusted sources\")\n\nif __name__ == \"__main__\":\n    import sys\n    path = sys.argv[1] if len(sys.argv) &gt; 1 else \"src/\"\n    find_unsafe_deserialize(path)\n</code></pre>"},{"location":"examples/security-recipes/#security-report-generator","title":"Security Report Generator","text":"<pre><code>#!/usr/bin/env python\n\"\"\"Generate comprehensive security report.\"\"\"\nimport json\nfrom pathlib import Path\nfrom rejig import Rejig, SecurityReporter\n\ndef generate_security_report(\n    path: str = \"src/\",\n    output_format: str = \"html\",\n    output_file: str = \"security-report\",\n) -&gt; None:\n    rj = Rejig(path)\n    security = rj.find_security_issues()\n    reporter = SecurityReporter(security)\n\n    print(\"Generating security report...\")\n\n    if output_format == \"html\":\n        report = reporter.to_html(include_code=True, syntax_highlight=True)\n        filename = f\"{output_file}.html\"\n    elif output_format == \"json\":\n        report = reporter.to_json()\n        filename = f\"{output_file}.json\"\n    elif output_format == \"markdown\":\n        report = reporter.to_markdown()\n        filename = f\"{output_file}.md\"\n    elif output_format == \"sarif\":\n        report = reporter.to_sarif()\n        filename = f\"{output_file}.sarif\"\n    else:\n        report = reporter.to_text()\n        filename = f\"{output_file}.txt\"\n\n    Path(filename).write_text(report)\n    print(f\"Report saved to: {filename}\")\n\n    # Print summary\n    print()\n    print(\"SUMMARY\")\n    print(\"=\" * 40)\n    print(security.summary())\n\nif __name__ == \"__main__\":\n    import sys\n    path = sys.argv[1] if len(sys.argv) &gt; 1 else \"src/\"\n    fmt = sys.argv[2] if len(sys.argv) &gt; 2 else \"html\"\n    generate_security_report(path, fmt)\n</code></pre>"},{"location":"examples/security-recipes/#pre-commit-security-hook","title":"Pre-commit Security Hook","text":"<pre><code>#!/usr/bin/env python\n\"\"\"Pre-commit hook for security checks.\"\"\"\nimport subprocess\nimport sys\nfrom rejig import Rejig\n\ndef get_staged_files() -&gt; list[str]:\n    \"\"\"Get list of staged Python files.\"\"\"\n    result = subprocess.run(\n        [\"git\", \"diff\", \"--cached\", \"--name-only\", \"--diff-filter=ACM\"],\n        capture_output=True,\n        text=True,\n    )\n    files = result.stdout.strip().split(\"\\n\")\n    return [f for f in files if f.endswith(\".py\")]\n\ndef check_staged_files() -&gt; int:\n    \"\"\"Check staged files for security issues.\"\"\"\n    staged = get_staged_files()\n\n    if not staged:\n        return 0\n\n    print(f\"Checking {len(staged)} staged files for security issues...\")\n\n    # Check each file\n    issues_found = []\n\n    for file_path in staged:\n        rj = Rejig(file_path)\n        security = rj.find_security_issues()\n\n        critical_high = security.critical() + security.high()\n        if critical_high:\n            issues_found.extend(critical_high)\n\n    if issues_found:\n        print()\n        print(\"SECURITY ISSUES FOUND - COMMIT BLOCKED\")\n        print(\"=\" * 50)\n        for issue in issues_found:\n            print(f\"  [{issue.severity}] {issue.file_path}:{issue.line_number}\")\n            print(f\"    {issue.type}: {issue.message}\")\n        print()\n        print(\"Fix these issues before committing.\")\n        print(\"To bypass (not recommended): git commit --no-verify\")\n        return 1\n\n    print(\"No security issues found.\")\n    return 0\n\nif __name__ == \"__main__\":\n    sys.exit(check_staged_files())\n</code></pre>"},{"location":"examples/security-recipes/#auto-fix-common-issues","title":"Auto-fix Common Issues","text":"<pre><code>#!/usr/bin/env python\n\"\"\"Auto-fix common security issues where safe to do so.\"\"\"\nfrom rejig import Rejig\n\ndef auto_fix_security(path: str = \"src/\", dry_run: bool = True) -&gt; None:\n    rj = Rejig(path, dry_run=dry_run)\n    security = rj.find_security_issues()\n\n    print(\"AUTO-FIX SECURITY ISSUES\")\n    print(\"=\" * 60)\n    print(f\"Mode: {'DRY RUN' if dry_run else 'LIVE'}\")\n    print()\n\n    fixed = 0\n    skipped = 0\n\n    for issue in security:\n        if issue.type == \"UNSAFE_YAML_LOAD\":\n            # Safe to auto-fix: yaml.load -&gt; yaml.safe_load\n            file_target = issue.to_file_target()\n            result = file_target.replace(\n                \"yaml.load(\",\n                \"yaml.safe_load(\",\n            )\n            if result.success:\n                print(f\"FIXED: {issue.file_path}:{issue.line_number}\")\n                print(f\"  yaml.load -&gt; yaml.safe_load\")\n                fixed += 1\n            continue\n\n        if issue.type == \"INSECURE_RANDOM\":\n            # Safe to auto-fix: random -&gt; secrets for specific patterns\n            # This is more complex, skip for now\n            pass\n\n        if issue.type == \"DEBUG_CODE\":\n            # Can remove debug statements\n            line = issue.to_line_target()\n            result = line.delete()\n            if result.success:\n                print(f\"FIXED: {issue.file_path}:{issue.line_number}\")\n                print(f\"  Removed debug statement\")\n                fixed += 1\n            continue\n\n        # Most issues need manual review\n        skipped += 1\n\n    print()\n    print(\"SUMMARY\")\n    print(\"-\" * 40)\n    print(f\"Fixed: {fixed}\")\n    print(f\"Skipped (manual review needed): {skipped}\")\n\n    if dry_run and fixed &gt; 0:\n        print()\n        print(\"Run with --apply to apply fixes:\")\n        print(f\"  python {__file__} {path} --apply\")\n\nif __name__ == \"__main__\":\n    import sys\n    path = sys.argv[1] if len(sys.argv) &gt; 1 else \"src/\"\n    dry_run = \"--apply\" not in sys.argv\n    auto_fix_security(path, dry_run)\n</code></pre>"},{"location":"examples/security-recipes/#github-actions-security-workflow","title":"GitHub Actions Security Workflow","text":"<pre><code># .github/workflows/security.yml\nname: Security Scan\n\non:\n  push:\n    branches: [main, develop]\n  pull_request:\n    branches: [main]\n\njobs:\n  security:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n\n      - uses: actions/setup-python@v4\n        with:\n          python-version: '3.11'\n\n      - name: Install dependencies\n        run: pip install rejig\n\n      - name: Run security scan\n        id: security\n        run: |\n          python -c \"\n          from rejig import Rejig, SecurityReporter\n          rj = Rejig('src/')\n          security = rj.find_security_issues()\n\n          # Generate SARIF for GitHub\n          reporter = SecurityReporter(security)\n          with open('security.sarif', 'w') as f:\n              f.write(reporter.to_sarif())\n\n          # Check for critical/high issues\n          critical_high = len(security.critical()) + len(security.high())\n          print(f'::set-output name=critical_high::{critical_high}')\n\n          if critical_high:\n              print('::error::Found critical/high security issues')\n              exit(1)\n          \"\n\n      - name: Upload SARIF\n        uses: github/codeql-action/upload-sarif@v2\n        if: always()\n        with:\n          sarif_file: security.sarif\n\n      - name: Comment on PR\n        if: failure() &amp;&amp; github.event_name == 'pull_request'\n        uses: actions/github-script@v6\n        with:\n          script: |\n            github.rest.issues.createComment({\n              issue_number: context.issue.number,\n              owner: context.repo.owner,\n              repo: context.repo.repo,\n              body: '## Security Issues Found\\n\\nThis PR introduces security issues that must be resolved before merging.\\n\\nSee the Security tab for details.'\n            })\n</code></pre>"},{"location":"getting-started/concepts/","title":"Core Concepts","text":"<p>Understanding these concepts will help you use Rejig effectively.</p>"},{"location":"getting-started/concepts/#targets","title":"Targets","text":"<p>A target is an object representing something in your codebase that you can inspect or modify. Everything in Rejig is a target.</p>"},{"location":"getting-started/concepts/#python-targets","title":"Python Targets","text":"Target Represents Example <code>FileTarget</code> A Python file <code>rj.file(\"app.py\")</code> <code>ModuleTarget</code> A module by dotted path <code>rj.module(\"myapp.models\")</code> <code>PackageTarget</code> A package directory <code>rj.package(\"myapp/\")</code> <code>ClassTarget</code> A class definition <code>file.find_class(\"User\")</code> <code>FunctionTarget</code> A module-level function <code>file.find_function(\"main\")</code> <code>MethodTarget</code> A method in a class <code>cls.find_method(\"save\")</code> <code>LineTarget</code> A single line <code>file.line(42)</code> <code>LineBlockTarget</code> A range of lines <code>file.lines(10, 20)</code> <code>CodeBlockTarget</code> A code structure <code>file.block_at_line(15)</code>"},{"location":"getting-started/concepts/#config-targets","title":"Config Targets","text":"Target Represents Example <code>TomlTarget</code> A TOML file <code>rj.toml(\"pyproject.toml\")</code> <code>YamlTarget</code> A YAML file <code>rj.yaml(\"config.yml\")</code> <code>JsonTarget</code> A JSON file <code>rj.json(\"package.json\")</code> <code>TextFileTarget</code> Any text file <code>rj.text_file(\"README.md\")</code>"},{"location":"getting-started/concepts/#navigation","title":"Navigation","text":"<p>Targets can navigate to other targets:</p> <pre><code># Start with a file, drill down to a method\nrj.file(\"models.py\")           # FileTarget\n  .find_class(\"User\")          # ClassTarget\n  .find_method(\"save\")         # MethodTarget\n</code></pre>"},{"location":"getting-started/concepts/#target-existence","title":"Target Existence","text":"<p>Targets are created immediately, but the underlying code may not exist:</p> <pre><code>cls = rj.file(\"models.py\").find_class(\"NonExistent\")\n\n# The target exists, but the class doesn't\nprint(cls.exists())  # False\n\n# Operations on non-existent targets return ErrorResult\nresult = cls.rename(\"NewName\")\nprint(result.success)  # False\nprint(result.message)  # \"Class 'NonExistent' not found\"\n</code></pre>"},{"location":"getting-started/concepts/#results","title":"Results","text":"<p>Operations return Result objects instead of raising exceptions.</p>"},{"location":"getting-started/concepts/#result","title":"Result","text":"<pre><code>result = cls.rename(\"NewName\")\n\nresult.success        # bool - did it work?\nresult.message        # str - human-readable description\nresult.files_changed  # list[Path] - files that were modified\nresult.data           # Any - optional payload for queries\n</code></pre> <p>Results are truthy when successful:</p> <pre><code>if result:\n    print(\"Success!\")\n</code></pre>"},{"location":"getting-started/concepts/#errorresult","title":"ErrorResult","text":"<p>When an operation fails, you get an <code>ErrorResult</code>:</p> <pre><code>result = cls.rename(\"NewName\")\n\nif result.is_error():\n    print(result.message)      # What went wrong\n    print(result.operation)    # Which operation failed\n    print(result.target_repr)  # Which target\n\n    # Optionally re-raise as an exception\n    result.raise_if_error()\n</code></pre>"},{"location":"getting-started/concepts/#batchresult","title":"BatchResult","text":"<p>When operating on multiple targets, you get a <code>BatchResult</code>:</p> <pre><code>results = rj.find_classes(\"^Test\").add_decorator(\"@slow\")\n\nresults.success         # True if ALL succeeded\nresults.partial_success # True if ANY succeeded\nresults.all_failed      # True if ALL failed\nresults.succeeded       # list[Result] - successful operations\nresults.failed          # list[Result] - failed operations\nresults.files_changed   # list[Path] - all files modified\n</code></pre>"},{"location":"getting-started/concepts/#targetlist","title":"TargetList","text":"<p>When you find multiple items, you get a <code>TargetList</code>:</p> <pre><code>classes = rj.find_classes(pattern=\"^Test\")  # TargetList[ClassTarget]\n</code></pre>"},{"location":"getting-started/concepts/#iteration","title":"Iteration","text":"<pre><code>for cls in classes:\n    print(cls.name)\n</code></pre>"},{"location":"getting-started/concepts/#filtering","title":"Filtering","text":"<pre><code># By predicate\nclasses.filter(lambda c: c.has_docstring())\n\n# By file\nclasses.in_file(Path(\"tests/test_user.py\"))\n\n# By name pattern\nclasses.matching(\"User\")\n</code></pre>"},{"location":"getting-started/concepts/#accessing-items","title":"Accessing Items","text":"<pre><code>classes.first()   # First target or None\nclasses.last()    # Last target or None\nclasses[0]        # First target (raises if empty)\nlen(classes)      # Number of targets\n</code></pre>"},{"location":"getting-started/concepts/#batch-operations","title":"Batch Operations","text":"<p>Operations on <code>TargetList</code> apply to all targets:</p> <pre><code># Returns BatchResult\nresults = classes.add_decorator(\"@pytest.mark.slow\")\nresults = classes.delete()\nresults = classes.rename(r\"^Test\", \"Integration\")\n</code></pre>"},{"location":"getting-started/concepts/#errortarget","title":"ErrorTarget","text":"<p>When navigation fails, you get an <code>ErrorTarget</code> instead of raising an exception:</p> <pre><code># This doesn't raise, even if the class doesn't exist\nmethod = rj.file(\"x.py\").find_class(\"Missing\").find_method(\"foo\")\n\n# ErrorTarget allows chaining\nprint(type(method))  # ErrorTarget\n\n# But operations return ErrorResult\nresult = method.rename(\"bar\")\nprint(result.success)  # False\n</code></pre> <p>This design lets you write chains without defensive checks:</p> <pre><code># Safe - won't raise even if User or save don't exist\nresult = (\n    rj.file(\"models.py\")\n    .find_class(\"User\")\n    .find_method(\"save\")\n    .insert_statement(\"self.validate()\")\n)\n\n# Just check the result\nif not result:\n    print(f\"Couldn't modify: {result.message}\")\n</code></pre>"},{"location":"getting-started/concepts/#path-resolution","title":"Path Resolution","text":"<p>The path passed to <code>Rejig()</code> is the root for all relative operations:</p> <pre><code>rj = Rejig(\"/home/user/project/src\")\n\nrj.file(\"utils.py\")           # /home/user/project/src/utils.py\nrj.file(\"sub/module.py\")      # /home/user/project/src/sub/module.py\nrj.file(\"/etc/config\")        # /etc/config (absolute, unchanged)\nrj.module(\"myapp.models\")     # Searches under root for myapp/models.py\n</code></pre>"},{"location":"getting-started/concepts/#dry-run-mode","title":"Dry Run Mode","text":"<p>Enable dry-run mode to preview changes:</p> <pre><code>rj = Rejig(\"src/\", dry_run=True)\n\n# Operations describe what would happen\nresult = rj.find_classes(\"User\").first().rename(\"UserModel\")\nprint(result.message)  # \"Would rename User to UserModel in models.py\"\n\n# No files are modified\nprint(result.files_changed)  # []\n</code></pre>"},{"location":"getting-started/concepts/#next-steps","title":"Next Steps","text":"<ul> <li>Finding Code \u2014 All the ways to locate code</li> <li>Modifying Code \u2014 Available transformations</li> <li>Error Handling \u2014 Working with results</li> </ul>"},{"location":"getting-started/installation/","title":"Installation","text":""},{"location":"getting-started/installation/#requirements","title":"Requirements","text":"<ul> <li>Python 3.10 or higher</li> <li>LibCST (installed automatically)</li> </ul>"},{"location":"getting-started/installation/#install-from-pypi","title":"Install from PyPI","text":"<pre><code>pip install rejig\n</code></pre>"},{"location":"getting-started/installation/#install-with-optional-dependencies","title":"Install with Optional Dependencies","text":"<pre><code># Include Rope for semantic refactoring (move with import updates)\npip install rejig[rope]\n\n# Include all optional dependencies\npip install rejig[all]\n</code></pre>"},{"location":"getting-started/installation/#install-from-source","title":"Install from Source","text":"<pre><code>git clone https://github.com/your-org/rejig.git\ncd rejig\npip install -e \".[dev]\"\n</code></pre>"},{"location":"getting-started/installation/#verify-installation","title":"Verify Installation","text":"<pre><code>from rejig import Rejig\n\nrj = Rejig(\".\")\nprint(f\"Found {len(rj.find_files())} Python files\")\n</code></pre>"},{"location":"getting-started/installation/#editor-integration","title":"Editor Integration","text":"<p>Rejig is a library, not a CLI tool. You'll typically use it in:</p> <ul> <li>Python scripts \u2014 Write refactoring scripts for your project</li> <li>Jupyter notebooks \u2014 Explore and test transformations interactively</li> <li>CI/CD pipelines \u2014 Automate code migrations</li> <li>Custom CLI tools \u2014 Build project-specific refactoring commands</li> </ul>"},{"location":"getting-started/quickstart/","title":"Quickstart","text":"<p>This guide walks you through the basics of using Rejig to find and modify Python code.</p>"},{"location":"getting-started/quickstart/#create-a-rejig-instance","title":"Create a Rejig Instance","text":"<p>Every operation starts with a <code>Rejig</code> instance pointed at your codebase:</p> <pre><code>from rejig import Rejig\n\n# Point at your source directory\nrj = Rejig(\"src/\")\n\n# Or use the current directory\nrj = Rejig(\".\")\n\n# Enable dry-run mode to preview changes without modifying files\nrj = Rejig(\"src/\", dry_run=True)\n</code></pre> <p>The path you provide becomes the root for all relative path operations.</p>"},{"location":"getting-started/quickstart/#find-code-elements","title":"Find Code Elements","text":"<p>Use factory methods to get targets \u2014 objects representing code elements:</p> <pre><code># Get a specific file\nfile = rj.file(\"mymodule.py\")\n\n# Get a module by dotted path\nmodule = rj.module(\"myapp.models\")\n\n# Find a class (searches all files)\ncls = rj.find_classes(\"UserModel\").first()\n\n# Find all functions matching a pattern\nfuncs = rj.find_functions(pattern=\"^process_\")\n</code></pre>"},{"location":"getting-started/quickstart/#navigate-through-code","title":"Navigate Through Code","text":"<p>Targets can navigate to nested elements:</p> <pre><code># File \u2192 Class \u2192 Method\nmethod = rj.file(\"models.py\").find_class(\"User\").find_method(\"save\")\n\n# Module \u2192 Function\nfunc = rj.module(\"myapp.utils\").find_function(\"calculate\")\n\n# Class \u2192 All methods\nmethods = rj.find_classes(\"Handler\").first().find_methods()\n</code></pre>"},{"location":"getting-started/quickstart/#modify-code","title":"Modify Code","text":"<p>Call methods on targets to make changes:</p> <pre><code># Rename a class\nrj.find_classes(\"OldName\").first().rename(\"NewName\")\n\n# Add a decorator\ncls = rj.file(\"views.py\").find_class(\"MyView\")\ncls.add_decorator(\"login_required\")\n\n# Add a method to a class\ncls.add_method(\"validate\", body=\"return self.is_valid()\")\n\n# Insert a statement at the start of a method\nmethod = cls.find_method(\"save\")\nmethod.insert_statement(\"self.updated_at = now()\")\n\n# Add a class attribute\ncls.add_attribute(\"created_at\", type_hint=\"datetime\", default=\"None\")\n</code></pre>"},{"location":"getting-started/quickstart/#check-results","title":"Check Results","text":"<p>All operations return a <code>Result</code> object:</p> <pre><code>result = cls.rename(\"NewName\")\n\nif result.success:\n    print(f\"Changed files: {result.files_changed}\")\nelse:\n    print(f\"Failed: {result.message}\")\n\n# Results are truthy when successful\nif result:\n    print(\"It worked!\")\n</code></pre>"},{"location":"getting-started/quickstart/#batch-operations","title":"Batch Operations","text":"<p>Find methods return a <code>TargetList</code> for batch operations:</p> <pre><code># Find all test classes\ntest_classes = rj.find_classes(pattern=\"^Test\")\n\n# Add a decorator to all of them\nresults = test_classes.add_decorator(\"pytest.mark.integration\")\n\n# Check the batch result\nprint(f\"Modified {len(results.succeeded)} classes\")\nprint(f\"Failed: {len(results.failed)}\")\n</code></pre>"},{"location":"getting-started/quickstart/#work-with-lines","title":"Work with Lines","text":"<p>Access specific lines for directive management:</p> <pre><code>file = rj.file(\"mymodule.py\")\n\n# Add a type: ignore comment\nfile.line(42).add_type_ignore(\"arg-type\")\n\n# Work with a range of lines\nfile.lines(10, 20).indent()\n\n# Find the code block containing a line\nblock = file.block_at_line(15)\nprint(f\"Line 15 is inside a {block.kind}: {block.name}\")\n</code></pre>"},{"location":"getting-started/quickstart/#dry-run-mode","title":"Dry Run Mode","text":"<p>Preview changes without modifying files:</p> <pre><code>rj = Rejig(\"src/\", dry_run=True)\n\n# Operations return what would happen\nresult = rj.find_classes(\"User\").first().rename(\"UserModel\")\n\n# In dry-run mode, success=True but no files are modified\nprint(result.message)  # \"Would rename User to UserModel\"\n</code></pre>"},{"location":"getting-started/quickstart/#next-steps","title":"Next Steps","text":"<ul> <li>Core Concepts \u2014 Understand targets, results, and error handling</li> <li>Finding Code \u2014 Learn all the ways to locate code</li> <li>Modifying Code \u2014 Deep dive into transformations</li> </ul>"},{"location":"guides/batch-operations/","title":"Batch Operations","text":"<p>Apply changes to multiple targets at once.</p>"},{"location":"guides/batch-operations/#targetlist","title":"TargetList","text":"<p>When you find multiple items, you get a <code>TargetList</code>:</p> <pre><code>classes = rj.find_classes(pattern=\"^Test\")  # TargetList[ClassTarget]\nfuncs = rj.find_functions()                  # TargetList[FunctionTarget]\n</code></pre>"},{"location":"guides/batch-operations/#iteration","title":"Iteration","text":"<pre><code>for cls in classes:\n    print(f\"{cls.name} in {cls.file_path}\")\n</code></pre>"},{"location":"guides/batch-operations/#accessing-items","title":"Accessing Items","text":"<pre><code>classes.first()    # First target or None\nclasses.last()     # Last target or None\nclasses[0]         # First target (raises IndexError if empty)\nclasses[2:5]       # Slice (returns list)\nlen(classes)       # Number of targets\nbool(classes)      # True if not empty\nclasses.to_list()  # Convert to plain list\n</code></pre>"},{"location":"guides/batch-operations/#filtering","title":"Filtering","text":""},{"location":"guides/batch-operations/#by-predicate","title":"By Predicate","text":"<pre><code># Keep only classes with docstrings\nclasses.filter(lambda c: c.has_docstring())\n\n# Keep only functions with type hints\nfuncs.filter(lambda f: f.has_type_hints())\n\n# Keep only targets that exist\ntargets.filter(lambda t: t.exists())\n</code></pre>"},{"location":"guides/batch-operations/#by-file","title":"By File","text":"<pre><code>classes.in_file(Path(\"models.py\"))\nclasses.in_file(\"models.py\")  # String also works\n</code></pre>"},{"location":"guides/batch-operations/#by-name-pattern","title":"By Name Pattern","text":"<pre><code>classes.matching(\"User\")       # Name contains \"User\"\nclasses.matching(\"^Base\")      # Name starts with \"Base\"\nclasses.matching(\"Handler$\")   # Name ends with \"Handler\"\n</code></pre>"},{"location":"guides/batch-operations/#chaining-filters","title":"Chaining Filters","text":"<pre><code>targets = (\n    rj.find_classes()\n    .filter(lambda c: not c.has_docstring())\n    .in_file(\"models.py\")\n    .matching(\"^User\")\n)\n</code></pre>"},{"location":"guides/batch-operations/#batch-operations_1","title":"Batch Operations","text":"<p>Operations on <code>TargetList</code> apply to all targets and return a <code>BatchResult</code>:</p>"},{"location":"guides/batch-operations/#decorators","title":"Decorators","text":"<pre><code>results = classes.add_decorator(\"dataclass\")\nresults = classes.remove_decorator(\"deprecated\")\n</code></pre>"},{"location":"guides/batch-operations/#renaming","title":"Renaming","text":"<pre><code># Rename using regex substitution\nresults = classes.rename(r\"^Old\", \"New\")  # OldUser \u2192 NewUser\nresults = funcs.rename(r\"_v1$\", \"_v2\")    # process_v1 \u2192 process_v2\n</code></pre>"},{"location":"guides/batch-operations/#deleting","title":"Deleting","text":"<pre><code>results = classes.delete()\nresults = funcs.delete()\n</code></pre>"},{"location":"guides/batch-operations/#inserting-statements","title":"Inserting Statements","text":"<pre><code>methods = cls.find_methods()\nresults = methods.insert_statement(\"self.log_call()\", position=\"start\")\n</code></pre>"},{"location":"guides/batch-operations/#aliases","title":"Aliases","text":"<p>Some batch methods have <code>_all</code> aliases for clarity:</p> <pre><code>classes.delete_all()           # Same as delete()\nclasses.add_decorator_all()    # Same as add_decorator()\nclasses.rename_all()           # Same as rename()\n</code></pre>"},{"location":"guides/batch-operations/#batchresult","title":"BatchResult","text":"<p>Batch operations return a <code>BatchResult</code>:</p> <pre><code>results = classes.add_decorator(\"@slow\")\n\n# Check overall status\nresults.success          # True if ALL operations succeeded\nresults.partial_success  # True if ANY operation succeeded\nresults.all_failed       # True if ALL operations failed\n\n# Access individual results\nresults.succeeded        # list[Result] - successful operations\nresults.failed           # list[Result] - failed operations\n\n# Aggregate information\nresults.files_changed    # list[Path] - all files modified\nlen(results)             # Total number of operations\n\n# Iterate\nfor result in results:\n    print(result.message)\n</code></pre>"},{"location":"guides/batch-operations/#handling-partial-failures","title":"Handling Partial Failures","text":"<pre><code>results = classes.add_decorator(\"@pytest.mark.slow\")\n\nif results.success:\n    print(f\"Added decorator to all {len(results)} classes\")\nelif results.partial_success:\n    print(f\"Succeeded: {len(results.succeeded)}, Failed: {len(results.failed)}\")\n    for r in results.failed:\n        print(f\"  Failed: {r.message}\")\nelse:\n    print(\"All operations failed\")\n</code></pre>"},{"location":"guides/batch-operations/#common-patterns","title":"Common Patterns","text":""},{"location":"guides/batch-operations/#add-decorator-to-all-test-classes","title":"Add Decorator to All Test Classes","text":"<pre><code>results = rj.find_classes(pattern=\"^Test\").add_decorator(\"pytest.mark.integration\")\n</code></pre>"},{"location":"guides/batch-operations/#generate-docstrings-for-functions-without-them","title":"Generate Docstrings for Functions Without Them","text":"<pre><code>results = (\n    rj.find_functions()\n    .filter(lambda f: not f.has_docstring())\n    .generate_docstrings(style=\"google\")\n)\n</code></pre>"},{"location":"guides/batch-operations/#add-type-hints-to-all-public-functions","title":"Add Type Hints to All Public Functions","text":"<pre><code>results = (\n    rj.find_functions()\n    .filter(lambda f: not f.name.startswith(\"_\"))\n    .filter(lambda f: not f.has_type_hints())\n    .infer_type_hints()\n)\n</code></pre>"},{"location":"guides/batch-operations/#rename-methods-across-multiple-classes","title":"Rename Methods Across Multiple Classes","text":"<pre><code>for cls in rj.find_classes(pattern=\".*Repository\"):\n    cls.find_method(\"get_all\").rename(\"list_all\")\n</code></pre>"},{"location":"guides/batch-operations/#delete-all-deprecated-methods","title":"Delete All Deprecated Methods","text":"<pre><code>results = (\n    rj.find_classes()\n    .find_methods(pattern=\".*\")\n    .filter(lambda m: \"@deprecated\" in str(m.get_content().data or \"\"))\n    .delete()\n)\n</code></pre>"},{"location":"guides/batch-operations/#bulk-add-type-ignore","title":"Bulk Add Type Ignore","text":"<pre><code># Find all lines with mypy errors and add ignores\nfor file in rj.find_files():\n    for line_num in get_mypy_error_lines(file.path):  # Your function\n        file.line(line_num).add_type_ignore()\n</code></pre>"},{"location":"guides/batch-operations/#performance-considerations","title":"Performance Considerations","text":"<p>Batch operations are generally more efficient than looping:</p> <pre><code># Preferred - single batch operation\nrj.find_classes(\"^Test\").add_decorator(\"@slow\")\n\n# Less efficient - individual operations\nfor cls in rj.find_classes(\"^Test\"):\n    cls.add_decorator(\"@slow\")\n</code></pre> <p>The batch approach: - Parses each file once - Applies all changes in a single pass - Writes each file once</p>"},{"location":"guides/batch-operations/#next-steps","title":"Next Steps","text":"<ul> <li>Config Files \u2014 Work with TOML, YAML, and JSON</li> <li>Error Handling \u2014 Handle failures gracefully</li> </ul>"},{"location":"guides/code-analysis/","title":"Code Analysis","text":"<p>Rejig provides comprehensive code analysis tools to detect complexity issues, dead code, missing documentation, and code patterns that may indicate problems.</p>"},{"location":"guides/code-analysis/#quick-start","title":"Quick Start","text":"<pre><code>from rejig import Rejig\n\nrj = Rejig(\"src/\")\n\n# Get all analysis issues\nissues = rj.find_analysis_issues()\n\n# Print summary\nprint(issues.summary())\n# Output: Total: 42 issues (3 high, 15 medium, 24 low)\n\n# List all issues\nfor issue in issues:\n    print(f\"{issue.severity}: {issue.file_path}:{issue.line_number}\")\n    print(f\"  {issue.type}: {issue.message}\")\n</code></pre>"},{"location":"guides/code-analysis/#analysis-types","title":"Analysis Types","text":"<p>Rejig detects the following types of issues:</p>"},{"location":"guides/code-analysis/#complexity-issues","title":"Complexity Issues","text":"Type Description <code>HIGH_CYCLOMATIC_COMPLEXITY</code> Function has too many branches <code>DEEP_NESTING</code> Code nested too deeply <code>LONG_FUNCTION</code> Function has too many lines <code>LONG_CLASS</code> Class has too many lines/methods <code>TOO_MANY_PARAMETERS</code> Function has too many parameters <code>TOO_MANY_BRANCHES</code> Too many if/elif branches <code>TOO_MANY_RETURNS</code> Function has too many return statements"},{"location":"guides/code-analysis/#documentation-issues","title":"Documentation Issues","text":"Type Description <code>MISSING_TYPE_HINT</code> Function lacks type annotations <code>MISSING_DOCSTRING</code> Public function/class lacks docstring"},{"location":"guides/code-analysis/#code-quality-issues","title":"Code Quality Issues","text":"Type Description <code>BARE_EXCEPT</code> Catching all exceptions without specificity <code>HARDCODED_STRING</code> Magic string that should be a constant <code>MAGIC_NUMBER</code> Numeric literal that should be named <code>TODO_COMMENT</code> TODO/FIXME comment in code"},{"location":"guides/code-analysis/#dead-code-issues","title":"Dead Code Issues","text":"Type Description <code>UNUSED_FUNCTION</code> Function is never called <code>UNUSED_CLASS</code> Class is never instantiated or subclassed <code>UNUSED_VARIABLE</code> Variable is assigned but never used <code>UNUSED_IMPORT</code> Import is never used <code>UNREACHABLE_CODE</code> Code after return/raise/break"},{"location":"guides/code-analysis/#filtering-issues","title":"Filtering Issues","text":""},{"location":"guides/code-analysis/#by-type","title":"By Type","text":"<pre><code>issues = rj.find_analysis_issues()\n\n# Single type\ncomplexity = issues.by_type(\"HIGH_CYCLOMATIC_COMPLEXITY\")\n\n# Multiple types\ndocs_issues = issues.by_types([\n    \"MISSING_TYPE_HINT\",\n    \"MISSING_DOCSTRING\"\n])\n\n# Dead code issues\ndead_code = issues.by_types([\n    \"UNUSED_FUNCTION\",\n    \"UNUSED_CLASS\",\n    \"UNUSED_VARIABLE\",\n    \"UNUSED_IMPORT\"\n])\n</code></pre>"},{"location":"guides/code-analysis/#by-severity","title":"By Severity","text":"<pre><code># Filter by severity level\nhigh = issues.by_severity(\"high\")\nmedium = issues.by_severity(\"medium\")\nlow = issues.by_severity(\"low\")\n\n# Or combine\ncritical = issues.by_severity([\"high\", \"critical\"])\n</code></pre>"},{"location":"guides/code-analysis/#by-location","title":"By Location","text":"<pre><code># Issues in a specific file\nfile_issues = issues.in_file(\"src/utils.py\")\n\n# Issues in a directory\napi_issues = issues.in_directory(\"src/api/\")\n\n# Issues in specific files (by pattern)\ntest_issues = issues.filter(lambda i: \"test\" in str(i.file_path))\n</code></pre>"},{"location":"guides/code-analysis/#grouping-and-aggregation","title":"Grouping and Aggregation","text":""},{"location":"guides/code-analysis/#group-by-file","title":"Group by File","text":"<pre><code>by_file = issues.group_by_file()\n\nfor file_path, file_issues in by_file.items():\n    print(f\"{file_path}:\")\n    for issue in file_issues:\n        print(f\"  L{issue.line_number}: {issue.type}\")\n</code></pre>"},{"location":"guides/code-analysis/#group-by-type","title":"Group by Type","text":"<pre><code>by_type = issues.group_by_type()\n\nfor issue_type, type_issues in by_type.items():\n    print(f\"{issue_type}: {len(type_issues)} occurrences\")\n</code></pre>"},{"location":"guides/code-analysis/#count-statistics","title":"Count Statistics","text":"<pre><code># Count by type\ntype_counts = issues.count_by_type()\n# {\"HIGH_CYCLOMATIC_COMPLEXITY\": 5, \"MISSING_DOCSTRING\": 12, ...}\n\n# Count by severity\nseverity_counts = issues.count_by_severity()\n# {\"high\": 3, \"medium\": 15, \"low\": 24}\n\n# Count by file\nfile_counts = issues.count_by_file()\n# {Path(\"src/utils.py\"): 8, Path(\"src/api.py\"): 3, ...}\n</code></pre>"},{"location":"guides/code-analysis/#complexity-analysis","title":"Complexity Analysis","text":""},{"location":"guides/code-analysis/#cyclomatic-complexity","title":"Cyclomatic Complexity","text":"<pre><code>from rejig import ComplexityAnalyzer\n\nanalyzer = ComplexityAnalyzer(rj)\n\n# Analyze a specific function\nfunc = rj.find_function(\"process_data\")\ncomplexity = analyzer.analyze_function(func)\n\nprint(f\"Cyclomatic complexity: {complexity.cyclomatic}\")\nprint(f\"Nesting depth: {complexity.max_nesting}\")\nprint(f\"Lines of code: {complexity.lines}\")\nprint(f\"Branch count: {complexity.branches}\")\nprint(f\"Return count: {complexity.returns}\")\n</code></pre>"},{"location":"guides/code-analysis/#find-complex-functions","title":"Find Complex Functions","text":"<pre><code># Get all functions sorted by complexity\ncomplex_funcs = analyzer.find_complex_functions(threshold=10)\n\nfor func, complexity in complex_funcs:\n    print(f\"{func.name}: complexity={complexity.cyclomatic}\")\n</code></pre>"},{"location":"guides/code-analysis/#nesting-analysis","title":"Nesting Analysis","text":"<pre><code># Find deeply nested code\ndeep_nesting = analyzer.find_deep_nesting(max_depth=4)\n\nfor location in deep_nesting:\n    print(f\"{location.file_path}:{location.line_number}\")\n    print(f\"  Nesting depth: {location.depth}\")\n</code></pre>"},{"location":"guides/code-analysis/#dead-code-detection","title":"Dead Code Detection","text":""},{"location":"guides/code-analysis/#find-unused-functions","title":"Find Unused Functions","text":"<pre><code>from rejig import DeadCodeAnalyzer\n\nanalyzer = DeadCodeAnalyzer(rj)\n\n# Find unused functions\nunused_funcs = analyzer.find_unused_functions()\n\nfor func in unused_funcs:\n    print(f\"Unused: {func.file_path}:{func.name}\")\n    print(f\"  Defined at line {func.line_number}\")\n    print(f\"  Confidence: {func.confidence}\")  # high, medium, low\n</code></pre>"},{"location":"guides/code-analysis/#find-unused-classes","title":"Find Unused Classes","text":"<pre><code>unused_classes = analyzer.find_unused_classes()\n\nfor cls in unused_classes:\n    print(f\"Unused class: {cls.name}\")\n</code></pre>"},{"location":"guides/code-analysis/#find-unused-variables","title":"Find Unused Variables","text":"<pre><code>unused_vars = analyzer.find_unused_variables()\n\nfor var in unused_vars:\n    print(f\"Unused: {var.name} in {var.file_path}:{var.line_number}\")\n</code></pre>"},{"location":"guides/code-analysis/#find-unused-imports","title":"Find Unused Imports","text":"<pre><code>unused_imports = analyzer.find_unused_imports()\n\nfor imp in unused_imports:\n    print(f\"Unused import: {imp.import_statement}\")\n\n# Auto-remove unused imports\nfor file in rj.find_files():\n    file.find_unused_imports().delete_all()\n</code></pre>"},{"location":"guides/code-analysis/#confidence-levels","title":"Confidence Levels","text":"<p>Dead code detection has confidence levels:</p> <ul> <li>high: Definitely unused (no references found)</li> <li>medium: Likely unused (only dynamic references possible)</li> <li>low: Possibly unused (complex reference patterns)</li> </ul> <pre><code># Only act on high-confidence findings\nhigh_confidence = unused_funcs.filter(lambda f: f.confidence == \"high\")\n</code></pre>"},{"location":"guides/code-analysis/#pattern-detection","title":"Pattern Detection","text":""},{"location":"guides/code-analysis/#find-magic-numbers","title":"Find Magic Numbers","text":"<pre><code>from rejig import PatternFinder\n\nfinder = PatternFinder(rj)\n\n# Find magic numbers (numeric literals that should be constants)\nmagic_numbers = finder.find_magic_numbers(\n    ignore=[0, 1, -1, 2],  # Common acceptable values\n    min_occurrences=2,     # Only if used multiple times\n)\n\nfor match in magic_numbers:\n    print(f\"Magic number {match.value} at {match.file_path}:{match.line_number}\")\n</code></pre>"},{"location":"guides/code-analysis/#find-hardcoded-strings","title":"Find Hardcoded Strings","text":"<pre><code># Find strings that might be configuration\nhardcoded = finder.find_hardcoded_strings(\n    patterns=[\n        r\"https?://\",      # URLs\n        r\"[a-z]+@[a-z]+\",  # Emails\n        r\"/[a-z/]+\",       # Paths\n    ]\n)\n\nfor match in hardcoded:\n    print(f\"Hardcoded: {match.value!r}\")\n</code></pre>"},{"location":"guides/code-analysis/#find-bare-excepts","title":"Find Bare Excepts","text":"<pre><code>bare_excepts = finder.find_bare_excepts()\n\nfor match in bare_excepts:\n    print(f\"Bare except at {match.file_path}:{match.line_number}\")\n</code></pre>"},{"location":"guides/code-analysis/#find-todo-comments","title":"Find TODO Comments","text":"<pre><code>todos = finder.find_todos()\n\nfor todo in todos:\n    print(f\"{todo.todo_type}: {todo.text}\")\n    print(f\"  {todo.file_path}:{todo.line_number}\")\n</code></pre>"},{"location":"guides/code-analysis/#code-metrics","title":"Code Metrics","text":""},{"location":"guides/code-analysis/#file-metrics","title":"File Metrics","text":"<pre><code>from rejig import CodeMetrics\n\nmetrics = CodeMetrics(rj)\n\n# Get metrics for a file\nfile_metrics = metrics.analyze_file(\"src/utils.py\")\n\nprint(f\"Lines of code: {file_metrics.loc}\")\nprint(f\"Blank lines: {file_metrics.blank_lines}\")\nprint(f\"Comment lines: {file_metrics.comment_lines}\")\nprint(f\"Functions: {file_metrics.function_count}\")\nprint(f\"Classes: {file_metrics.class_count}\")\nprint(f\"Imports: {file_metrics.import_count}\")\nprint(f\"Average complexity: {file_metrics.avg_complexity}\")\n</code></pre>"},{"location":"guides/code-analysis/#project-metrics","title":"Project Metrics","text":"<pre><code># Get aggregated metrics\nproject_metrics = metrics.analyze_project()\n\nprint(f\"Total files: {project_metrics.file_count}\")\nprint(f\"Total LOC: {project_metrics.total_loc}\")\nprint(f\"Total functions: {project_metrics.total_functions}\")\nprint(f\"Total classes: {project_metrics.total_classes}\")\nprint(f\"Avg file size: {project_metrics.avg_file_size}\")\nprint(f\"Largest file: {project_metrics.largest_file}\")\n</code></pre>"},{"location":"guides/code-analysis/#working-with-findings","title":"Working with Findings","text":""},{"location":"guides/code-analysis/#navigate-to-code","title":"Navigate to Code","text":"<pre><code>issues = rj.find_analysis_issues()\n\nfor issue in issues:\n    # Get the file target\n    file_target = issue.to_file_target()\n\n    # Get the line target\n    line_target = issue.to_line_target()\n\n    # Fix the issue directly\n    if issue.type == \"BARE_EXCEPT\":\n        line_target.rewrite(\"except Exception:\")\n</code></pre>"},{"location":"guides/code-analysis/#auto-fix-issues","title":"Auto-Fix Issues","text":"<pre><code># Fix missing docstrings\nmissing_docs = issues.by_type(\"MISSING_DOCSTRING\")\nfor issue in missing_docs:\n    target = rj.find_function(issue.name) or rj.find_class(issue.name)\n    if target:\n        target.generate_docstring()\n\n# Fix missing type hints\nmissing_types = issues.by_type(\"MISSING_TYPE_HINT\")\nfor issue in missing_types:\n    func = rj.find_function(issue.name)\n    if func:\n        func.infer_type_hints()\n\n# Remove unused imports\nunused = issues.by_type(\"UNUSED_IMPORT\")\nfor issue in unused:\n    rj.file(issue.file_path).remove_import(issue.name)\n</code></pre>"},{"location":"guides/code-analysis/#generating-reports","title":"Generating Reports","text":""},{"location":"guides/code-analysis/#text-report","title":"Text Report","text":"<pre><code>from rejig import AnalysisReporter\n\nreporter = AnalysisReporter(issues)\n\n# Simple text report\nprint(reporter.to_text())\n\n# Detailed report\nprint(reporter.to_text(verbose=True))\n</code></pre>"},{"location":"guides/code-analysis/#json-report","title":"JSON Report","text":"<pre><code># JSON for CI integration\njson_report = reporter.to_json()\nprint(json_report)\n\n# Save to file\nwith open(\"analysis-report.json\", \"w\") as f:\n    f.write(json_report)\n</code></pre>"},{"location":"guides/code-analysis/#markdown-report","title":"Markdown Report","text":"<pre><code># Markdown for documentation\nmd_report = reporter.to_markdown()\n\nwith open(\"analysis-report.md\", \"w\") as f:\n    f.write(md_report)\n</code></pre>"},{"location":"guides/code-analysis/#html-report","title":"HTML Report","text":"<pre><code># HTML with syntax highlighting\nhtml_report = reporter.to_html(\n    include_code_snippets=True,\n    syntax_highlight=True,\n)\n\nwith open(\"analysis-report.html\", \"w\") as f:\n    f.write(html_report)\n</code></pre>"},{"location":"guides/code-analysis/#ci-integration","title":"CI Integration","text":""},{"location":"guides/code-analysis/#exit-codes","title":"Exit Codes","text":"<pre><code>#!/usr/bin/env python\n\"\"\"CI script for code analysis.\"\"\"\nimport sys\nfrom rejig import Rejig\n\nrj = Rejig(\"src/\")\nissues = rj.find_analysis_issues()\n\n# Fail on high severity issues\nhigh_severity = issues.by_severity(\"high\")\nif high_severity:\n    print(f\"Found {len(high_severity)} high severity issues:\")\n    for issue in high_severity:\n        print(f\"  {issue.file_path}:{issue.line_number}: {issue.message}\")\n    sys.exit(1)\n\n# Warn on medium severity\nmedium_severity = issues.by_severity(\"medium\")\nif medium_severity:\n    print(f\"Warning: {len(medium_severity)} medium severity issues\")\n    for issue in medium_severity:\n        print(f\"  {issue.file_path}:{issue.line_number}: {issue.message}\")\n\nprint(\"Analysis passed!\")\nsys.exit(0)\n</code></pre>"},{"location":"guides/code-analysis/#github-actions-integration","title":"GitHub Actions Integration","text":"<pre><code># .github/workflows/analysis.yml\nname: Code Analysis\n\non: [push, pull_request]\n\njobs:\n  analyze:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n      - uses: actions/setup-python@v4\n        with:\n          python-version: '3.11'\n\n      - name: Install dependencies\n        run: pip install rejig\n\n      - name: Run analysis\n        run: python scripts/analyze.py\n\n      - name: Upload report\n        uses: actions/upload-artifact@v3\n        with:\n          name: analysis-report\n          path: analysis-report.html\n</code></pre>"},{"location":"guides/code-analysis/#thresholds-and-configuration","title":"Thresholds and Configuration","text":""},{"location":"guides/code-analysis/#custom-thresholds","title":"Custom Thresholds","text":"<pre><code>from rejig import Rejig, AnalysisConfig\n\nconfig = AnalysisConfig(\n    max_complexity=15,          # Default: 10\n    max_nesting_depth=5,        # Default: 4\n    max_function_lines=100,     # Default: 50\n    max_class_lines=500,        # Default: 300\n    max_parameters=8,           # Default: 5\n    max_branches=10,            # Default: 8\n    max_returns=5,              # Default: 4\n)\n\nrj = Rejig(\"src/\")\nissues = rj.find_analysis_issues(config=config)\n</code></pre>"},{"location":"guides/code-analysis/#ignore-patterns","title":"Ignore Patterns","text":"<pre><code>config = AnalysisConfig(\n    ignore_files=[\"**/test_*.py\", \"**/migrations/*.py\"],\n    ignore_functions=[\"__init__\", \"__repr__\"],\n    ignore_types=[\"TODO_COMMENT\"],  # Don't report TODOs\n)\n</code></pre>"},{"location":"guides/code-generation/","title":"Code Generation","text":"<p>Rejig provides tools for generating boilerplate code: dunder methods, properties, test stubs, and class conversions.</p>"},{"location":"guides/code-generation/#dunder-method-generation","title":"Dunder Method Generation","text":"<p>Generate common special methods for classes.</p>"},{"location":"guides/code-generation/#generate-__init__","title":"Generate <code>__init__</code>","text":"<pre><code>from rejig import Rejig\n\nrj = Rejig(\"src/\")\ncls = rj.find_class(\"Person\")\n\n# Generate __init__ from class attributes\ncls.generate_init()\n\n# Before:\n# class Person:\n#     name: str\n#     age: int\n#     email: str | None\n\n# After:\n# class Person:\n#     name: str\n#     age: int\n#     email: str | None\n#\n#     def __init__(self, name: str, age: int, email: str | None = None) -&gt; None:\n#         self.name = name\n#         self.age = age\n#         self.email = email\n</code></pre>"},{"location":"guides/code-generation/#generate-__repr__","title":"Generate <code>__repr__</code>","text":"<pre><code>cls.generate_repr()\n\n# Generates:\n# def __repr__(self) -&gt; str:\n#     return f\"Person(name={self.name!r}, age={self.age!r}, email={self.email!r})\"\n</code></pre>"},{"location":"guides/code-generation/#generate-__eq__","title":"Generate <code>__eq__</code>","text":"<pre><code>cls.generate_eq()\n\n# Generates:\n# def __eq__(self, other: object) -&gt; bool:\n#     if not isinstance(other, Person):\n#         return NotImplemented\n#     return (self.name, self.age, self.email) == (other.name, other.age, other.email)\n</code></pre>"},{"location":"guides/code-generation/#generate-__hash__","title":"Generate <code>__hash__</code>","text":"<pre><code>cls.generate_hash()\n\n# Generates:\n# def __hash__(self) -&gt; int:\n#     return hash((self.name, self.age, self.email))\n</code></pre>"},{"location":"guides/code-generation/#generate-all-common-dunders","title":"Generate All Common Dunders","text":"<pre><code># Generate all at once\ncls.generate_dunders([\"__init__\", \"__repr__\", \"__eq__\", \"__hash__\"])\n\n# Or use the shorthand\ncls.generate_common_dunders()\n</code></pre>"},{"location":"guides/code-generation/#customization-options","title":"Customization Options","text":"<pre><code>cls.generate_init(\n    include_super=True,           # Call super().__init__()\n    include_defaults=True,        # Include default values\n    optional_last=True,           # Put optional params last\n    use_dataclass_style=False,    # Don't use field()\n)\n\ncls.generate_repr(\n    include_private=False,        # Exclude _private attrs\n    max_attrs=5,                  # Limit shown attributes\n)\n\ncls.generate_eq(\n    compare_type=True,            # Include isinstance check\n    use_slots=False,              # Don't assume __slots__\n)\n</code></pre>"},{"location":"guides/code-generation/#property-generation","title":"Property Generation","text":""},{"location":"guides/code-generation/#convert-attribute-to-property","title":"Convert Attribute to Property","text":"<pre><code>cls = rj.find_class(\"User\")\n\n# Convert an attribute to a property with getter/setter\ncls.convert_attribute_to_property(\"email\")\n\n# Before:\n# class User:\n#     email: str\n\n# After:\n# class User:\n#     _email: str\n#\n#     @property\n#     def email(self) -&gt; str:\n#         return self._email\n#\n#     @email.setter\n#     def email(self, value: str) -&gt; None:\n#         self._email = value\n</code></pre>"},{"location":"guides/code-generation/#add-property-with-validation","title":"Add Property with Validation","text":"<pre><code>cls.add_property(\n    name=\"age\",\n    type_hint=\"int\",\n    getter_body=\"return self._age\",\n    setter_body=\"\"\"\n        if value &lt; 0:\n            raise ValueError(\"Age cannot be negative\")\n        self._age = value\n    \"\"\",\n)\n</code></pre>"},{"location":"guides/code-generation/#read-only-property","title":"Read-Only Property","text":"<pre><code>cls.add_property(\n    name=\"full_name\",\n    type_hint=\"str\",\n    getter_body=\"return f'{self.first_name} {self.last_name}'\",\n    setter=False,  # No setter, read-only\n)\n</code></pre>"},{"location":"guides/code-generation/#cached-property","title":"Cached Property","text":"<pre><code>cls.add_cached_property(\n    name=\"computed_value\",\n    type_hint=\"int\",\n    body=\"return expensive_computation(self.data)\",\n)\n\n# Generates:\n# @functools.cached_property\n# def computed_value(self) -&gt; int:\n#     return expensive_computation(self.data)\n</code></pre>"},{"location":"guides/code-generation/#class-conversions","title":"Class Conversions","text":""},{"location":"guides/code-generation/#convert-to-dataclass","title":"Convert to Dataclass","text":"<pre><code>cls = rj.find_class(\"Config\")\ncls.convert_to_dataclass()\n\n# Before:\n# class Config:\n#     host: str\n#     port: int\n#     debug: bool\n#\n#     def __init__(self, host: str, port: int, debug: bool = False):\n#         self.host = host\n#         self.port = port\n#         self.debug = debug\n\n# After:\n# from dataclasses import dataclass\n#\n# @dataclass\n# class Config:\n#     host: str\n#     port: int\n#     debug: bool = False\n</code></pre>"},{"location":"guides/code-generation/#dataclass-options","title":"Dataclass Options","text":"<pre><code>cls.convert_to_dataclass(\n    frozen=True,         # Immutable\n    slots=True,          # Use __slots__\n    kw_only=True,        # Keyword-only args\n    order=True,          # Generate comparison methods\n    eq=True,             # Generate __eq__\n    repr_=True,          # Generate __repr__\n)\n</code></pre>"},{"location":"guides/code-generation/#convert-to-namedtuple","title":"Convert to NamedTuple","text":"<pre><code>cls.convert_to_named_tuple()\n\n# Before:\n# class Point:\n#     x: int\n#     y: int\n\n# After:\n# from typing import NamedTuple\n#\n# class Point(NamedTuple):\n#     x: int\n#     y: int\n</code></pre>"},{"location":"guides/code-generation/#convert-to-typeddict","title":"Convert to TypedDict","text":"<pre><code>cls.convert_to_typed_dict()\n\n# Before:\n# class UserData:\n#     name: str\n#     age: int\n#     email: str | None\n\n# After:\n# from typing import TypedDict\n#\n# class UserData(TypedDict):\n#     name: str\n#     age: int\n#     email: str | None\n</code></pre>"},{"location":"guides/code-generation/#convert-from-dataclass","title":"Convert from Dataclass","text":"<pre><code># Convert back to regular class\ncls.convert_from_dataclass()\n</code></pre>"},{"location":"guides/code-generation/#protocol-and-abc-extraction","title":"Protocol and ABC Extraction","text":""},{"location":"guides/code-generation/#extract-protocol","title":"Extract Protocol","text":"<pre><code>cls = rj.find_class(\"DatabaseConnection\")\n\n# Extract a Protocol from the class's public interface\nprotocol = cls.extract_protocol(\"DatabaseProtocol\")\n\n# Creates:\n# from typing import Protocol\n#\n# class DatabaseProtocol(Protocol):\n#     def connect(self) -&gt; None: ...\n#     def execute(self, query: str) -&gt; list[dict]: ...\n#     def close(self) -&gt; None: ...\n</code></pre>"},{"location":"guides/code-generation/#extract-abstract-base-class","title":"Extract Abstract Base Class","text":"<pre><code>abc = cls.extract_abc(\"AbstractDatabase\")\n\n# Creates:\n# from abc import ABC, abstractmethod\n#\n# class AbstractDatabase(ABC):\n#     @abstractmethod\n#     def connect(self) -&gt; None: ...\n#\n#     @abstractmethod\n#     def execute(self, query: str) -&gt; list[dict]: ...\n#\n#     @abstractmethod\n#     def close(self) -&gt; None: ...\n</code></pre>"},{"location":"guides/code-generation/#inheritance-management","title":"Inheritance Management","text":""},{"location":"guides/code-generation/#add-base-class","title":"Add Base Class","text":"<pre><code>cls = rj.find_class(\"MyModel\")\ncls.add_base_class(\"BaseModel\")\n\n# Before:\n# class MyModel:\n\n# After:\n# class MyModel(BaseModel):\n</code></pre>"},{"location":"guides/code-generation/#add-mixin","title":"Add Mixin","text":"<pre><code>cls.add_mixin(\"TimestampMixin\")\n\n# Before:\n# class MyModel(BaseModel):\n\n# After:\n# class MyModel(TimestampMixin, BaseModel):\n</code></pre>"},{"location":"guides/code-generation/#remove-base-class","title":"Remove Base Class","text":"<pre><code>cls.remove_base_class(\"DeprecatedMixin\")\n</code></pre>"},{"location":"guides/code-generation/#test-generation","title":"Test Generation","text":""},{"location":"guides/code-generation/#generate-test-stubs","title":"Generate Test Stubs","text":"<pre><code>from rejig import TestGenerator\n\ngenerator = TestGenerator(rj)\n\n# Generate tests for a function\nfunc = rj.find_function(\"process_data\")\ntest_code = generator.generate_test(func)\n\nprint(test_code)\n# def test_process_data():\n#     # Arrange\n#     items = ...  # TODO: provide test data\n#     limit = ...  # TODO: provide test data\n#\n#     # Act\n#     result = process_data(items, limit)\n#\n#     # Assert\n#     assert result is not None  # TODO: add assertions\n</code></pre>"},{"location":"guides/code-generation/#generate-test-file","title":"Generate Test File","text":"<pre><code># Generate a complete test file for a module\ntest_file = generator.generate_test_file(\"src/utils.py\")\n\nwith open(\"tests/test_utils.py\", \"w\") as f:\n    f.write(test_file)\n</code></pre>"},{"location":"guides/code-generation/#generate-tests-for-class","title":"Generate Tests for Class","text":"<pre><code>cls = rj.find_class(\"UserService\")\ntest_code = generator.generate_class_tests(cls)\n\n# Generates:\n# import pytest\n# from myapp.services import UserService\n#\n# class TestUserService:\n#     @pytest.fixture\n#     def service(self):\n#         return UserService()\n#\n#     def test_create_user(self, service):\n#         # Arrange\n#         name = ...\n#         email = ...\n#\n#         # Act\n#         result = service.create_user(name, email)\n#\n#         # Assert\n#         assert result is not None\n</code></pre>"},{"location":"guides/code-generation/#test-generation-options","title":"Test Generation Options","text":"<pre><code>generator.generate_test(func,\n    style=\"pytest\",           # or \"unittest\"\n    include_docstring=True,   # Add docstring to test\n    include_arrange=True,     # Add Arrange section\n    parametrize=True,         # Use @pytest.mark.parametrize\n)\n</code></pre>"},{"location":"guides/code-generation/#unittest-to-pytest-conversion","title":"unittest to pytest Conversion","text":""},{"location":"guides/code-generation/#convert-test-class","title":"Convert Test Class","text":"<pre><code>from rejig import UnittestToPytestConverter\n\nconverter = UnittestToPytestConverter(rj)\n\n# Convert a single test file\nconverter.convert_file(\"tests/test_utils.py\")\n\n# Before:\n# import unittest\n#\n# class TestUtils(unittest.TestCase):\n#     def setUp(self):\n#         self.data = [1, 2, 3]\n#\n#     def test_sum(self):\n#         self.assertEqual(sum(self.data), 6)\n#\n#     def test_len(self):\n#         self.assertTrue(len(self.data) == 3)\n\n# After:\n# import pytest\n#\n# class TestUtils:\n#     @pytest.fixture(autouse=True)\n#     def setup(self):\n#         self.data = [1, 2, 3]\n#\n#     def test_sum(self):\n#         assert sum(self.data) == 6\n#\n#     def test_len(self):\n#         assert len(self.data) == 3\n</code></pre>"},{"location":"guides/code-generation/#batch-conversion","title":"Batch Conversion","text":"<pre><code># Convert all test files\nconverter.convert_all(\"tests/\")\n</code></pre>"},{"location":"guides/code-generation/#assertion-conversions","title":"Assertion Conversions","text":"<p>The converter handles these assertion patterns:</p> unittest pytest <code>self.assertEqual(a, b)</code> <code>assert a == b</code> <code>self.assertNotEqual(a, b)</code> <code>assert a != b</code> <code>self.assertTrue(x)</code> <code>assert x</code> <code>self.assertFalse(x)</code> <code>assert not x</code> <code>self.assertIs(a, b)</code> <code>assert a is b</code> <code>self.assertIsNone(x)</code> <code>assert x is None</code> <code>self.assertIn(a, b)</code> <code>assert a in b</code> <code>self.assertRaises(E)</code> <code>pytest.raises(E)</code> <code>self.assertAlmostEqual(a, b)</code> <code>assert a == pytest.approx(b)</code>"},{"location":"guides/code-generation/#doctest-extraction","title":"Doctest Extraction","text":""},{"location":"guides/code-generation/#extract-doctests-to-pytest","title":"Extract Doctests to pytest","text":"<pre><code>from rejig import DoctestExtractor\n\nextractor = DoctestExtractor(rj)\n\n# Extract doctests from a module\ntests = extractor.extract(\"src/utils.py\")\n\n# Generate pytest test file\ntest_code = extractor.to_pytest(tests)\n\nprint(test_code)\n# def test_add_doctest_1():\n#     \\\"\\\"\\\"From utils.add docstring.\\\"\\\"\\\"\n#     assert add(2, 3) == 5\n#\n# def test_add_doctest_2():\n#     assert add(-1, 1) == 0\n</code></pre>"},{"location":"guides/code-generation/#batch-generation","title":"Batch Generation","text":""},{"location":"guides/code-generation/#generate-for-multiple-classes","title":"Generate for Multiple Classes","text":"<pre><code># Generate dunders for all classes\nfor cls in rj.find_classes():\n    if not cls.has_method(\"__repr__\"):\n        cls.generate_repr()\n\n# Generate tests for all functions\ngenerator = TestGenerator(rj)\nfor func in rj.find_functions():\n    if not func.name.startswith(\"_\"):\n        test = generator.generate_test(func)\n        # ... save to file\n</code></pre>"},{"location":"guides/code-generation/#convert-all-classes-to-dataclasses","title":"Convert All Classes to Dataclasses","text":"<pre><code># Find classes that look like data classes\nfor cls in rj.find_classes():\n    # Has typed attributes but no complex methods\n    if cls.has_typed_attributes() and not cls.has_complex_methods():\n        cls.convert_to_dataclass()\n</code></pre>"},{"location":"guides/code-generation/#common-patterns","title":"Common Patterns","text":""},{"location":"guides/code-generation/#modernize-data-classes","title":"Modernize Data Classes","text":"<pre><code>rj = Rejig(\"src/\")\n\n# Find classes that should be dataclasses\nfor cls in rj.find_classes():\n    methods = cls.find_methods()\n    method_names = {m.name for m in methods}\n\n    # Has __init__ that just assigns attributes\n    if \"__init__\" in method_names:\n        init = cls.find_method(\"__init__\")\n        if init.is_simple_assignment():\n            cls.convert_to_dataclass()\n</code></pre>"},{"location":"guides/code-generation/#add-missing-dunders","title":"Add Missing Dunders","text":"<pre><code>for cls in rj.find_classes():\n    # Add __repr__ if missing\n    if not cls.has_method(\"__repr__\"):\n        cls.generate_repr()\n\n    # Add __eq__ and __hash__ for value objects\n    if cls.has_decorator(\"dataclass\") or cls.has_typed_attributes():\n        if not cls.has_method(\"__eq__\"):\n            cls.generate_eq()\n        if not cls.has_method(\"__hash__\"):\n            cls.generate_hash()\n</code></pre>"},{"location":"guides/code-generation/#generate-test-suite-skeleton","title":"Generate Test Suite Skeleton","text":"<pre><code>from rejig import TestGenerator\n\nrj = Rejig(\"src/myapp/\")\ngenerator = TestGenerator(rj)\n\n# Generate tests for entire package\nfor file in rj.find_files():\n    relative_path = file.path.relative_to(rj.root)\n    test_path = Path(\"tests\") / f\"test_{relative_path}\"\n\n    if not test_path.exists():\n        test_code = generator.generate_test_file(file.path)\n        test_path.parent.mkdir(parents=True, exist_ok=True)\n        test_path.write_text(test_code)\n        print(f\"Generated: {test_path}\")\n</code></pre>"},{"location":"guides/code-optimization/","title":"Code Optimization","text":"<p>Analyze and improve code efficiency with the optimize module.</p>"},{"location":"guides/code-optimization/#overview","title":"Overview","text":"<p>The <code>optimize</code> module provides two analyzers:</p> <ul> <li>DRYAnalyzer \u2014 Find duplicate code, expressions, and literals</li> <li>LoopOptimizer \u2014 Find loops that can be replaced with comprehensions or builtins</li> </ul> <p>Both return <code>OptimizeTargetList</code> objects for filtering and inspection.</p>"},{"location":"guides/code-optimization/#dry-analysis","title":"DRY Analysis","text":""},{"location":"guides/code-optimization/#finding-duplicate-code","title":"Finding Duplicate Code","text":"<pre><code>from rejig import Rejig, DRYAnalyzer\n\nrj = Rejig(\"src/\")\ndry = DRYAnalyzer(rj)\n\n# Find all DRY violations\nissues = dry.find_all_issues()\nprint(issues.summary())\n</code></pre> <p>Output: <pre><code>Total: 15 optimization opportunities\n  DUPLICATE_CODE_BLOCK: 4\n  DUPLICATE_LITERAL: 6\n  SIMILAR_FUNCTION: 3\n  DUPLICATE_EXPRESSION: 2\n</code></pre></p>"},{"location":"guides/code-optimization/#duplicate-code-blocks","title":"Duplicate Code Blocks","text":"<p>Find repeated code in if/for/while/try/with blocks:</p> <pre><code># Find blocks repeated 2+ times with 3+ lines\nduplicates = dry.find_duplicate_code_blocks(\n    min_lines=3,\n    min_occurrences=2\n)\n\nfor dup in duplicates:\n    print(f\"{dup.location}: {dup.message}\")\n    print(f\"  Other locations: {dup.finding.context['other_locations']}\")\n</code></pre>"},{"location":"guides/code-optimization/#duplicate-expressions","title":"Duplicate Expressions","text":"<p>Find repeated complex expressions:</p> <pre><code>expressions = dry.find_duplicate_expressions(min_occurrences=3)\n\nfor expr in expressions:\n    print(f\"{expr.location}: {expr.original_code}\")\n    print(f\"  Suggestion: {expr.suggested_code}\")\n</code></pre>"},{"location":"guides/code-optimization/#magic-numbers-and-strings","title":"Magic Numbers and Strings","text":"<p>Find repeated literals that should be constants:</p> <pre><code>literals = dry.find_duplicate_literals(min_occurrences=3)\n\nfor lit in literals:\n    print(f\"{lit.location}: {lit.original_code}\")\n    # Output: src/config.py:45: 3600\n    # Suggestion: Define a constant: TIMEOUT_SECONDS = 3600\n</code></pre>"},{"location":"guides/code-optimization/#similar-functions","title":"Similar Functions","text":"<p>Find functions with identical structure:</p> <pre><code>similar = dry.find_similar_functions()\n\nfor func in similar:\n    print(f\"{func.name}: identical to {func.finding.context['similar_functions']}\")\n</code></pre>"},{"location":"guides/code-optimization/#loop-optimization","title":"Loop Optimization","text":""},{"location":"guides/code-optimization/#finding-loop-issues","title":"Finding Loop Issues","text":"<pre><code>from rejig import Rejig, LoopOptimizer\n\nrj = Rejig(\"src/\")\nloops = LoopOptimizer(rj)\n\n# Find all loop optimization opportunities\nissues = loops.find_all_issues()\nprint(issues.summary())\n</code></pre>"},{"location":"guides/code-optimization/#list-comprehension-candidates","title":"List Comprehension Candidates","text":"<pre><code>comprehensions = loops.find_comprehension_opportunities()\n\nfor opt in comprehensions:\n    print(f\"{opt.location}:\")\n    print(f\"  Before: {opt.original_code}\")\n    print(f\"  After:  {opt.suggested_code}\")\n</code></pre> <p>Example findings:</p> <pre><code>src/utils.py:23:\n  Before: for item in items:\n              result.append(item.upper())\n  After:  result = [item.upper() for item in items]\n\nsrc/data.py:45:\n  Before: for key, value in pairs:\n              data[key] = value * 2\n  After:  data = {key: value * 2 for key, value in pairs}\n</code></pre>"},{"location":"guides/code-optimization/#builtin-function-candidates","title":"Builtin Function Candidates","text":"<pre><code>builtins = loops.find_builtin_opportunities()\n\nfor opt in builtins:\n    print(f\"{opt.location}: {opt.message}\")\n    print(f\"  Suggested: {opt.suggested_code}\")\n</code></pre> <p>Detects patterns for:</p> Pattern Builtin Loop summing values <code>sum()</code> Loop with conditional return True <code>any()</code> Loop with conditional return False <code>all()</code> Loop building string <code>str.join()</code> Loop applying function <code>map()</code> Loop filtering items <code>filter()</code> or comprehension"},{"location":"guides/code-optimization/#iterator-improvements","title":"Iterator Improvements","text":"<pre><code>iterators = loops.find_iterator_opportunities()\n\nfor opt in iterators:\n    print(f\"{opt.location}: {opt.message}\")\n</code></pre> <p>Detects:</p> <ul> <li>Manual index tracking \u2192 <code>enumerate()</code></li> <li><code>range(len(x))</code> patterns \u2192 direct iteration or <code>zip()</code></li> </ul>"},{"location":"guides/code-optimization/#filtering-results","title":"Filtering Results","text":""},{"location":"guides/code-optimization/#by-type","title":"By Type","text":"<pre><code># Only DRY issues\nissues.dry_issues()\n\n# Only loop issues\nissues.loop_issues()\n\n# Specific type\nfrom rejig import OptimizeType\nissues.by_type(OptimizeType.SLOW_LOOP_TO_COMPREHENSION)\n</code></pre>"},{"location":"guides/code-optimization/#by-location","title":"By Location","text":"<pre><code># In a specific file\nissues.in_file(\"src/models.py\")\n\n# In a directory\nissues.in_directory(\"src/utils/\")\n</code></pre>"},{"location":"guides/code-optimization/#by-severity","title":"By Severity","text":"<pre><code>issues.warnings()    # Higher confidence findings\nissues.suggestions() # Lower confidence findings\nissues.info()        # Informational\n</code></pre>"},{"location":"guides/code-optimization/#grouping-and-aggregation","title":"Grouping and Aggregation","text":""},{"location":"guides/code-optimization/#group-by-file","title":"Group by File","text":"<pre><code>by_file = issues.group_by_file()\nfor path, file_issues in by_file.items():\n    print(f\"{path}: {len(file_issues)} issues\")\n</code></pre>"},{"location":"guides/code-optimization/#group-by-type","title":"Group by Type","text":"<pre><code>by_type = issues.group_by_type()\nfor opt_type, type_issues in by_type.items():\n    print(f\"{opt_type.name}: {len(type_issues)}\")\n</code></pre>"},{"location":"guides/code-optimization/#counts","title":"Counts","text":"<pre><code>issues.count_by_type()      # {OptimizeType: int}\nissues.count_by_file()      # {Path: int}\nissues.count_by_severity()  # {str: int}\n</code></pre>"},{"location":"guides/code-optimization/#working-with-findings","title":"Working with Findings","text":""},{"location":"guides/code-optimization/#accessing-details","title":"Accessing Details","text":"<pre><code>for opt in issues:\n    print(f\"Type: {opt.type.name}\")\n    print(f\"Location: {opt.location}\")\n    print(f\"Message: {opt.message}\")\n    print(f\"Original: {opt.original_code}\")\n    print(f\"Suggested: {opt.suggested_code}\")\n    print(f\"Improvement: {opt.finding.estimated_improvement}\")\n    print(f\"Context: {opt.finding.context}\")\n    print()\n</code></pre>"},{"location":"guides/code-optimization/#navigation","title":"Navigation","text":"<pre><code># Navigate to the file\nfile_target = opt.to_file_target()\n\n# Navigate to the specific line\nline_target = opt.to_line_target()\n\n# Navigate to the line range\nblock_target = opt.to_line_block_target()\n</code></pre>"},{"location":"guides/code-optimization/#export","title":"Export","text":"<pre><code># To list of dicts (for JSON export)\ndata = issues.to_list_of_dicts()\n\nimport json\nprint(json.dumps(data, indent=2, default=str))\n</code></pre>"},{"location":"guides/code-optimization/#confidence-levels","title":"Confidence Levels","text":"<p>Loop optimizations include a confidence score:</p> <pre><code># Only high-confidence suggestions (&gt;= 0.85)\nhigh_confidence = loops.find_all_issues(min_confidence=0.85)\n\n# Include lower-confidence suggestions\nall_suggestions = loops.find_all_issues(min_confidence=0.5)\n</code></pre> <p>Confidence levels:</p> Confidence Meaning 0.95 Very clear pattern (e.g., simple list append) 0.85-0.94 Clear pattern with minor ambiguity 0.70-0.84 Likely correct but context-dependent &lt; 0.70 Suggestion only, manual review needed"},{"location":"guides/code-optimization/#optimization-types","title":"Optimization Types","text":""},{"location":"guides/code-optimization/#dry-types","title":"DRY Types","text":"<pre><code>from rejig import OptimizeType\n\n# Duplicate code\nOptimizeType.DUPLICATE_CODE_BLOCK\nOptimizeType.DUPLICATE_EXPRESSION\nOptimizeType.DUPLICATE_LITERAL\nOptimizeType.SIMILAR_FUNCTION\nOptimizeType.REPEATED_PATTERN\n</code></pre>"},{"location":"guides/code-optimization/#loop-types","title":"Loop Types","text":"<pre><code># Comprehensions\nOptimizeType.SLOW_LOOP_TO_COMPREHENSION\nOptimizeType.SLOW_LOOP_TO_DICT_COMPREHENSION\nOptimizeType.SLOW_LOOP_TO_SET_COMPREHENSION\n\n# Builtins\nOptimizeType.SLOW_LOOP_TO_MAP\nOptimizeType.SLOW_LOOP_TO_FILTER\nOptimizeType.SLOW_LOOP_TO_ANY_ALL\nOptimizeType.SLOW_LOOP_TO_SUM\nOptimizeType.SLOW_LOOP_TO_JOIN\nOptimizeType.SLOW_LOOP_TO_ENUMERATE\nOptimizeType.SLOW_LOOP_TO_ZIP\n</code></pre>"},{"location":"guides/code-optimization/#efficiency-types","title":"Efficiency Types","text":"<pre><code>OptimizeType.INEFFICIENT_STRING_CONCAT\nOptimizeType.INEFFICIENT_LIST_EXTEND\nOptimizeType.UNNECESSARY_LIST_CONVERSION\n</code></pre>"},{"location":"guides/code-optimization/#common-patterns","title":"Common Patterns","text":""},{"location":"guides/code-optimization/#generate-optimization-report","title":"Generate Optimization Report","text":"<pre><code>from rejig import Rejig, DRYAnalyzer, LoopOptimizer\n\ndef generate_report(path: str) -&gt; str:\n    rj = Rejig(path)\n\n    dry = DRYAnalyzer(rj)\n    loops = LoopOptimizer(rj)\n\n    dry_issues = dry.find_all_issues()\n    loop_issues = loops.find_all_issues()\n\n    lines = [\"# Code Optimization Report\", \"\"]\n\n    lines.append(\"## DRY Violations\")\n    lines.append(dry_issues.summary())\n    lines.append(\"\")\n\n    lines.append(\"## Loop Optimizations\")\n    lines.append(loop_issues.summary())\n    lines.append(\"\")\n\n    lines.append(\"## Details\")\n    for opt in dry_issues.sorted_by_location():\n        lines.append(f\"- {opt.location}: {opt.message}\")\n\n    for opt in loop_issues.sorted_by_location():\n        lines.append(f\"- {opt.location}: {opt.message}\")\n\n    return \"\\n\".join(lines)\n\nprint(generate_report(\"src/\"))\n</code></pre>"},{"location":"guides/code-optimization/#focus-on-high-impact-issues","title":"Focus on High-Impact Issues","text":"<pre><code># Find the most frequently duplicated code\ndry = DRYAnalyzer(rj)\nduplicates = dry.find_duplicate_code_blocks(min_occurrences=3)\n\n# Sort by number of occurrences\nsorted_dups = sorted(\n    duplicates,\n    key=lambda d: d.finding.context.get(\"occurrences\", 0),\n    reverse=True\n)\n\nprint(\"Top duplicated code blocks:\")\nfor dup in sorted_dups[:5]:\n    count = dup.finding.context.get(\"occurrences\", 0)\n    print(f\"  {count}x: {dup.location}\")\n</code></pre>"},{"location":"guides/code-optimization/#ci-integration","title":"CI Integration","text":"<pre><code>#!/usr/bin/env python3\n\"\"\"Check for optimization opportunities in CI.\"\"\"\n\nimport sys\nfrom rejig import Rejig, DRYAnalyzer, LoopOptimizer\n\nrj = Rejig(\"src/\")\n\ndry = DRYAnalyzer(rj)\nloops = LoopOptimizer(rj)\n\n# Only flag high-confidence issues\ndry_issues = dry.find_duplicate_code_blocks(min_occurrences=3)\nloop_issues = loops.find_all_issues(min_confidence=0.9)\n\ntotal = len(dry_issues) + len(loop_issues)\n\nif total &gt; 0:\n    print(f\"Found {total} optimization opportunities:\")\n    print(dry_issues.summary())\n    print(loop_issues.summary())\n    sys.exit(1)\n\nprint(\"No major optimization issues found\")\nsys.exit(0)\n</code></pre>"},{"location":"guides/code-optimization/#next-steps","title":"Next Steps","text":"<ul> <li>Optimization Recipes \u2014 Ready-to-use scripts</li> <li>Batch Operations \u2014 Apply changes to multiple targets</li> <li>Codemod Recipes \u2014 More code transformation examples</li> </ul>"},{"location":"guides/config-files/","title":"Config Files","text":"<p>Manipulate TOML, YAML, JSON, and INI files with the same target-based API.</p>"},{"location":"guides/config-files/#toml-files","title":"TOML Files","text":"<p>Common for <code>pyproject.toml</code>:</p> <pre><code>toml = rj.toml(\"pyproject.toml\")\n\n# Read values (dotted key path)\nversion = toml.get(\"project.version\")\nline_length = toml.get(\"tool.black.line-length\", default=88)\n\n# Set values\ntoml.set(\"project.version\", \"2.0.0\")\ntoml.set(\"tool.black.line-length\", 110)\ntoml.set(\"tool.ruff.select\", [\"E\", \"F\", \"W\"])\n\n# Delete keys\ntoml.delete_key(\"tool.deprecated-tool\")\n\n# Get entire sections\nblack_config = toml.get_section(\"tool.black\")\n\n# Replace entire file content (validates TOML syntax)\ntoml.rewrite(new_content)\n</code></pre>"},{"location":"guides/config-files/#common-pyprojecttoml-operations","title":"Common pyproject.toml Operations","text":"<pre><code>toml = rj.toml(\"pyproject.toml\")\n\n# Update version\ntoml.set(\"project.version\", \"1.2.0\")\n\n# Add a dependency\ndeps = toml.get(\"project.dependencies\", default=[])\ndeps.append(\"requests&gt;=2.28.0\")\ntoml.set(\"project.dependencies\", deps)\n\n# Configure tools\ntoml.set(\"tool.black.line-length\", 110)\ntoml.set(\"tool.black.target-version\", [\"py310\", \"py311\"])\ntoml.set(\"tool.ruff.select\", [\"E\", \"F\", \"W\", \"I\"])\ntoml.set(\"tool.mypy.strict\", True)\n</code></pre>"},{"location":"guides/config-files/#yaml-files","title":"YAML Files","text":"<pre><code>yaml = rj.yaml(\"config.yml\")\n\n# Read values\ndebug = yaml.get(\"app.debug\", default=False)\nhosts = yaml.get(\"database.hosts\")\n\n# Set values\nyaml.set(\"app.version\", \"2.0.0\")\nyaml.set(\"database.pool_size\", 10)\n\n# Delete keys\nyaml.delete_key(\"deprecated_setting\")\n</code></pre>"},{"location":"guides/config-files/#nested-structures","title":"Nested Structures","text":"<pre><code>yaml = rj.yaml(\"docker-compose.yml\")\n\n# Access nested values\nimage = yaml.get(\"services.web.image\")\nports = yaml.get(\"services.web.ports\")\n\n# Set nested values\nyaml.set(\"services.web.environment.DEBUG\", \"false\")\n</code></pre>"},{"location":"guides/config-files/#json-files","title":"JSON Files","text":"<pre><code>json_file = rj.json(\"package.json\")\n\n# Read values\nname = json_file.get(\"name\")\nversion = json_file.get(\"version\")\nscripts = json_file.get(\"scripts\", default={})\n\n# Set values\njson_file.set(\"version\", \"2.0.0\")\njson_file.set(\"scripts.test\", \"pytest\")\n\n# Delete keys\njson_file.delete_key(\"devDependencies.old-package\")\n</code></pre>"},{"location":"guides/config-files/#ini-files","title":"INI Files","text":"<pre><code>ini = rj.ini(\"setup.cfg\")\n\n# Read values (section, key)\nname = ini.get(\"metadata\", \"name\")\nversion = ini.get(\"metadata\", \"version\")\n\n# Set values\nini.set(\"metadata\", \"version\", \"2.0.0\")\nini.set(\"options\", \"python_requires\", \"&gt;=3.10\")\n\n# Delete keys\nini.delete_key(\"options\", \"deprecated_option\")\n\n# Add sections\nini.add_section(\"tool:pytest\")\nini.set(\"tool:pytest\", \"testpaths\", \"tests\")\n\n# Get entire file as nested dict\ndata = ini.get_data()\n</code></pre>"},{"location":"guides/config-files/#text-files","title":"Text Files","text":"<p>For files without structured format:</p> <pre><code>text = rj.text_file(\"README.md\")\n\n# Read content\nresult = text.get_content()\nif result:\n    print(result.data)\n\n# Line operations\ntext.line(1).get_content()  # First line\n\n# Pattern operations\nmatches = text.find_pattern(r\"## .*\")  # Find markdown headers\ntext.replace_pattern(r\"v\\d+\\.\\d+\\.\\d+\", \"v2.0.0\")  # Update version strings\n</code></pre>"},{"location":"guides/config-files/#checking-existence","title":"Checking Existence","text":"<pre><code>toml = rj.toml(\"pyproject.toml\")\n\nif toml.exists():\n    version = toml.get(\"project.version\")\nelse:\n    print(\"pyproject.toml not found\")\n</code></pre>"},{"location":"guides/config-files/#result-handling","title":"Result Handling","text":"<p>Config operations return <code>Result</code>:</p> <pre><code>result = toml.set(\"project.version\", \"2.0.0\")\n\nif result:\n    print(f\"Updated {result.files_changed}\")\nelse:\n    print(f\"Failed: {result.message}\")\n</code></pre>"},{"location":"guides/config-files/#common-patterns","title":"Common Patterns","text":""},{"location":"guides/config-files/#update-version-everywhere","title":"Update Version Everywhere","text":"<pre><code>new_version = \"2.0.0\"\n\n# pyproject.toml\nrj.toml(\"pyproject.toml\").set(\"project.version\", new_version)\n\n# package.json (if exists)\npkg = rj.json(\"package.json\")\nif pkg.exists():\n    pkg.set(\"version\", new_version)\n\n# __init__.py\ninit = rj.file(\"src/mypackage/__init__.py\")\ninit.replace_pattern(r'__version__ = \"[^\"]+\"', f'__version__ = \"{new_version}\"')\n</code></pre>"},{"location":"guides/config-files/#sync-tool-configuration","title":"Sync Tool Configuration","text":"<pre><code># Ensure consistent settings across projects\ntoml = rj.toml(\"pyproject.toml\")\n\ntoml.set(\"tool.black.line-length\", 110)\ntoml.set(\"tool.isort.profile\", \"black\")\ntoml.set(\"tool.isort.line_length\", 110)\ntoml.set(\"tool.mypy.python_version\", \"3.10\")\ntoml.set(\"tool.mypy.strict\", True)\n</code></pre>"},{"location":"guides/config-files/#add-github-actions-workflow","title":"Add GitHub Actions Workflow","text":"<pre><code>yaml = rj.yaml(\".github/workflows/test.yml\")\n\nyaml.set(\"name\", \"Tests\")\nyaml.set(\"on.push.branches\", [\"main\"])\nyaml.set(\"on.pull_request.branches\", [\"main\"])\nyaml.set(\"jobs.test.runs-on\", \"ubuntu-latest\")\nyaml.set(\"jobs.test.steps\", [\n    {\"uses\": \"actions/checkout@v4\"},\n    {\"uses\": \"actions/setup-python@v5\", \"with\": {\"python-version\": \"3.10\"}},\n    {\"run\": \"pip install -e .[dev]\"},\n    {\"run\": \"pytest\"},\n])\n</code></pre>"},{"location":"guides/config-files/#next-steps","title":"Next Steps","text":"<ul> <li>Error Handling \u2014 Handle failures gracefully</li> <li>Examples \u2014 Real-world patterns</li> </ul>"},{"location":"guides/docstrings/","title":"Docstrings","text":"<p>Rejig provides tools for generating, updating, and converting docstrings. Supports Google, NumPy, and Sphinx/reStructuredText styles.</p>"},{"location":"guides/docstrings/#generating-docstrings","title":"Generating Docstrings","text":""},{"location":"guides/docstrings/#for-a-single-function","title":"For a Single Function","text":"<pre><code>from rejig import Rejig\n\nrj = Rejig(\"src/\")\n\nfunc = rj.find_function(\"process_data\")\nfunc.generate_docstring()\n\n# Before:\n# def process_data(items: list[str], limit: int = 10) -&gt; dict[str, int]:\n#     result = {}\n#     for item in items[:limit]:\n#         result[item] = len(item)\n#     return result\n\n# After (Google style by default):\n# def process_data(items: list[str], limit: int = 10) -&gt; dict[str, int]:\n#     \"\"\"Process data items and return length mapping.\n#\n#     Args:\n#         items: List of items to process.\n#         limit: Maximum number of items to process. Defaults to 10.\n#\n#     Returns:\n#         Dictionary mapping items to their lengths.\n#     \"\"\"\n#     result = {}\n#     ...\n</code></pre>"},{"location":"guides/docstrings/#specify-style","title":"Specify Style","text":"<pre><code># Google style (default)\nfunc.generate_docstring(style=\"google\")\n\n# NumPy style\nfunc.generate_docstring(style=\"numpy\")\n\n# Sphinx/reStructuredText style\nfunc.generate_docstring(style=\"sphinx\")\n</code></pre>"},{"location":"guides/docstrings/#style-examples","title":"Style Examples","text":"<p>Google Style: <pre><code>def process(items: list[str], limit: int = 10) -&gt; dict[str, int]:\n    \"\"\"Process items and return counts.\n\n    Args:\n        items: List of items to process.\n        limit: Maximum items. Defaults to 10.\n\n    Returns:\n        Dictionary of item counts.\n\n    Raises:\n        ValueError: If items is empty.\n    \"\"\"\n</code></pre></p> <p>NumPy Style: <pre><code>def process(items: list[str], limit: int = 10) -&gt; dict[str, int]:\n    \"\"\"Process items and return counts.\n\n    Parameters\n    ----------\n    items : list[str]\n        List of items to process.\n    limit : int, optional\n        Maximum items. Default is 10.\n\n    Returns\n    -------\n    dict[str, int]\n        Dictionary of item counts.\n\n    Raises\n    ------\n    ValueError\n        If items is empty.\n    \"\"\"\n</code></pre></p> <p>Sphinx Style: <pre><code>def process(items: list[str], limit: int = 10) -&gt; dict[str, int]:\n    \"\"\"Process items and return counts.\n\n    :param items: List of items to process.\n    :type items: list[str]\n    :param limit: Maximum items. Default is 10.\n    :type limit: int\n    :returns: Dictionary of item counts.\n    :rtype: dict[str, int]\n    :raises ValueError: If items is empty.\n    \"\"\"\n</code></pre></p>"},{"location":"guides/docstrings/#batch-generation","title":"Batch Generation","text":"<pre><code># Generate for all functions without docstrings\nrj.find_functions().without_docstrings().generate_docstrings()\n\n# Generate for all methods in a class\nrj.find_class(\"MyClass\").find_methods().without_docstrings().generate_docstrings()\n\n# Generate for all public functions\nrj.find_functions().filter(lambda f: not f.name.startswith(\"_\")).generate_docstrings()\n\n# Generate for entire codebase\nrj.find_functions().generate_all_docstrings()\nrj.find_methods().generate_all_docstrings()\n</code></pre>"},{"location":"guides/docstrings/#generation-options","title":"Generation Options","text":"<pre><code>func.generate_docstring(\n    style=\"google\",\n    include_types=True,       # Include type info in docstring\n    include_defaults=True,    # Document default values\n    include_raises=True,      # Include Raises section\n    include_examples=False,   # Don't add Example section\n    summary_from_name=True,   # Generate summary from function name\n)\n</code></pre>"},{"location":"guides/docstrings/#updating-docstrings","title":"Updating Docstrings","text":"<p>When function signatures change, update docstrings to match:</p> <pre><code># Update docstring to match current signature\nfunc.update_docstring()\n\n# This will:\n# - Add documentation for new parameters\n# - Remove documentation for removed parameters\n# - Update types if they changed\n# - Preserve existing descriptions\n</code></pre>"},{"location":"guides/docstrings/#batch-updates","title":"Batch Updates","text":"<pre><code># Update all docstrings in a file\nrj.file(\"module.py\").find_functions().update_docstrings()\n\n# Update after a refactoring\ncls = rj.find_class(\"MyClass\")\ncls.add_parameter_to_all_methods(\"context\", \"Context\")\ncls.find_methods().update_docstrings()\n</code></pre>"},{"location":"guides/docstrings/#converting-docstring-styles","title":"Converting Docstring Styles","text":"<p>Convert between docstring formats:</p> <pre><code># Convert a single function\nfunc = rj.find_function(\"process\")\nfunc.convert_docstring_style(\"numpy\")  # Convert to NumPy style\n\n# Convert from one style to another\nfunc.convert_docstring_style(from_style=\"sphinx\", to_style=\"google\")\n\n# Batch conversion\nrj.find_functions().convert_docstring_style(\"google\")\nrj.find_methods().convert_docstring_style(\"google\")\n</code></pre>"},{"location":"guides/docstrings/#style-detection","title":"Style Detection","text":"<pre><code># Detect current docstring style\nfrom rejig import DocstringParser\n\nparser = DocstringParser()\nstyle = parser.detect_style(func.docstring)\nprint(f\"Current style: {style}\")  # \"google\", \"numpy\", \"sphinx\", or \"unknown\"\n</code></pre>"},{"location":"guides/docstrings/#parsing-docstrings","title":"Parsing Docstrings","text":"<p>Extract structured information from docstrings:</p> <pre><code>from rejig import DocstringParser\n\nparser = DocstringParser()\ndoc = parser.parse(func.docstring)\n\n# Access components\nprint(doc.summary)           # Short description\nprint(doc.description)       # Extended description\nprint(doc.parameters)        # List of parameters\nprint(doc.returns)           # Return documentation\nprint(doc.raises)            # List of exceptions\nprint(doc.examples)          # Example code blocks\n\n# Parameter details\nfor param in doc.parameters:\n    print(f\"  {param.name}: {param.type}\")\n    print(f\"    {param.description}\")\n    print(f\"    Default: {param.default}\")\n</code></pre>"},{"location":"guides/docstrings/#filtering-by-docstrings","title":"Filtering by Docstrings","text":""},{"location":"guides/docstrings/#find-functions-without-docstrings","title":"Find Functions Without Docstrings","text":"<pre><code># Functions without any docstring\nno_docs = rj.find_functions().without_docstrings()\n\n# Functions with docstrings\nhas_docs = rj.find_functions().with_docstrings()\n\n# Public functions without docstrings\npublic_no_docs = (\n    rj.find_functions()\n    .filter(lambda f: not f.name.startswith(\"_\"))\n    .without_docstrings()\n)\n</code></pre>"},{"location":"guides/docstrings/#find-incomplete-docstrings","title":"Find Incomplete Docstrings","text":"<pre><code># Functions with docstrings missing parameter documentation\nfrom rejig import DocstringParser\n\nparser = DocstringParser()\n\ndef has_incomplete_docstring(func):\n    if not func.docstring:\n        return False\n    doc = parser.parse(func.docstring)\n    # Check if all parameters are documented\n    param_names = {p.name for p in doc.parameters}\n    func_params = {p.name for p in func.parameters if p.name not in (\"self\", \"cls\")}\n    return func_params - param_names\n\nincomplete = rj.find_functions().filter(has_incomplete_docstring)\n</code></pre>"},{"location":"guides/docstrings/#class-and-module-docstrings","title":"Class and Module Docstrings","text":""},{"location":"guides/docstrings/#class-docstrings","title":"Class Docstrings","text":"<pre><code>cls = rj.find_class(\"MyClass\")\n\n# Generate class docstring\ncls.generate_docstring()\n\n# This documents:\n# - Class purpose\n# - Class attributes\n# - Example usage (optional)\n\n# Before:\n# class MyClass:\n#     name: str\n#     count: int\n\n# After:\n# class MyClass:\n#     \"\"\"Container for named items with count tracking.\n#\n#     Attributes:\n#         name: The name identifier.\n#         count: Number of items.\n#     \"\"\"\n#     name: str\n#     count: int\n</code></pre>"},{"location":"guides/docstrings/#module-docstrings","title":"Module Docstrings","text":"<pre><code>file = rj.file(\"utils.py\")\n\n# Add module docstring\nfile.set_module_docstring(\"\"\"\nUtility functions for data processing.\n\nThis module provides helper functions for common data\nmanipulation tasks including validation, transformation,\nand formatting.\n\"\"\")\n\n# Get existing module docstring\nprint(file.module_docstring)\n</code></pre>"},{"location":"guides/docstrings/#common-patterns","title":"Common Patterns","text":""},{"location":"guides/docstrings/#document-all-public-api","title":"Document All Public API","text":"<pre><code>rj = Rejig(\"src/\")\n\n# Generate docstrings for public API only\nfor func in rj.find_functions():\n    if not func.name.startswith(\"_\") and not func.docstring:\n        func.generate_docstring(style=\"google\")\n\nfor cls in rj.find_classes():\n    if not cls.name.startswith(\"_\"):\n        if not cls.docstring:\n            cls.generate_docstring(style=\"google\")\n        for method in cls.find_methods():\n            if not method.name.startswith(\"_\") and not method.docstring:\n                method.generate_docstring(style=\"google\")\n</code></pre>"},{"location":"guides/docstrings/#migrate-docstring-style","title":"Migrate Docstring Style","text":"<pre><code># Convert entire codebase from Sphinx to Google style\nrj = Rejig(\"src/\")\n\nrj.find_functions().with_docstrings().convert_docstring_style(\"google\")\nrj.find_methods().with_docstrings().convert_docstring_style(\"google\")\nrj.find_classes().with_docstrings().convert_docstring_style(\"google\")\n</code></pre>"},{"location":"guides/docstrings/#sync-docstrings-after-refactoring","title":"Sync Docstrings After Refactoring","text":"<pre><code># After changing function signatures, update all docstrings\nrj = Rejig(\"src/\")\n\n# Update docstrings to match current signatures\nrj.find_functions().with_docstrings().update_docstrings()\nrj.find_methods().with_docstrings().update_docstrings()\n</code></pre>"},{"location":"guides/docstrings/#validate-docstring-coverage","title":"Validate Docstring Coverage","text":"<pre><code># Check docstring coverage for CI\nrj = Rejig(\"src/\")\n\npublic_functions = rj.find_functions().filter(lambda f: not f.name.startswith(\"_\"))\npublic_methods = rj.find_methods().filter(lambda m: not m.name.startswith(\"_\"))\n\nmissing_funcs = public_functions.without_docstrings()\nmissing_methods = public_methods.without_docstrings()\n\nif missing_funcs or missing_methods:\n    print(\"Missing docstrings:\")\n    for func in missing_funcs:\n        print(f\"  Function: {func.file_path}:{func.name}\")\n    for method in missing_methods:\n        print(f\"  Method: {method.file_path}:{method.class_name}.{method.name}\")\n    exit(1)\n</code></pre>"},{"location":"guides/docstrings/#generate-docstrings-from-type-hints","title":"Generate Docstrings from Type Hints","text":"<pre><code># If type hints exist, use them for docstring generation\nfunc.generate_docstring(\n    include_types=True,   # Include types from annotations\n    style=\"google\",\n)\n\n# This produces:\n# def process(data: dict[str, Any], limit: int = 10) -&gt; list[str]:\n#     \"\"\"Process data with limit.\n#\n#     Args:\n#         data (dict[str, Any]): Input data to process.\n#         limit (int): Maximum items. Defaults to 10.\n#\n#     Returns:\n#         list[str]: Processed results.\n#     \"\"\"\n</code></pre>"},{"location":"guides/docstrings/#integration-with-analysis","title":"Integration with Analysis","text":""},{"location":"guides/docstrings/#find-documentation-issues","title":"Find Documentation Issues","text":"<pre><code>issues = rj.find_analysis_issues()\n\n# Find missing docstrings\nmissing = issues.by_type(\"MISSING_DOCSTRING\")\nfor issue in missing:\n    print(f\"{issue.file_path}:{issue.line_number} - {issue.name}\")\n\n# Auto-fix by generating\nfor issue in missing:\n    if issue.target_type == \"function\":\n        rj.find_function(issue.name).generate_docstring()\n    elif issue.target_type == \"method\":\n        # Parse class.method format\n        cls_name, method_name = issue.name.rsplit(\".\", 1)\n        rj.find_class(cls_name).find_method(method_name).generate_docstring()\n</code></pre>"},{"location":"guides/docstrings/#docstring-quality-report","title":"Docstring Quality Report","text":"<pre><code>from rejig import DocstringAnalyzer\n\nanalyzer = DocstringAnalyzer(rj)\nreport = analyzer.analyze()\n\nprint(f\"Total functions: {report.total_functions}\")\nprint(f\"With docstrings: {report.with_docstrings}\")\nprint(f\"Coverage: {report.coverage_percent:.1f}%\")\nprint()\nprint(f\"Style breakdown:\")\nfor style, count in report.styles.items():\n    print(f\"  {style}: {count}\")\nprint()\nprint(f\"Quality issues:\")\nfor issue in report.quality_issues:\n    print(f\"  {issue.file_path}:{issue.name}: {issue.message}\")\n</code></pre>"},{"location":"guides/error-handling/","title":"Error Handling","text":"<p>Rejig uses result objects instead of exceptions for predictable error handling.</p>"},{"location":"guides/error-handling/#design-philosophy","title":"Design Philosophy","text":"<p>Rejig follows a result-oriented approach:</p> <ul> <li>Operations return <code>Result</code> objects, not values</li> <li>Failed operations return <code>ErrorResult</code>, not exceptions</li> <li>Navigation to non-existent targets returns <code>ErrorTarget</code></li> <li>Batch operations return <code>BatchResult</code> with per-target results</li> </ul> <p>This design enables:</p> <ul> <li>Safe chaining \u2014 No need for try/except around every call</li> <li>Graceful degradation \u2014 Handle failures where it makes sense</li> <li>Batch error handling \u2014 Know exactly which operations failed</li> </ul>"},{"location":"guides/error-handling/#result-types","title":"Result Types","text":""},{"location":"guides/error-handling/#result","title":"Result","text":"<p>Successful operations return <code>Result</code>:</p> <pre><code>result = cls.rename(\"NewName\")\n\nresult.success        # True\nresult.message        # \"Renamed User to NewName\"\nresult.files_changed  # [Path(\"models.py\")]\nresult.data           # Optional payload\n</code></pre> <p>Results are truthy when successful:</p> <pre><code>if result:\n    print(\"Success!\")\n</code></pre>"},{"location":"guides/error-handling/#errorresult","title":"ErrorResult","text":"<p>Failed operations return <code>ErrorResult</code>:</p> <pre><code>result = cls.rename(\"NewName\")\n\nif result.is_error():\n    result.success        # False\n    result.message        # \"Class 'User' not found in models.py\"\n    result.operation      # \"rename\"\n    result.target_repr    # \"ClassTarget(name='User')\"\n    result.exception      # Original exception (if any)\n</code></pre>"},{"location":"guides/error-handling/#batchresult","title":"BatchResult","text":"<p>Batch operations return <code>BatchResult</code>:</p> <pre><code>results = classes.add_decorator(\"@slow\")\n\nresults.success          # True only if ALL succeeded\nresults.partial_success  # True if ANY succeeded\nresults.all_failed       # True if ALL failed\nresults.succeeded        # list[Result]\nresults.failed           # list[Result]\n</code></pre>"},{"location":"guides/error-handling/#checking-results","title":"Checking Results","text":""},{"location":"guides/error-handling/#simple-check","title":"Simple Check","text":"<pre><code>result = cls.rename(\"NewName\")\n\nif result:\n    print(\"Renamed successfully\")\nelse:\n    print(f\"Failed: {result.message}\")\n</code></pre>"},{"location":"guides/error-handling/#detailed-check","title":"Detailed Check","text":"<pre><code>result = cls.rename(\"NewName\")\n\nif result.success:\n    print(f\"Changed: {result.files_changed}\")\nelif result.is_error():\n    print(f\"Operation '{result.operation}' failed\")\n    print(f\"Target: {result.target_repr}\")\n    print(f\"Message: {result.message}\")\n</code></pre>"},{"location":"guides/error-handling/#re-raising-exceptions","title":"Re-raising Exceptions","text":"<p>If you want exception behavior:</p> <pre><code>result = cls.rename(\"NewName\")\n\nif result.is_error():\n    result.raise_if_error()  # Raises RuntimeError or original exception\n</code></pre>"},{"location":"guides/error-handling/#errortarget","title":"ErrorTarget","text":"<p>When navigation fails, you get an <code>ErrorTarget</code>:</p> <pre><code># This doesn't raise, even if the class doesn't exist\nmethod = rj.file(\"models.py\").find_class(\"Missing\").find_method(\"save\")\n\nprint(type(method))     # ErrorTarget\nprint(method.exists())  # False\n</code></pre>"},{"location":"guides/error-handling/#safe-chaining","title":"Safe Chaining","text":"<p>ErrorTarget allows chaining without defensive checks:</p> <pre><code># This entire chain is safe\nresult = (\n    rj.file(\"models.py\")\n    .find_class(\"User\")        # Returns ClassTarget or ErrorTarget\n    .find_method(\"save\")       # Returns MethodTarget or ErrorTarget\n    .insert_statement(\"x = 1\") # Returns Result or ErrorResult\n)\n\n# Just check the final result\nif not result:\n    print(f\"Something failed: {result.message}\")\n</code></pre>"},{"location":"guides/error-handling/#navigation-methods-return-errortarget","title":"Navigation Methods Return ErrorTarget","text":"<pre><code>cls = rj.file(\"models.py\").find_class(\"Missing\")\n\n# These return ErrorTarget, not exceptions\ncls.find_method(\"foo\")      # ErrorTarget\ncls.find_methods()          # Empty TargetList\n</code></pre>"},{"location":"guides/error-handling/#operations-return-errorresult","title":"Operations Return ErrorResult","text":"<pre><code>cls = rj.file(\"models.py\").find_class(\"Missing\")\n\n# These return ErrorResult, not exceptions\nresult = cls.rename(\"NewName\")\nprint(result.success)   # False\nprint(result.message)   # \"Class 'Missing' not found\"\n</code></pre>"},{"location":"guides/error-handling/#batch-error-handling","title":"Batch Error Handling","text":""},{"location":"guides/error-handling/#check-overall-status","title":"Check Overall Status","text":"<pre><code>results = classes.add_decorator(\"@slow\")\n\nif results.success:\n    print(\"All operations succeeded\")\nelif results.partial_success:\n    print(f\"{len(results.succeeded)} succeeded, {len(results.failed)} failed\")\nelse:\n    print(\"All operations failed\")\n</code></pre>"},{"location":"guides/error-handling/#handle-individual-failures","title":"Handle Individual Failures","text":"<pre><code>results = classes.add_decorator(\"@slow\")\n\nfor result in results.failed:\n    print(f\"Failed: {result.message}\")\n    # Optionally re-raise\n    # result.raise_if_error()\n</code></pre>"},{"location":"guides/error-handling/#collect-modified-files","title":"Collect Modified Files","text":"<pre><code>results = classes.add_decorator(\"@slow\")\n\nif results.partial_success:\n    print(f\"Modified files: {results.files_changed}\")\n</code></pre>"},{"location":"guides/error-handling/#common-patterns","title":"Common Patterns","text":""},{"location":"guides/error-handling/#try-operation-fall-back","title":"Try Operation, Fall Back","text":"<pre><code># Try to find in one location, fall back to another\ncls = rj.file(\"models.py\").find_class(\"User\")\nif not cls.exists():\n    cls = rj.file(\"base/models.py\").find_class(\"User\")\n\nif cls.exists():\n    cls.add_method(\"validate\")\n</code></pre>"},{"location":"guides/error-handling/#collect-all-errors","title":"Collect All Errors","text":"<pre><code>errors = []\n\nfor cls in rj.find_classes(pattern=\"^Test\"):\n    result = cls.add_decorator(\"@pytest.mark.slow\")\n    if not result:\n        errors.append((cls.name, result.message))\n\nif errors:\n    print(\"Failures:\")\n    for name, msg in errors:\n        print(f\"  {name}: {msg}\")\n</code></pre>"},{"location":"guides/error-handling/#validate-before-bulk-operation","title":"Validate Before Bulk Operation","text":"<pre><code>classes = rj.find_classes(pattern=\"^Test\")\n\n# Check all targets exist before modifying\nmissing = [c for c in classes if not c.exists()]\nif missing:\n    print(f\"Missing classes: {[c.name for c in missing]}\")\nelse:\n    classes.add_decorator(\"@slow\")\n</code></pre>"},{"location":"guides/error-handling/#dry-run-first","title":"Dry Run First","text":"<pre><code># Preview changes\nrj_dry = Rejig(\"src/\", dry_run=True)\nresult = rj_dry.find_classes(\"User\").first().rename(\"UserModel\")\nprint(f\"Would do: {result.message}\")\n\n# If happy, do it for real\nrj = Rejig(\"src/\")\nresult = rj.find_classes(\"User\").first().rename(\"UserModel\")\n</code></pre>"},{"location":"guides/error-handling/#when-to-use-exceptions","title":"When to Use Exceptions","text":"<p>While Rejig prefers results, you might want exceptions for:</p> <ul> <li>Script termination \u2014 Stop on first error</li> <li>Integration with exception-based code \u2014 Match existing patterns</li> <li>Critical operations \u2014 Fail fast</li> </ul> <pre><code>result = cls.rename(\"NewName\")\nif not result:\n    result.raise_if_error()  # Convert to exception\n</code></pre> <p>Or wrap operations:</p> <pre><code>def rename_or_raise(target, new_name):\n    result = target.rename(new_name)\n    if not result:\n        result.raise_if_error()\n    return result\n</code></pre>"},{"location":"guides/error-handling/#next-steps","title":"Next Steps","text":"<ul> <li>Examples \u2014 Real-world patterns</li> <li>API Reference \u2014 Complete Result API</li> </ul>"},{"location":"guides/finding-code/","title":"Finding Code","text":"<p>Rejig provides multiple ways to locate code elements in your codebase.</p>"},{"location":"guides/finding-code/#starting-points","title":"Starting Points","text":""},{"location":"guides/finding-code/#files","title":"Files","text":"<p>Get a target for a specific file:</p> <pre><code># By relative path (relative to Rejig root)\nfile = rj.file(\"mymodule.py\")\nfile = rj.file(\"subdir/utils.py\")\n\n# By absolute path\nfile = rj.file(\"/absolute/path/to/file.py\")\n</code></pre>"},{"location":"guides/finding-code/#modules","title":"Modules","text":"<p>Get a target by Python module path:</p> <pre><code># Dotted module path\nmodule = rj.module(\"myapp.models\")\nmodule = rj.module(\"myapp.utils.helpers\")\n\n# The module is resolved relative to the Rejig root\n</code></pre>"},{"location":"guides/finding-code/#packages","title":"Packages","text":"<p>Get a target for a package directory:</p> <pre><code>pkg = rj.package(\"myapp/\")\npkg = rj.package(\"myapp/subpackage/\")\n</code></pre>"},{"location":"guides/finding-code/#finding-classes","title":"Finding Classes","text":""},{"location":"guides/finding-code/#in-a-specific-file","title":"In a Specific File","text":"<pre><code>file = rj.file(\"models.py\")\n\n# Find by exact name\ncls = file.find_class(\"User\")\n\n# Find all classes\nclasses = file.find_classes()\n\n# Find by pattern\nclasses = file.find_classes(pattern=\"^Base\")  # Classes starting with \"Base\"\n</code></pre>"},{"location":"guides/finding-code/#across-the-project","title":"Across the Project","text":"<pre><code># All classes in the project\nclasses = rj.find_classes()\n\n# By exact name (first match)\ncls = rj.find_classes(\"UserModel\").first()\n\n# By pattern\nclasses = rj.find_classes(pattern=\"^Test\")      # Test classes\nclasses = rj.find_classes(pattern=\"Handler$\")   # Handler classes\nclasses = rj.find_classes(pattern=\".*Mixin.*\")  # Mixin classes\n</code></pre>"},{"location":"guides/finding-code/#finding-functions","title":"Finding Functions","text":""},{"location":"guides/finding-code/#module-level-functions","title":"Module-Level Functions","text":"<pre><code>file = rj.file(\"utils.py\")\n\n# Find by exact name\nfunc = file.find_function(\"calculate\")\n\n# Find all functions\nfuncs = file.find_functions()\n\n# Find by pattern\nfuncs = file.find_functions(pattern=\"^process_\")\n</code></pre>"},{"location":"guides/finding-code/#across-the-project_1","title":"Across the Project","text":"<pre><code># All module-level functions\nfuncs = rj.find_functions()\n\n# By pattern\nfuncs = rj.find_functions(pattern=\"^get_\")\nfuncs = rj.find_functions(pattern=\"_helper$\")\n</code></pre>"},{"location":"guides/finding-code/#finding-methods","title":"Finding Methods","text":"<p>Methods belong to classes:</p> <pre><code>cls = rj.file(\"models.py\").find_class(\"User\")\n\n# Find by exact name\nmethod = cls.find_method(\"save\")\n\n# Find all methods\nmethods = cls.find_methods()\n\n# Find by pattern\nmethods = cls.find_methods(pattern=\"^_\")        # Private methods\nmethods = cls.find_methods(pattern=\"^test_\")    # Test methods\nmethods = cls.find_methods(pattern=\"^get_|^set_\")  # Getters/setters\n</code></pre>"},{"location":"guides/finding-code/#filtering-results","title":"Filtering Results","text":"<p><code>TargetList</code> provides filtering methods:</p> <pre><code>classes = rj.find_classes()\n\n# Filter by predicate\nclasses.filter(lambda c: c.has_docstring())\nclasses.filter(lambda c: c.exists())\n\n# Filter by file\nclasses.in_file(Path(\"models.py\"))\n\n# Filter by name pattern (additional filtering)\nclasses.matching(\"User\")\n</code></pre>"},{"location":"guides/finding-code/#chaining-filters","title":"Chaining Filters","text":"<pre><code># Find test classes without docstrings in the tests directory\ntargets = (\n    rj.find_classes(pattern=\"^Test\")\n    .filter(lambda c: not c.has_docstring())\n    .filter(lambda c: \"tests/\" in str(c.file_path))\n)\n</code></pre>"},{"location":"guides/finding-code/#checking-existence","title":"Checking Existence","text":"<pre><code>cls = rj.file(\"models.py\").find_class(\"User\")\n\nif cls.exists():\n    print(f\"Found User class at line {cls.get_lines()[0]}\")\nelse:\n    print(\"User class not found\")\n</code></pre>"},{"location":"guides/finding-code/#getting-information","title":"Getting Information","text":""},{"location":"guides/finding-code/#class-information","title":"Class Information","text":"<pre><code>cls = rj.find_classes(\"User\").first()\n\ncls.name                  # \"User\"\ncls.file_path             # Path to the file\ncls.exists()              # True if found\ncls.has_docstring()       # True if has docstring\ncls.get_lines()           # (start_line, end_line)\ncls.get_content()         # Result with source code\n</code></pre>"},{"location":"guides/finding-code/#functionmethod-information","title":"Function/Method Information","text":"<pre><code>func = rj.find_functions(\"process\").first()\n\nfunc.name                 # \"process\"\nfunc.file_path            # Path to the file\nfunc.exists()             # True if found\nfunc.has_docstring()      # True if has docstring\nfunc.has_type_hints()     # True if has type annotations\nfunc.get_lines()          # (start_line, end_line)\nfunc.get_content()        # Result with source code\n</code></pre>"},{"location":"guides/finding-code/#finding-by-line","title":"Finding by Line","text":""},{"location":"guides/finding-code/#single-line","title":"Single Line","text":"<pre><code>file = rj.file(\"mymodule.py\")\nline = file.line(42)\n\n# Check what's on this line\ncontent = line.get_content()\n</code></pre>"},{"location":"guides/finding-code/#line-range","title":"Line Range","text":"<pre><code>block = file.lines(10, 20)\ncontent = block.get_content()\n</code></pre>"},{"location":"guides/finding-code/#code-block-at-line","title":"Code Block at Line","text":"<p>Find the enclosing code structure:</p> <pre><code>block = file.block_at_line(42)\n\nprint(block.kind)   # \"class\", \"function\", \"method\", \"if\", \"for\", etc.\nprint(block.name)   # Name if applicable\nprint(block.start_line)\nprint(block.end_line)\n</code></pre>"},{"location":"guides/finding-code/#pattern-syntax","title":"Pattern Syntax","text":"<p>Patterns use Python regular expressions:</p> <pre><code># Starts with\nrj.find_classes(pattern=\"^Test\")\n\n# Ends with\nrj.find_classes(pattern=\"Handler$\")\n\n# Contains\nrj.find_classes(pattern=\".*User.*\")\n\n# Multiple options\nrj.find_functions(pattern=\"^(get|set|delete)_\")\n\n# Case insensitive (use (?i) flag)\nrj.find_classes(pattern=\"(?i)^test\")\n</code></pre>"},{"location":"guides/finding-code/#finding-comments","title":"Finding Comments","text":""},{"location":"guides/finding-code/#all-comments","title":"All Comments","text":"<pre><code>file = rj.file(\"mymodule.py\")\n\n# All comments in a file\ncomments = file.find_comments()\n\n# Filter by content\ntodos = file.find_comments(pattern=\"TODO|FIXME\")\n</code></pre>"},{"location":"guides/finding-code/#across-the-project_2","title":"Across the Project","text":"<pre><code># All comments\ncomments = rj.find_comments()\n\n# TODO/FIXME comments\ntodos = rj.find_comments(pattern=\"TODO|FIXME|XXX|HACK\")\n\n# Comments mentioning a specific topic\nauth_comments = rj.find_comments(pattern=\"(?i)auth|login|password\")\n</code></pre>"},{"location":"guides/finding-code/#comment-properties","title":"Comment Properties","text":"<pre><code>for comment in comments:\n    print(comment.text)         # Comment text (without #)\n    print(comment.line_number)  # Line number\n    print(comment.is_inline)    # True if code precedes comment\n    print(comment.is_todo())    # True if TODO/FIXME/etc.\n</code></pre>"},{"location":"guides/finding-code/#finding-strings","title":"Finding Strings","text":""},{"location":"guides/finding-code/#all-strings","title":"All Strings","text":"<pre><code>file = rj.file(\"mymodule.py\")\n\n# All string literals\nstrings = file.find_strings()\n\n# By content pattern\nurls = file.find_strings(pattern=\"https?://\")\nsql = file.find_strings(pattern=\"SELECT.*FROM\")\n</code></pre>"},{"location":"guides/finding-code/#specific-string-types","title":"Specific String Types","text":"<pre><code># Multiline/triple-quoted strings\nmultiline = file.find_multiline_strings()\n\n# F-strings\nfstrings = file.find_fstrings()\n\n# Docstrings only\ndocstrings = file.find_docstrings()\n</code></pre>"},{"location":"guides/finding-code/#across-the-project_3","title":"Across the Project","text":"<pre><code># Find all SQL queries\nsql_strings = rj.find_sql_strings()\n\n# Find hardcoded user-facing strings (for i18n)\nhardcoded = rj.find_hardcoded_strings(min_length=10)\n\n# Find all multiline strings\nmultiline = rj.find_multiline_strings()\n\n# Find all docstrings\ndocstrings = rj.find_docstrings()\n</code></pre>"},{"location":"guides/finding-code/#string-properties","title":"String Properties","text":"<pre><code>for s in strings:\n    print(s.value)              # Content (unquoted)\n    print(s.kind)               # \"simple\", \"fstring\", \"raw\", etc.\n    print(s.quote_style)        # \"single\", \"double\", \"triple_*\"\n    print(s.is_multiline)       # True for triple-quoted\n    print(s.is_docstring)       # True if it's a docstring\n\n    # Analysis helpers\n    print(s.contains_sql())     # Looks like SQL?\n    print(s.contains_url())     # Contains URL?\n    print(s.contains_path())    # Looks like file path?\n</code></pre>"},{"location":"guides/finding-code/#next-steps","title":"Next Steps","text":"<ul> <li>Modifying Code \u2014 Transform the code you've found</li> <li>Batch Operations \u2014 Work with multiple targets</li> </ul>"},{"location":"guides/imports/","title":"Import Management","text":"<p>Rejig provides comprehensive tools for managing Python imports: organizing, detecting unused imports, finding circular dependencies, and converting between relative and absolute imports.</p>"},{"location":"guides/imports/#adding-and-removing-imports","title":"Adding and Removing Imports","text":""},{"location":"guides/imports/#add-imports","title":"Add Imports","text":"<pre><code>from rejig import Rejig\n\nrj = Rejig(\"src/\")\nfile = rj.file(\"module.py\")\n\n# Add a simple import\nfile.add_import(\"import os\")\n\n# Add a from import\nfile.add_import(\"from typing import Optional, List\")\n\n# Add with alias\nfile.add_import(\"import numpy as np\")\n\n# Add to TYPE_CHECKING block\nfile.add_import(\"from myapp.models import User\", type_checking=True)\n</code></pre>"},{"location":"guides/imports/#remove-imports","title":"Remove Imports","text":"<pre><code># Remove by exact match\nfile.remove_import(\"import os\")\n\n# Remove by pattern (regex)\nfile.remove_import(r\"from deprecated import.*\")\n\n# Remove specific names from a from import\nfile.remove_import_name(\"typing\", \"Optional\")  # Keeps List if imported\n</code></pre>"},{"location":"guides/imports/#finding-imports","title":"Finding Imports","text":""},{"location":"guides/imports/#find-all-imports","title":"Find All Imports","text":"<pre><code>imports = file.find_imports()\n\nfor imp in imports:\n    print(f\"{imp.line_number}: {imp.import_statement}\")\n    print(f\"  Module: {imp.module}\")\n    print(f\"  Names: {imp.get_imported_names()}\")\n    print(f\"  Is from import: {imp.is_from_import}\")\n    print(f\"  Is relative: {imp.is_relative}\")\n</code></pre>"},{"location":"guides/imports/#find-specific-imports","title":"Find Specific Imports","text":"<pre><code># Find imports of a specific module\ntyping_imports = file.find_imports(\"typing\")\n\n# Find imports matching a pattern\ntest_imports = file.find_imports(pattern=r\"^test_\")\n\n# Find relative imports\nrelative = file.find_imports().filter(lambda i: i.is_relative)\n\n# Find TYPE_CHECKING imports\ntype_checking = file.find_imports().filter(lambda i: i.is_type_checking)\n</code></pre>"},{"location":"guides/imports/#import-analysis","title":"Import Analysis","text":""},{"location":"guides/imports/#importinfo-properties","title":"ImportInfo Properties","text":"<p>Each import has detailed information:</p> <pre><code>imp = file.find_imports(\"typing\").first()\n\n# Basic info\nimp.module           # \"typing\"\nimp.names            # [\"Optional\", \"List\"]\nimp.aliases          # {\"List\": \"L\"} if aliased\nimp.line_number      # 5\nimp.import_statement # \"from typing import Optional, List\"\n\n# Type info\nimp.is_from_import   # True\nimp.is_relative      # False\nimp.relative_level   # 0 (1 for \".\", 2 for \"..\", etc.)\nimp.is_future        # True for __future__ imports\nimp.is_type_checking # True if inside TYPE_CHECKING block\n\n# Methods\nimp.get_imported_names()    # [\"Optional\", \"List\"]\nimp.get_original_name(\"L\")  # \"List\" (resolve alias)\n</code></pre>"},{"location":"guides/imports/#detect-unused-imports","title":"Detect Unused Imports","text":"<pre><code>from rejig import ImportAnalyzer\n\nanalyzer = ImportAnalyzer(rj)\n\n# Find unused imports in a file\nunused = analyzer.find_unused_imports(file.path)\nfor imp in unused:\n    print(f\"Unused: {imp.import_statement} at line {imp.line_number}\")\n\n# Remove all unused imports\nfor imp in unused:\n    file.remove_import(imp.import_statement)\n\n# Or use the batch operation\nfile.find_unused_imports().delete_all()\n</code></pre>"},{"location":"guides/imports/#detect-missing-imports","title":"Detect Missing Imports","text":"<pre><code># Find names used but not imported\nmissing = analyzer.find_missing_imports(file.path)\nfor name in missing:\n    print(f\"Missing import for: {name}\")\n\n# Suggest imports for missing names\nsuggestions = analyzer.suggest_imports(file.path)\nfor name, possible_imports in suggestions.items():\n    print(f\"{name} could be imported from: {possible_imports}\")\n</code></pre>"},{"location":"guides/imports/#import-organization","title":"Import Organization","text":"<p>Rejig can organize imports similar to isort:</p> <pre><code>from rejig import ImportOrganizer\n\norganizer = ImportOrganizer(rj)\n\n# Organize imports in a single file\norganizer.organize(file.path)\n\n# Organize all files in the project\norganizer.organize_all()\n\n# Preview changes (dry run)\nrj_dry = Rejig(\"src/\", dry_run=True)\norganizer = ImportOrganizer(rj_dry)\nresult = organizer.organize_all()\nprint(result.diff)\n</code></pre>"},{"location":"guides/imports/#organization-options","title":"Organization Options","text":"<pre><code>organizer = ImportOrganizer(rj)\n\n# Set grouping order\norganizer.configure(\n    sections=[\n        \"FUTURE\",      # __future__ imports\n        \"STDLIB\",      # Standard library\n        \"THIRDPARTY\",  # Third-party packages\n        \"FIRSTPARTY\",  # Your project's packages\n        \"LOCALFOLDER\", # Relative imports\n    ],\n    lines_between_sections=2,\n    lines_between_types=1,  # Between import and from import\n    force_sort_within_sections=True,\n    combine_as_imports=True,\n)\n\norganizer.organize_all()\n</code></pre>"},{"location":"guides/imports/#circular-import-detection","title":"Circular Import Detection","text":"<p>Circular imports can cause runtime errors. Rejig can detect them:</p> <pre><code>from rejig import ImportGraph\n\ngraph = ImportGraph(rj)\n\n# Build the import graph\ngraph.build()\n\n# Find all circular imports\ncycles = graph.find_circular_imports()\nfor cycle in cycles:\n    print(f\"Circular import chain:\")\n    print(f\"  {' -&gt; '.join(cycle.modules)}\")\n\n# Check if a specific import would create a cycle\nwould_cycle = graph.would_create_cycle(\"module_a\", \"module_b\")\n</code></pre>"},{"location":"guides/imports/#import-graph-analysis","title":"Import Graph Analysis","text":"<pre><code># Get all modules that import a specific module\nimporters = graph.get_importers(\"myapp.models\")\nprint(f\"Modules importing myapp.models: {importers}\")\n\n# Get all modules imported by a specific module\nimports = graph.get_imports(\"myapp.views\")\nprint(f\"Modules imported by myapp.views: {imports}\")\n\n# Find the shortest import path between two modules\npath = graph.find_path(\"module_a\", \"module_z\")\nif path:\n    print(f\"Import path: {' -&gt; '.join(path)}\")\n\n# Get dependency depth (how many levels deep)\ndepth = graph.get_depth(\"myapp.views\")\nprint(f\"Import depth: {depth}\")\n</code></pre>"},{"location":"guides/imports/#relativeabsolute-conversion","title":"Relative/Absolute Conversion","text":""},{"location":"guides/imports/#convert-to-relative-imports","title":"Convert to Relative Imports","text":"<pre><code># Convert absolute imports to relative within the same package\nfile.convert_imports_to_relative()\n\n# Example:\n# Before: from myapp.models import User\n# After:  from .models import User\n</code></pre>"},{"location":"guides/imports/#convert-to-absolute-imports","title":"Convert to Absolute Imports","text":"<pre><code># Convert relative imports to absolute\nfile.convert_imports_to_absolute(package_name=\"myapp\")\n\n# Example:\n# Before: from .models import User\n# After:  from myapp.models import User\n</code></pre>"},{"location":"guides/imports/#import-targets","title":"Import Targets","text":"<p>Work with imports as targets for batch operations:</p> <pre><code># Get import targets\nimports = file.find_imports()\n\n# Filter imports\nstdlib = imports.filter(lambda i: i.is_stdlib)\nthird_party = imports.filter(lambda i: not i.is_stdlib and not i.is_first_party)\n\n# Batch operations\nimports.matching(r\"deprecated\").delete_all()\n\n# Add names to existing imports\ntyping_import = imports.matching(\"typing\").first()\nif typing_import:\n    typing_import.add_name(\"Any\")\n    typing_import.add_name(\"Dict\")\n</code></pre>"},{"location":"guides/imports/#common-patterns","title":"Common Patterns","text":""},{"location":"guides/imports/#clean-up-imports-after-refactoring","title":"Clean Up Imports After Refactoring","text":"<pre><code>rj = Rejig(\"src/\")\n\n# After removing code, clean up unused imports\nfor file in rj.find_files():\n    unused = file.find_unused_imports()\n    if unused:\n        unused.delete_all()\n        print(f\"Removed {len(unused)} unused imports from {file.path}\")\n</code></pre>"},{"location":"guides/imports/#migrate-import-style","title":"Migrate Import Style","text":"<pre><code># Convert all typing imports to Python 3.10+ style\nfor file in rj.find_files():\n    # Remove typing imports that are now builtins\n    file.remove_import_name(\"typing\", \"List\")\n    file.remove_import_name(\"typing\", \"Dict\")\n    file.remove_import_name(\"typing\", \"Set\")\n    file.remove_import_name(\"typing\", \"Tuple\")\n    file.remove_import_name(\"typing\", \"Optional\")\n\n    # Clean up empty typing imports\n    typing_import = file.find_imports(\"typing\").first()\n    if typing_import and not typing_import.names:\n        typing_import.delete()\n</code></pre>"},{"location":"guides/imports/#consolidate-imports","title":"Consolidate Imports","text":"<pre><code># Combine multiple imports from the same module\nfrom rejig import ImportOrganizer\n\norganizer = ImportOrganizer(rj)\norganizer.configure(\n    combine_star_imports=False,\n    combine_as_imports=True,\n    force_single_line=False,\n)\norganizer.organize_all()\n\n# Before:\n# from typing import Optional\n# from typing import List\n# from typing import Dict\n\n# After:\n# from typing import Dict, List, Optional\n</code></pre>"},{"location":"guides/imports/#add-type_checking-imports","title":"Add TYPE_CHECKING Imports","text":"<pre><code># Move runtime-only type imports to TYPE_CHECKING block\nfile = rj.file(\"module.py\")\n\n# Add the TYPE_CHECKING import if needed\nfile.add_import(\"from typing import TYPE_CHECKING\")\n\n# Move heavy imports to TYPE_CHECKING\nfile.move_import_to_type_checking(\"from myapp.heavy_module import HeavyClass\")\n</code></pre>"},{"location":"guides/imports/#integration-with-other-features","title":"Integration with Other Features","text":""},{"location":"guides/imports/#with-code-analysis","title":"With Code Analysis","text":"<pre><code># Find files with circular imports\nissues = rj.find_analysis_issues()\ncircular = issues.by_type(\"CIRCULAR_IMPORT\")\nfor issue in circular:\n    print(f\"Circular import in {issue.file_path}: {issue.message}\")\n</code></pre>"},{"location":"guides/imports/#with-modernization","title":"With Modernization","text":"<pre><code># Modernize imports as part of code modernization\nfrom rejig import Rejig\n\nrj = Rejig(\"src/\")\n\n# Modernize type hints (which may affect imports)\nrj.find_functions().modernize_type_hints()\n\n# Then clean up now-unused typing imports\nfor file in rj.find_files():\n    file.find_unused_imports().delete_all()\n</code></pre>"},{"location":"guides/line-operations/","title":"Line Operations","text":"<p>Work with specific lines for fine-grained control.</p>"},{"location":"guides/line-operations/#line-targets","title":"Line Targets","text":""},{"location":"guides/line-operations/#single-line","title":"Single Line","text":"<pre><code>file = rj.file(\"mymodule.py\")\nline = file.line(42)\n</code></pre>"},{"location":"guides/line-operations/#line-range","title":"Line Range","text":"<pre><code>block = file.lines(10, 20)  # Lines 10 through 20\n</code></pre>"},{"location":"guides/line-operations/#code-block-at-line","title":"Code Block at Line","text":"<p>Find the enclosing structure:</p> <pre><code>block = file.block_at_line(42)\n\nprint(block.kind)        # \"class\", \"function\", \"method\", \"if\", \"for\", \"while\", \"try\", \"with\"\nprint(block.name)        # Name if applicable (class/function name)\nprint(block.start_line)  # First line of the block\nprint(block.end_line)    # Last line of the block\n</code></pre>"},{"location":"guides/line-operations/#linting-directives","title":"Linting Directives","text":""},{"location":"guides/line-operations/#type-ignore-mypy","title":"Type Ignore (mypy)","text":"<pre><code>line = file.line(42)\n\n# Add type: ignore\nline.add_type_ignore()                           # Generic\nline.add_type_ignore(\"arg-type\")                 # Specific code\nline.add_type_ignore([\"arg-type\", \"return-value\"])  # Multiple codes\nline.add_type_ignore(\"arg-type\", reason=\"Legacy API\")  # With reason\n\n# Remove\nline.remove_type_ignore()\n</code></pre>"},{"location":"guides/line-operations/#noqa-flake8-ruff","title":"Noqa (flake8, ruff)","text":"<pre><code>line.add_noqa()              # Blanket noqa\nline.add_noqa(\"E501\")        # Specific code\nline.add_noqa([\"E501\", \"F401\"])  # Multiple codes\n\nline.remove_noqa()\n</code></pre>"},{"location":"guides/line-operations/#pylint","title":"Pylint","text":"<pre><code>line.add_pylint_disable(\"line-too-long\")\nline.remove_pylint_disable()\n</code></pre>"},{"location":"guides/line-operations/#formatter-black","title":"Formatter (Black)","text":"<pre><code>line.add_fmt_skip()  # # fmt: skip\n</code></pre>"},{"location":"guides/line-operations/#coverage","title":"Coverage","text":"<pre><code>line.add_no_cover()     # pragma: no cover\nline.remove_no_cover()\n</code></pre>"},{"location":"guides/line-operations/#todo-comments","title":"TODO Comments","text":""},{"location":"guides/line-operations/#adding-todos","title":"Adding TODOs","text":"<pre><code>line.add_todo(\"Refactor this\")\nline.add_todo(\"Fix bug\", type=\"FIXME\")\nline.add_todo(\"Needs review\", type=\"TODO\", author=\"jane\")\n</code></pre>"},{"location":"guides/line-operations/#removing-todos","title":"Removing TODOs","text":"<pre><code>line.remove_todo()\n</code></pre>"},{"location":"guides/line-operations/#linking-to-issues","title":"Linking to Issues","text":"<pre><code>line.link_to_issue(\"#123\")\n</code></pre>"},{"location":"guides/line-operations/#line-block-operations","title":"Line Block Operations","text":""},{"location":"guides/line-operations/#content-access","title":"Content Access","text":"<pre><code>block = file.lines(10, 20)\n\nresult = block.get_content()\nif result:\n    print(result.data)\n</code></pre>"},{"location":"guides/line-operations/#moving-lines","title":"Moving Lines","text":"<pre><code># Move to another position in the same file\nblock.move_to(100)\n\n# Move to another file\nblock.move_to_file(\"other.py\", after_line=10)\n</code></pre>"},{"location":"guides/line-operations/#rewriting","title":"Rewriting","text":"<pre><code>block.rewrite(\"\"\"\ndef new_function():\n    pass\n\"\"\")\n</code></pre>"},{"location":"guides/line-operations/#inserting","title":"Inserting","text":"<pre><code>block.prepend(\"# Section start\\n\")\nblock.append(\"# Section end\\n\")\n</code></pre>"},{"location":"guides/line-operations/#deleting","title":"Deleting","text":"<pre><code>block.delete()\n</code></pre>"},{"location":"guides/line-operations/#indentation","title":"Indentation","text":"<pre><code>block.indent()      # Indent by 1 level\nblock.indent(2)     # Indent by 2 levels\nblock.dedent()      # Dedent by 1 level\nblock.dedent(2)     # Dedent by 2 levels\n</code></pre>"},{"location":"guides/line-operations/#directive-wrapping","title":"Directive Wrapping","text":"<p>Wrap a block of lines with directives:</p> <pre><code>block = file.lines(10, 20)\n\n# Wrap with fmt: off/on\nblock.wrap_with_fmt_off()\n\n# Wrap with pylint disable/enable\nblock.wrap_with_pylint_disable([\"C0114\", \"C0115\"])\n\n# Wrap with pragma: no cover\nblock.wrap_with_no_cover()\n</code></pre>"},{"location":"guides/line-operations/#converting-to-line-block","title":"Converting to Line Block","text":"<p>Code blocks can be converted to line blocks for raw operations:</p> <pre><code>code_block = file.block_at_line(42)\nline_block = code_block.to_line_block()\n\n# Now you can use line block operations\nline_block.indent()\nline_block.move_to(100)\n</code></pre>"},{"location":"guides/line-operations/#project-wide-directive-operations","title":"Project-Wide Directive Operations","text":""},{"location":"guides/line-operations/#finding-directives","title":"Finding Directives","text":"<pre><code># All type: ignore comments\nrj.find_type_ignores()\n\n# Bare ignores (without specific codes)\nrj.find_bare_type_ignores()\n\n# Other directive types\nrj.find_noqa_comments()\nrj.find_pylint_disables()\nrj.find_fmt_off_regions()\nrj.find_no_cover_comments()\n\n# Everything\nrj.find_all_directives()\n</code></pre>"},{"location":"guides/line-operations/#cleaning-up","title":"Cleaning Up","text":"<pre><code># Remove directives that are no longer needed\nrj.remove_unused_type_ignores()\nrj.remove_unused_noqa()\nrj.remove_unused_pylint_disables()\n\n# Upgrade bare ignores to specific codes\nrj.add_error_codes_to_type_ignores()\n\n# Normalize formatting\nrj.normalize_directive_style()\n</code></pre>"},{"location":"guides/line-operations/#auditing","title":"Auditing","text":"<pre><code># Get statistics\nstats = rj.count_directives_by_type()\n\n# Find potentially stale directives\nrj.find_stale_directives()\n\n# Full audit report\nrj.audit_directives()\n</code></pre>"},{"location":"guides/line-operations/#next-steps","title":"Next Steps","text":"<ul> <li>Batch Operations \u2014 Apply operations to multiple targets</li> <li>Error Handling \u2014 Handle failures gracefully</li> </ul>"},{"location":"guides/modifying-code/","title":"Modifying Code","text":"<p>Once you've found code elements, you can transform them.</p>"},{"location":"guides/modifying-code/#class-operations","title":"Class Operations","text":""},{"location":"guides/modifying-code/#renaming","title":"Renaming","text":"<pre><code>cls = rj.find_classes(\"OldName\").first()\nresult = cls.rename(\"NewName\")\n</code></pre>"},{"location":"guides/modifying-code/#adding-methods","title":"Adding Methods","text":"<pre><code>cls = rj.file(\"models.py\").find_class(\"User\")\n\n# Simple method\ncls.add_method(\"validate\", body=\"return True\")\n\n# With parameters and return type\ncls.add_method(\n    \"get_display_name\",\n    parameters=\"self, include_title: bool = False\",\n    return_type=\"str\",\n    body=\"return f'{self.first_name} {self.last_name}'\"\n)\n\n# With decorator\ncls.add_method(\n    \"cached_value\",\n    body=\"return self._compute()\",\n    decorators=[\"@cached_property\"]\n)\n</code></pre>"},{"location":"guides/modifying-code/#adding-attributes","title":"Adding Attributes","text":"<pre><code>cls.add_attribute(\"created_at\", type_hint=\"datetime\", default=\"None\")\ncls.add_attribute(\"MAX_RETRIES\", type_hint=\"int\", default=\"3\")\n</code></pre>"},{"location":"guides/modifying-code/#adding-decorators","title":"Adding Decorators","text":"<pre><code>cls.add_decorator(\"dataclass\")\ncls.add_decorator(\"dataclass(frozen=True)\")\n</code></pre>"},{"location":"guides/modifying-code/#removing-decorators","title":"Removing Decorators","text":"<pre><code>cls.remove_decorator(\"dataclass\")\n</code></pre>"},{"location":"guides/modifying-code/#inheritance","title":"Inheritance","text":"<pre><code>cls.add_base_class(\"BaseModel\")\ncls.remove_base_class(\"OldBase\")\ncls.add_mixin(\"LoggingMixin\")\n</code></pre>"},{"location":"guides/modifying-code/#deleting","title":"Deleting","text":"<pre><code>cls.delete()\n</code></pre>"},{"location":"guides/modifying-code/#duplicating","title":"Duplicating","text":"<pre><code>cls.duplicate(\"UserCopy\")\n</code></pre>"},{"location":"guides/modifying-code/#method-operations","title":"Method Operations","text":""},{"location":"guides/modifying-code/#renaming_1","title":"Renaming","text":"<pre><code>method = cls.find_method(\"old_name\")\nmethod.rename(\"new_name\")\n</code></pre>"},{"location":"guides/modifying-code/#adding-decorators_1","title":"Adding Decorators","text":"<pre><code>method.add_decorator(\"staticmethod\")\nmethod.add_decorator(\"lru_cache(maxsize=100)\")\n</code></pre>"},{"location":"guides/modifying-code/#removing-decorators_1","title":"Removing Decorators","text":"<pre><code>method.remove_decorator(\"staticmethod\")\n</code></pre>"},{"location":"guides/modifying-code/#inserting-statements","title":"Inserting Statements","text":"<pre><code># At the start of the method body\nmethod.insert_statement(\"self.validate()\", position=\"start\")\n\n# At the end of the method body\nmethod.insert_statement(\"self.log_action()\", position=\"end\")\n</code></pre>"},{"location":"guides/modifying-code/#parameters","title":"Parameters","text":"<pre><code># Add a parameter\nmethod.add_parameter(\"timeout\", type=\"int\", default=\"30\")\n\n# Remove a parameter\nmethod.remove_parameter(\"deprecated_arg\")\n\n# Rename a parameter\nmethod.rename_parameter(\"old_name\", \"new_name\")\n</code></pre>"},{"location":"guides/modifying-code/#type-hints","title":"Type Hints","text":"<pre><code>method.set_return_type(\"list[str]\")\nmethod.set_parameter_type(\"data\", \"dict[str, Any]\")\nmethod.remove_type_hints()  # Strip all type annotations\n</code></pre>"},{"location":"guides/modifying-code/#deleting_1","title":"Deleting","text":"<pre><code>method.delete()\n</code></pre>"},{"location":"guides/modifying-code/#extracting-to-function","title":"Extracting to Function","text":"<pre><code># Extract method to a module-level function\nmethod.extract_to_function(\"helper_process\")\n</code></pre>"},{"location":"guides/modifying-code/#function-operations","title":"Function Operations","text":"<p>Functions support the same operations as methods:</p> <pre><code>func = rj.file(\"utils.py\").find_function(\"process\")\n\nfunc.rename(\"process_data\")\nfunc.add_decorator(\"lru_cache\")\nfunc.insert_statement(\"logger.debug('Starting')\", position=\"start\")\nfunc.add_parameter(\"verbose\", type=\"bool\", default=\"False\")\nfunc.set_return_type(\"ProcessResult\")\nfunc.delete()\n</code></pre>"},{"location":"guides/modifying-code/#file-operations","title":"File Operations","text":""},{"location":"guides/modifying-code/#adding-imports","title":"Adding Imports","text":"<pre><code>file = rj.file(\"mymodule.py\")\n\nfile.add_import(\"from typing import Optional\")\nfile.add_import(\"import json\")\nfile.add_import(\"from myapp.utils import helper\")\n</code></pre>"},{"location":"guides/modifying-code/#organizing-imports","title":"Organizing Imports","text":"<pre><code>file.organize_imports()           # Sort and group imports\nfile.remove_unused_imports()      # Remove imports not used in file\nfile.add_missing_imports()        # Add imports for undefined names\n</code></pre>"},{"location":"guides/modifying-code/#converting-import-styles","title":"Converting Import Styles","text":"<pre><code>file.convert_relative_to_absolute()   # from .utils \u2192 from mypackage.utils\nfile.convert_absolute_to_relative()   # from mypackage.utils \u2192 from .utils\n</code></pre>"},{"location":"guides/modifying-code/#adding-functionsclasses","title":"Adding Functions/Classes","text":"<pre><code>file.add_function(\"main\", body=\"print('Hello')\")\nfile.add_class(\"Config\", body=\"DEBUG = True\")\n</code></pre>"},{"location":"guides/modifying-code/#async-conversions","title":"Async Conversions","text":"<pre><code>func = rj.find_functions(\"fetch_data\").first()\n\n# Convert sync to async\nfunc.convert_to_async()\n\n# Convert async to sync\nfunc.convert_to_sync()\n</code></pre>"},{"location":"guides/modifying-code/#docstrings","title":"Docstrings","text":""},{"location":"guides/modifying-code/#generating","title":"Generating","text":"<pre><code>func.generate_docstring(style=\"google\")  # or \"numpy\", \"sphinx\"\ncls.generate_docstrings()  # Generate for all methods\n</code></pre>"},{"location":"guides/modifying-code/#updating","title":"Updating","text":"<pre><code>method.update_docstring_param(\"timeout\", \"Maximum wait time in seconds\")\nmethod.add_docstring_raises(\"ValueError\", \"If input is negative\")\nmethod.add_docstring_example(\"&gt;&gt;&gt; process(5)\\\\n10\")\nmethod.add_docstring_returns(\"The processed result\")\n</code></pre>"},{"location":"guides/modifying-code/#converting-styles","title":"Converting Styles","text":"<pre><code>file.convert_docstring_style(\"google\", \"numpy\")\n</code></pre>"},{"location":"guides/modifying-code/#type-hint-modernization","title":"Type Hint Modernization","text":"<pre><code># Modernize type hints (Python 3.10+ style)\nfile.modernize_type_hints()  # List[str] \u2192 list[str], Optional[X] \u2192 X | None\n\n# Convert type comments to annotations\nfile.convert_type_comments_to_annotations()  # # type: str \u2192 : str\n</code></pre>"},{"location":"guides/modifying-code/#class-conversions","title":"Class Conversions","text":"<pre><code>cls = rj.find_classes(\"Config\").first()\n\n# Convert to dataclass\ncls.convert_to_dataclass()\n\n# Convert from dataclass\ncls.convert_from_dataclass()\n\n# Other conversions\ncls.convert_to_pydantic_model()\ncls.convert_to_typed_dict()\ncls.convert_to_named_tuple()\n</code></pre>"},{"location":"guides/modifying-code/#generating-dunder-methods","title":"Generating Dunder Methods","text":"<pre><code>cls.generate_init_from_attributes()\ncls.generate_repr()\ncls.generate_eq()\ncls.generate_hash()\ncls.generate_all_dunders()  # All of the above\n</code></pre>"},{"location":"guides/modifying-code/#properties","title":"Properties","text":"<pre><code># Convert attribute to property\ncls.convert_attribute_to_property(\"_name\", getter=True, setter=True)\n\n# Add a computed property\ncls.add_property(\"full_name\", getter=\"return f'{self.first} {self.last}'\")\n</code></pre>"},{"location":"guides/modifying-code/#comment-operations","title":"Comment Operations","text":""},{"location":"guides/modifying-code/#rewriting-comments","title":"Rewriting Comments","text":"<pre><code># Find and rewrite a comment\ncomments = file.find_comments(pattern=\"TODO\")\nfor comment in comments:\n    comment.rewrite(f\"DONE: {comment.text}\")\n</code></pre>"},{"location":"guides/modifying-code/#deleting-comments","title":"Deleting Comments","text":"<pre><code># Remove all TODO comments\nfor comment in file.find_comments(pattern=\"TODO\"):\n    comment.delete()\n\n# Remove a specific comment\ncomment = file.find_comments(pattern=\"temporary hack\").first()\ncomment.delete()\n</code></pre>"},{"location":"guides/modifying-code/#converting-to-docstrings","title":"Converting to Docstrings","text":"<pre><code># Convert a comment preceding a function to a docstring\n# Before: # Processes the input data\n#         def process(): ...\n# After:  def process():\n#             \"\"\"Processes the input data.\"\"\"\ncomment = file.find_comments(pattern=\"Processes the\").first()\ncomment.convert_to_docstring()\n</code></pre>"},{"location":"guides/modifying-code/#string-literal-operations","title":"String Literal Operations","text":""},{"location":"guides/modifying-code/#rewriting-string-content","title":"Rewriting String Content","text":"<pre><code># Replace string content (preserves quote style)\nstrings = file.find_strings(pattern=\"old_value\")\nfor s in strings:\n    s.rewrite(\"new_value\")\n</code></pre>"},{"location":"guides/modifying-code/#converting-to-f-strings","title":"Converting to F-Strings","text":"<pre><code># Convert .format() calls to f-strings\n# Before: \"Hello {}\".format(name)\n# After:  f\"Hello {name}\"\nfor s in file.find_strings(pattern=\"\\\\.format\\\\(\"):\n    s.convert_to_fstring()\n</code></pre>"},{"location":"guides/modifying-code/#converting-to-raw-strings","title":"Converting to Raw Strings","text":"<pre><code># Add r prefix for regex patterns\nfor s in file.find_strings(pattern=\"\\\\\\\\d\\\\+\"):\n    s.convert_to_raw()\n# Before: \"\\\\d+\"\n# After:  r\"\\d+\"\n</code></pre>"},{"location":"guides/modifying-code/#converting-to-multiline","title":"Converting to Multiline","text":"<pre><code># Convert long strings to triple-quoted\nfor s in file.find_strings():\n    if len(s.value) &gt; 80:\n        s.convert_to_multiline()\n</code></pre>"},{"location":"guides/modifying-code/#changing-quote-style","title":"Changing Quote Style","text":"<pre><code># Standardize to double quotes\nfor s in file.find_strings():\n    if s.quote_style == \"single\":\n        s.change_quote_style(\"double\")\n\n# Quote style options: \"single\", \"double\", \"triple_single\", \"triple_double\"\n</code></pre>"},{"location":"guides/modifying-code/#deleting-strings","title":"Deleting Strings","text":"<pre><code># Remove debug strings\nfor s in file.find_strings(pattern=\"DEBUG:\"):\n    s.delete()\n</code></pre>"},{"location":"guides/modifying-code/#result-handling","title":"Result Handling","text":"<p>All operations return a <code>Result</code>:</p> <pre><code>result = cls.rename(\"NewName\")\n\nif result:\n    print(f\"Modified: {result.files_changed}\")\nelse:\n    print(f\"Failed: {result.message}\")\n    if result.exception:\n        result.raise_if_error()  # Re-raise if you want\n</code></pre>"},{"location":"guides/modifying-code/#next-steps","title":"Next Steps","text":"<ul> <li>Line Operations \u2014 Work with specific lines</li> <li>Batch Operations \u2014 Apply changes to multiple targets</li> <li>Error Handling \u2014 Handle failures gracefully</li> </ul>"},{"location":"guides/patching/","title":"Patching","text":"<p>Rejig provides comprehensive support for working with unified diffs and git patches. You can parse patches, apply them, generate them from rejig operations, convert them to rejig code, and reverse them for undo operations.</p>"},{"location":"guides/patching/#quick-start","title":"Quick Start","text":"<pre><code>from rejig import Rejig\n\nrj = Rejig(\"src/\")\n\n# Load and apply a patch\npatch = rj.patch_from_file(\"changes.patch\")\nprint(f\"Files: {patch.file_count}, +{patch.total_additions}/-{patch.total_deletions}\")\nresult = patch.apply()\n\n# Generate a patch from rejig operations\nresult = rj.find_class(\"Foo\").rename(\"Bar\")\npatch = rj.generate_patch(result)\npatch.save(\"rename.patch\")\n\n# Reverse a patch (undo)\nundo = patch.reverse()\nundo.apply()\n</code></pre>"},{"location":"guides/patching/#parsing-patches","title":"Parsing Patches","text":""},{"location":"guides/patching/#from-a-string","title":"From a String","text":"<pre><code>diff_text = \"\"\"\n--- a/models.py\n+++ b/models.py\n@@ -10,3 +10,4 @@ class User:\n     def __init__(self):\n         self.name = \"\"\n+        self.email = \"\"\n\"\"\"\n\npatch = rj.patch(diff_text)\nprint(f\"Files affected: {patch.file_count}\")\nprint(f\"Lines added: {patch.total_additions}\")\nprint(f\"Lines removed: {patch.total_deletions}\")\n</code></pre>"},{"location":"guides/patching/#from-a-file","title":"From a File","text":"<pre><code># Load from patch file\npatch = rj.patch_from_file(\"bugfix.patch\")\n\n# Returns empty patch if file doesn't exist (no exception)\npatch = rj.patch_from_file(\"missing.patch\")\nprint(patch.file_count)  # 0\n</code></pre>"},{"location":"guides/patching/#supported-formats","title":"Supported Formats","text":"<p>Rejig supports both unified diff and git diff formats:</p> <p>Unified Diff (from <code>diff -u</code>): <pre><code>--- a/file.py\n+++ b/file.py\n@@ -1,3 +1,4 @@\n line1\n+inserted\n line2\n line3\n</code></pre></p> <p>Git Diff (from <code>git diff</code>): <pre><code>diff --git a/file.py b/file.py\nindex abc1234..def5678 100644\n--- a/file.py\n+++ b/file.py\n@@ -1,3 +1,4 @@\n line1\n+inserted\n line2\n line3\n</code></pre></p> <p>Git extended format features are fully supported: - New file mode (<code>new file mode 100644</code>) - Deleted file mode (<code>deleted file mode 100644</code>) - Renames (<code>rename from</code>, <code>rename to</code>, <code>similarity index</code>) - Mode changes (<code>old mode</code>, <code>new mode</code>) - Binary file detection</p>"},{"location":"guides/patching/#inspecting-patches","title":"Inspecting Patches","text":""},{"location":"guides/patching/#patch-properties","title":"Patch Properties","text":"<pre><code>patch = rj.patch_from_file(\"changes.patch\")\n\n# Basic stats\nprint(f\"Total files: {patch.file_count}\")\nprint(f\"Additions: {patch.total_additions}\")\nprint(f\"Deletions: {patch.total_deletions}\")\n\n# File paths affected\nfor path in patch.paths:\n    print(f\"  {path}\")\n</code></pre>"},{"location":"guides/patching/#filtering-by-file-type","title":"Filtering by File Type","text":"<pre><code># New files being added\nfor fp in patch.new_files:\n    print(f\"New: {fp.path}\")\n\n# Files being deleted\nfor fp in patch.deleted_files:\n    print(f\"Deleted: {fp.old_path}\")\n\n# Files being renamed\nfor fp in patch.renamed_files:\n    print(f\"Renamed: {fp.old_path} -&gt; {fp.new_path}\")\n\n# Files being modified (content only)\nfor fp in patch.modified_files:\n    print(f\"Modified: {fp.path}\")\n</code></pre>"},{"location":"guides/patching/#navigating-to-files-and-hunks","title":"Navigating to Files and Hunks","text":"<pre><code>patch = rj.patch_from_file(\"changes.patch\")\n\n# Iterate over file targets\nfor file_target in patch.files():\n    print(f\"\\n{file_target.path}:\")\n    print(f\"  +{file_target.additions_count}/-{file_target.deletions_count}\")\n\n    # Iterate over hunks\n    for hunk in file_target.hunks():\n        print(f\"  @@ {hunk.old_start},{hunk.old_count} -&gt; {hunk.new_start},{hunk.new_count}\")\n\n# Look up specific file\nfile_target = patch.file(\"src/models.py\")\nif file_target:\n    print(f\"Found changes to models.py\")\n\n    # Look up specific hunk\n    first_hunk = file_target.hunk(0)\n    if first_hunk:\n        print(f\"First hunk starts at line {first_hunk.old_start}\")\n</code></pre>"},{"location":"guides/patching/#getting-content","title":"Getting Content","text":"<pre><code># Get hunk content\nhunk = patch.file(\"src/models.py\").hunk(0)\n\n# Original content (what was removed + context)\nold_content = hunk.get_old_content()\n\n# New content (what was added + context)\nnew_content = hunk.get_new_content()\n\n# Full patch as unified diff\ndiff_text = patch.to_unified_diff()\n</code></pre>"},{"location":"guides/patching/#summary","title":"Summary","text":"<pre><code># Get a human-readable summary\nprint(patch.summary())\n\n# Output:\n# Patch: 3 file(s)\n#   +42/-15 lines\n#   New: 1\n#   Modified: 2\n# Files:\n#   src/new_module.py (new): +30/-0\n#   src/models.py: +10/-5\n#   src/utils.py: +2/-10\n</code></pre>"},{"location":"guides/patching/#applying-patches","title":"Applying Patches","text":""},{"location":"guides/patching/#basic-apply","title":"Basic Apply","text":"<pre><code>rj = Rejig(\"src/\")\npatch = rj.patch_from_file(\"changes.patch\")\n\n# Apply all changes\nresult = patch.apply()\n\nif result.success:\n    print(f\"Applied to {len(result.files_changed)} files\")\nelse:\n    print(f\"Failed: {result.message}\")\n</code></pre>"},{"location":"guides/patching/#dry-run-mode","title":"Dry Run Mode","text":"<pre><code>rj = Rejig(\"src/\", dry_run=True)\npatch = rj.patch_from_file(\"changes.patch\")\n\n# Preview what would happen\nresult = patch.apply()\nprint(result.diff)  # Shows diff without writing files\n</code></pre>"},{"location":"guides/patching/#apply-individual-files-or-hunks","title":"Apply Individual Files or Hunks","text":"<pre><code>patch = rj.patch_from_file(\"changes.patch\")\n\n# Apply only changes to a specific file\nfile_target = patch.file(\"src/models.py\")\nif file_target:\n    result = file_target.apply()\n\n# Apply a specific hunk (use with caution - line numbers may shift)\nhunk = file_target.hunk(0)\nresult = hunk.apply()\n</code></pre>"},{"location":"guides/patching/#generating-patches","title":"Generating Patches","text":""},{"location":"guides/patching/#from-a-single-result","title":"From a Single Result","text":"<pre><code>rj = Rejig(\"src/\", dry_run=True)\n\n# Perform an operation\nresult = rj.find_class(\"OldName\").rename(\"NewName\")\n\n# Generate a patch from the result\npatch = rj.generate_patch(result)\npatch.save(\"rename.patch\")\n</code></pre>"},{"location":"guides/patching/#from-a-batchresult","title":"From a BatchResult","text":"<pre><code>rj = Rejig(\"src/\", dry_run=True)\n\n# Perform batch operations\nbatch = rj.find_classes(pattern=\"^Test\").add_decorator(\"pytest.mark.slow\")\n\n# Generate patch from all changes\npatch = rj.generate_patch(batch)\nprint(patch.summary())\n</code></pre>"},{"location":"guides/patching/#from-a-transaction","title":"From a Transaction","text":"<pre><code>rj = Rejig(\"src/\", dry_run=True)\n\nwith rj.transaction() as tx:\n    rj.find_class(\"Foo\").rename(\"Bar\")\n    rj.find_function(\"helper\").add_decorator(\"cache\")\n    rj.find_method(\"process\").add_parameter(\"timeout\", \"int\", \"30\")\n\n    # Generate patch from transaction (before commit)\n    patch = rj.generate_patch(tx)\n    patch.save(\"refactoring.patch\")\n</code></pre>"},{"location":"guides/patching/#saving-patches","title":"Saving Patches","text":"<pre><code>patch = rj.generate_patch(result)\n\n# Save to file\nresult = patch.save(\"output.patch\")\nif result.success:\n    print(f\"Saved to {result.files_changed[0]}\")\n\n# Overwrite existing file\nresult = patch.save(\"output.patch\", overwrite=True)\n\n# Get as string instead of saving\ndiff_text = patch.to_unified_diff()\n</code></pre>"},{"location":"guides/patching/#reversing-patches","title":"Reversing Patches","text":"<p>Create a reversed patch to undo changes:</p> <pre><code># Load original patch\npatch = rj.patch_from_file(\"changes.patch\")\n\n# Create reversed version\nundo_patch = patch.reverse()\n\n# Apply to undo the original changes\nresult = undo_patch.apply()\n\n# Or save for later\nundo_patch.save(\"undo-changes.patch\")\n</code></pre> <p>Reversal works at all levels:</p> <pre><code># Reverse entire patch\nundo_patch = patch.reverse()\n\n# Reverse a specific file's changes\nundo_file = patch.file(\"models.py\").reverse()\n\n# Reverse a specific hunk\nundo_hunk = patch.file(\"models.py\").hunk(0).reverse()\n</code></pre>"},{"location":"guides/patching/#converting-to-rejig-code","title":"Converting to Rejig Code","text":"<p>Convert a patch to equivalent rejig Python code:</p> <pre><code>patch = rj.patch_from_file(\"changes.patch\")\n\n# Generate rejig code\ncode = patch.to_rejig_code()\nprint(code)\n\n# Output might be:\n# rj.file(\"src/models.py\").find_class(\"OldName\").rename(\"NewName\")\n# rj.file(\"src/utils.py\").lines(10, 15).rewrite(\"...\")\n</code></pre>"},{"location":"guides/patching/#smart-mode-vs-line-mode","title":"Smart Mode vs Line Mode","text":"<pre><code># Smart mode (default): Detects high-level operations\ncode = patch.to_rejig_code(smart_mode=True)\n# Output: rj.file(\"src/models.py\").find_class(\"Foo\").rename(\"Bar\")\n\n# Line mode: Always uses line-based operations (more reliable)\ncode = patch.to_rejig_code(smart_mode=False)\n# Output: rj.file(\"src/models.py\").lines(10, 15).rewrite(\"...\")\n</code></pre>"},{"location":"guides/patching/#custom-variable-name","title":"Custom Variable Name","text":"<pre><code>code = patch.to_rejig_code(variable_name=\"refactor\")\n# Output: refactor.file(\"src/models.py\").find_class(\"Foo\").rename(\"Bar\")\n</code></pre>"},{"location":"guides/patching/#generating-python-scripts","title":"Generating Python Scripts","text":"<p>Convert a patch to a complete, executable Python script that applies the changes using rejig operations:</p> <pre><code>patch = rj.patch_from_file(\"changes.patch\")\n\n# Generate a complete Python script\nscript = patch.to_script()\nprint(script)\n</code></pre> <p>The generated script includes: - Shebang line (<code>#!/usr/bin/env python3</code>) - Module docstring with patch metadata - Imports - Patch summary as comments - Main function with error handling - Standard <code>if __name__ == \"__main__\"</code> block</p>"},{"location":"guides/patching/#saving-scripts","title":"Saving Scripts","text":"<pre><code># Save the script directly to a file\nresult = patch.save_script(\"apply_changes.py\")\nif result.success:\n    print(f\"Script saved to {result.files_changed[0]}\")\n\n# Overwrite existing file\nresult = patch.save_script(\"apply_changes.py\", overwrite=True)\n</code></pre> <p>The saved script is automatically made executable.</p>"},{"location":"guides/patching/#script-options","title":"Script Options","text":"<pre><code># Full control over script generation\nscript = patch.to_script(\n    variable_name=\"refactor\",       # Name for Rejig instance\n    root_path=\"src/\",               # Root path in the script\n    description=\"Apply bugfix\",     # Custom docstring description\n    dry_run=True,                   # Generate dry-run mode script\n    smart_mode=False,               # Use line-based operations\n    include_error_handling=True,    # Include result checking\n    include_summary=True,           # Include patch summary comments\n)\n</code></pre>"},{"location":"guides/patching/#example-generated-script","title":"Example Generated Script","text":"<p>For a simple rename patch, the generated script looks like:</p> <pre><code>#!/usr/bin/env python3\n\"\"\"\nApply bugfix\n\nGenerated from patch: +5/-3 lines\n\"\"\"\n\nfrom pathlib import Path\n\nfrom rejig import Rejig\n\n\n# Patch Summary\n# Files: 1\n# Additions: +5\n# Deletions: -3\n#   src/models.py: +5/-3\n\n\ndef main() -&gt; None:\n    \"\"\"Apply the patch changes.\"\"\"\n    rj = Rejig(\"src/\")\n\n    # Apply changes\n    results = []\n\n    result = rj.file(\"src/models.py\").find_class(\"OldName\").rename(\"NewName\")\n    results.append(result)\n    if not result.success:\n        print(f\"Warning: {result.message}\")\n\n    # Report results\n    success_count = sum(1 for r in results if r.success)\n    total_count = len(results)\n    print(f\"Completed: {success_count}/{total_count} operations succeeded\")\n\n    if success_count &lt; total_count:\n        failed = [r for r in results if not r.success]\n        for r in failed:\n            print(f\"  Failed: {r.message}\")\n\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>"},{"location":"guides/patching/#use-cases","title":"Use Cases","text":"<p>Share refactoring as executable script: <pre><code># Generate a script that teammates can run\npatch = rj.patch_from_file(\"migration.patch\")\npatch.save_script(\"run_migration.py\", description=\"Database model migration\")\n</code></pre></p> <p>Create dry-run preview scripts: <pre><code># Generate a script that previews changes without applying\npatch.save_script(\n    \"preview_changes.py\",\n    dry_run=True,\n    description=\"Preview the refactoring changes\",\n)\n</code></pre></p> <p>Generate scripts for CI/CD: <pre><code># Generate a script for automated pipelines\npatch.save_script(\n    \"apply_in_ci.py\",\n    root_path=\"${PROJECT_ROOT}\",\n    include_error_handling=True,\n)\n</code></pre></p>"},{"location":"guides/patching/#analyzing-patches","title":"Analyzing Patches","text":"<p>Detect what operations a patch represents:</p> <pre><code>from rejig.patching import OperationType\n\npatch = rj.patch_from_file(\"changes.patch\")\n\n# Get detected operations\noperations = patch.analyze()\n\nfor op in operations:\n    print(f\"{op.type.name}: {op.details}\")\n    print(f\"  File: {op.file_path}\")\n    print(f\"  Confidence: {op.confidence}\")\n</code></pre>"},{"location":"guides/patching/#detected-operation-types","title":"Detected Operation Types","text":"<p>The analyzer can detect:</p> Operation Description <code>CLASS_ADD</code> New class definition added <code>CLASS_DELETE</code> Class definition removed <code>CLASS_RENAME</code> Class renamed (detected from paired add/delete) <code>FUNCTION_ADD</code> New module-level function added <code>FUNCTION_DELETE</code> Module-level function removed <code>FUNCTION_RENAME</code> Function renamed <code>METHOD_ADD</code> New method added to a class <code>METHOD_DELETE</code> Method removed from a class <code>METHOD_RENAME</code> Method renamed <code>DECORATOR_ADD</code> Decorator added <code>DECORATOR_REMOVE</code> Decorator removed <code>IMPORT_ADD</code> Import statement added <code>IMPORT_REMOVE</code> Import statement removed <code>LINE_REWRITE</code> Lines replaced with new content <code>LINE_INSERT</code> Lines inserted <code>LINE_DELETE</code> Lines deleted <code>FILE_CREATE</code> New file created <code>FILE_DELETE</code> File deleted <code>FILE_RENAME</code> File renamed"},{"location":"guides/patching/#use-cases_1","title":"Use Cases","text":""},{"location":"guides/patching/#review-patches-before-applying","title":"Review Patches Before Applying","text":"<pre><code>def review_and_apply(patch_path: str):\n    rj = Rejig(\"src/\")\n    patch = rj.patch_from_file(patch_path)\n\n    # Show summary\n    print(patch.summary())\n    print(\"\\n\" + \"=\" * 60 + \"\\n\")\n\n    # Show detected operations\n    for op in patch.analyze():\n        print(f\"  {op.type.name}: {op.details}\")\n\n    # Show full diff\n    print(\"\\n\" + patch.to_unified_diff())\n\n    # Confirm\n    if input(\"\\nApply? [y/N] \").lower() == \"y\":\n        result = patch.apply()\n        print(f\"Applied: {result.message}\")\n</code></pre>"},{"location":"guides/patching/#create-undo-patches-for-safety","title":"Create Undo Patches for Safety","text":"<pre><code>def safe_refactor(rj: Rejig):\n    with rj.transaction() as tx:\n        # Perform changes\n        rj.find_class(\"OldAPI\").rename(\"NewAPI\")\n        rj.find_function(\"deprecated_helper\").delete()\n\n        # Generate both forward and reverse patches\n        forward_patch = rj.generate_patch(tx)\n        undo_patch = forward_patch.reverse()\n\n        # Save undo patch BEFORE committing\n        undo_patch.save(\"undo-refactor.patch\")\n\n        # Now commit\n        tx.commit()\n        forward_patch.save(\"refactor.patch\")\n</code></pre>"},{"location":"guides/patching/#migrate-code-changes-to-another-branch","title":"Migrate Code Changes to Another Branch","text":"<pre><code># On feature branch: capture changes as patch\nrj = Rejig(\"src/\", dry_run=True)\nresult = rj.find_classes(pattern=\"^Legacy\").rename(\"^Legacy\", \"Modern\")\npatch = rj.generate_patch(result)\npatch.save(\"migration.patch\")\n\n# On target branch: apply the patch\nrj = Rejig(\"src/\")\npatch = rj.patch_from_file(\"migration.patch\")\nresult = patch.apply()\n</code></pre>"},{"location":"guides/patching/#compare-patch-to-current-state","title":"Compare Patch to Current State","text":"<pre><code>def check_patch_applicability(patch_path: str):\n    rj = Rejig(\"src/\")\n    patch = rj.patch_from_file(patch_path)\n\n    issues = []\n    for file_target in patch.files():\n        path = rj._resolve_path(file_target.path)\n\n        if file_target.is_new and path.exists():\n            issues.append(f\"Would create {path} but it already exists\")\n        elif file_target.is_deleted and not path.exists():\n            issues.append(f\"Would delete {path} but it doesn't exist\")\n        elif not file_target.is_new and not path.exists():\n            issues.append(f\"Would modify {path} but it doesn't exist\")\n\n    if issues:\n        print(\"Potential issues:\")\n        for issue in issues:\n            print(f\"  - {issue}\")\n    else:\n        print(\"Patch appears applicable\")\n</code></pre>"},{"location":"guides/patching/#generate-patches-for-cicd","title":"Generate Patches for CI/CD","text":"<pre><code>def generate_migration_patch():\n    \"\"\"Generate a patch for code migration, suitable for CI review.\"\"\"\n    rj = Rejig(\"src/\", dry_run=True)\n\n    with rj.transaction() as tx:\n        # Modernize type hints\n        rj.find_files(\"**/*.py\").modernize_type_hints()\n\n        # Update deprecated APIs\n        for func in rj.find_functions():\n            if \"oldapi\" in func.name.lower():\n                func.rename(func.name.replace(\"oldapi\", \"newapi\"))\n\n        # Generate patch\n        patch = rj.generate_patch(tx)\n\n        # Add metadata\n        header = f\"\"\"# Auto-generated migration patch\n# Generated: {datetime.now().isoformat()}\n# Operations: {len(patch.analyze())}\n# Files affected: {patch.file_count}\n\n\"\"\"\n\n        with open(\"migration.patch\", \"w\") as f:\n            f.write(header)\n            f.write(patch.to_unified_diff())\n</code></pre>"},{"location":"guides/patching/#best-practices","title":"Best Practices","text":"<ol> <li> <p>Always use dry_run for patch generation: This ensures you see what would change without modifying files.</p> </li> <li> <p>Save undo patches before applying: In case something goes wrong, you have a way to revert.</p> </li> <li> <p>Review patches before applying: Use <code>patch.summary()</code> and <code>patch.analyze()</code> to understand changes.</p> </li> <li> <p>Use transactions for complex changes: Generate patches from transactions for atomic, reviewable changes.</p> </li> <li> <p>Prefer smart_mode=False for reliability: Line-based operations are more predictable than detected operations.</p> </li> <li> <p>Check file existence before applying: Patches may fail if expected files don't exist or have changed.</p> </li> </ol>"},{"location":"guides/project-management/","title":"Project Management","text":"<p>Rejig provides high-level tools for managing Python projects: pyproject.toml configuration, dependencies, scripts, and tool settings.</p>"},{"location":"guides/project-management/#pythonproject","title":"PythonProject","text":"<p>The <code>PythonProject</code> class provides a convenient facade for managing project configuration.</p> <pre><code>from rejig import PythonProject\n\nproject = PythonProject(\".\")  # or path to project root\n\n# Check if pyproject.toml exists\nif project.exists:\n    print(f\"Project: {project.project().get_name()}\")\n    print(f\"Version: {project.project().get_version()}\")\n</code></pre>"},{"location":"guides/project-management/#project-metadata","title":"Project Metadata","text":""},{"location":"guides/project-management/#access-project-section","title":"Access Project Section","text":"<pre><code>project = PythonProject(\".\")\n\n# Get the [project] section target\nproj = project.project()\n\n# Read metadata\nname = proj.get_name()\nversion = proj.get_version()\ndescription = proj.get_description()\nlicense_ = proj.get_license()\npython_requires = proj.get_requires_python()\n</code></pre>"},{"location":"guides/project-management/#modify-metadata","title":"Modify Metadata","text":"<pre><code>proj = project.project()\n\n# Set values\nproj.set_name(\"my-package\")\nproj.set_version(\"2.0.0\")\nproj.set_description(\"A fantastic Python package\")\nproj.set_license(\"MIT\")\nproj.set_requires_python(\"&gt;=3.10\")\n</code></pre>"},{"location":"guides/project-management/#version-bumping","title":"Version Bumping","text":"<pre><code>proj = project.project()\n\n# Current version: 1.2.3\nproj.bump_version(\"patch\")   # -&gt; 1.2.4\nproj.bump_version(\"minor\")   # -&gt; 1.3.0\nproj.bump_version(\"major\")   # -&gt; 2.0.0\n\n# With pre-release\nproj.bump_version(\"minor\", prerelease=\"alpha\")  # -&gt; 1.3.0a1\nproj.bump_version(\"prerelease\")                 # -&gt; 1.3.0a2\n</code></pre>"},{"location":"guides/project-management/#authors","title":"Authors","text":"<pre><code># Get authors\nauthors = proj.get_authors()\nfor author in authors:\n    print(f\"{author['name']} &lt;{author['email']}&gt;\")\n\n# Add author\nproj.add_author(\"Jane Doe\", \"jane@example.com\")\n\n# Set all authors\nproj.set_authors([\n    {\"name\": \"Jane Doe\", \"email\": \"jane@example.com\"},\n    {\"name\": \"John Smith\", \"email\": \"john@example.com\"},\n])\n</code></pre>"},{"location":"guides/project-management/#keywords-and-classifiers","title":"Keywords and Classifiers","text":"<pre><code># Keywords\nkeywords = proj.get_keywords()\nproj.add_keyword(\"automation\")\nproj.add_keyword(\"refactoring\")\n\n# Classifiers\nclassifiers = proj.get_classifiers()\nproj.add_classifier(\"Development Status :: 4 - Beta\")\nproj.add_classifier(\"Programming Language :: Python :: 3.11\")\n</code></pre>"},{"location":"guides/project-management/#project-urls","title":"Project URLs","text":"<pre><code># Get URLs\nurls = proj.get_urls()\n# {\"Homepage\": \"https://...\", \"Repository\": \"https://...\"}\n\n# Set URLs\nproj.set_url(\"Homepage\", \"https://myproject.dev\")\nproj.set_url(\"Repository\", \"https://github.com/me/myproject\")\nproj.set_url(\"Documentation\", \"https://docs.myproject.dev\")\n</code></pre>"},{"location":"guides/project-management/#dependencies","title":"Dependencies","text":""},{"location":"guides/project-management/#access-dependencies","title":"Access Dependencies","text":"<pre><code>project = PythonProject(\".\")\n\n# Main dependencies\ndeps = project.dependencies()\n\n# Dev dependencies\ndev_deps = project.dev_dependencies()\n\n# Optional dependency group\ntest_deps = project.optional_dependencies(\"test\")\n</code></pre>"},{"location":"guides/project-management/#list-dependencies","title":"List Dependencies","text":"<pre><code>deps = project.dependencies()\n\n# List all\nfor dep in deps.list():\n    print(f\"{dep.name}: {dep.version_spec}\")\n\n# Check if dependency exists\nif deps.has(\"requests\"):\n    print(f\"requests version: {deps.get('requests')}\")\n</code></pre>"},{"location":"guides/project-management/#add-dependencies","title":"Add Dependencies","text":"<pre><code>deps = project.dependencies()\n\n# Add with version specifier\ndeps.add(\"requests\", \"^2.28.0\")\ndeps.add(\"django\", \"&gt;=4.0,&lt;5.0\")\n\n# Add without version (latest)\ndeps.add(\"black\")\n\n# Add with extras\ndeps.add(\"uvicorn\", \"&gt;=0.20.0\", extras=[\"standard\"])\n</code></pre>"},{"location":"guides/project-management/#update-dependencies","title":"Update Dependencies","text":"<pre><code># Update version\ndeps.update(\"requests\", \"^2.31.0\")\n\n# Update to latest (remove version constraint)\ndeps.update(\"black\", \"*\")\n</code></pre>"},{"location":"guides/project-management/#remove-dependencies","title":"Remove Dependencies","text":"<pre><code>deps.remove(\"deprecated-package\")\n</code></pre>"},{"location":"guides/project-management/#dev-dependencies","title":"Dev Dependencies","text":"<pre><code>dev = project.dev_dependencies()\n\n# Add dev dependencies\ndev.add(\"pytest\", \"^7.0.0\")\ndev.add(\"mypy\", \"^1.0.0\")\ndev.add(\"black\", \"^23.0.0\")\ndev.add(\"ruff\", \"^0.1.0\")\n</code></pre>"},{"location":"guides/project-management/#optional-dependency-groups","title":"Optional Dependency Groups","text":"<pre><code># Create a new group\nproject.dependencies().add_group(\"docs\")\n\n# Add to specific group\ndocs = project.optional_dependencies(\"docs\")\ndocs.add(\"sphinx\", \"^6.0.0\")\ndocs.add(\"sphinx-rtd-theme\", \"^1.0.0\")\n\n# Or add directly\nproject.dependencies().add_to_group(\"docs\", \"myst-parser\", \"^1.0.0\")\n</code></pre>"},{"location":"guides/project-management/#entry-points-scripts","title":"Entry Points / Scripts","text":""},{"location":"guides/project-management/#manage-scripts","title":"Manage Scripts","text":"<pre><code>scripts = project.scripts()\n\n# List scripts\nfor name, command in scripts.list().items():\n    print(f\"{name} = {command}\")\n\n# Add script\nscripts.add(\"mycli\", \"mypackage.cli:main\")\nscripts.add(\"myserver\", \"mypackage.server:run\")\n\n# Update script\nscripts.update(\"mycli\", \"mypackage.cli:new_main\")\n\n# Remove script\nscripts.remove(\"old-command\")\n\n# Check if script exists\nif scripts.has(\"mycli\"):\n    print(f\"mycli command: {scripts.get('mycli')}\")\n</code></pre>"},{"location":"guides/project-management/#tool-configuration","title":"Tool Configuration","text":""},{"location":"guides/project-management/#black","title":"Black","text":"<pre><code>black = project.black()\n\n# Configure\nblack.set_line_length(110)\nblack.set_target_versions([\"py310\", \"py311\"])\nblack.set_include_pattern(r\"\\.pyi?$\")\nblack.set_exclude_pattern(r\"/(\\.git|\\.venv|migrations)/\")\n\n# Results in pyproject.toml:\n# [tool.black]\n# line-length = 110\n# target-version = [\"py310\", \"py311\"]\n# include = '\\.pyi?$'\n# exclude = '/(\\.git|\\.venv|migrations)/'\n</code></pre>"},{"location":"guides/project-management/#ruff","title":"Ruff","text":"<pre><code>ruff = project.ruff()\n\n# Basic settings\nruff.set_line_length(110)\nruff.set_target_version(\"py310\")\n\n# Select rules\nruff.select_rules([\"E\", \"F\", \"W\", \"I\", \"UP\"])\n\n# Ignore specific rules\nruff.ignore_rules([\"E501\", \"F401\"])\n\n# Per-file ignores\nruff.add_per_file_ignores(\"tests/*\", [\"S101\", \"PLR2004\"])\nruff.add_per_file_ignores(\"__init__.py\", [\"F401\"])\n\n# isort settings (via ruff)\nruff.set_isort_section_order([\n    \"future\", \"standard-library\", \"third-party\", \"first-party\", \"local-folder\"\n])\nruff.set_isort_known_first_party([\"mypackage\"])\n</code></pre>"},{"location":"guides/project-management/#mypy","title":"mypy","text":"<pre><code>mypy = project.mypy()\n\n# Basic settings\nmypy.set_python_version(\"3.10\")\nmypy.set_strict(True)\n\n# Import handling\nmypy.set_ignore_missing_imports(True)\n\n# Warning settings\nmypy.set_warn_unused_ignores(True)\nmypy.set_warn_return_any(True)\n\n# Per-module overrides\nmypy.add_module_override(\"mypackage.legacy\", {\n    \"ignore_errors\": True,\n})\n</code></pre>"},{"location":"guides/project-management/#pytest","title":"pytest","text":"<pre><code>pytest_cfg = project.pytest()\n\n# Basic settings\npytest_cfg.set_test_paths([\"tests\"])\npytest_cfg.set_python_files([\"test_*.py\", \"*_test.py\"])\npytest_cfg.set_python_classes([\"Test*\"])\npytest_cfg.set_python_functions([\"test_*\"])\n\n# Add markers\npytest_cfg.set_markers([\n    \"slow: marks tests as slow\",\n    \"integration: marks integration tests\",\n])\n\n# Add options\npytest_cfg.add_ini_option(\"addopts\", \"-v --tb=short\")\npytest_cfg.add_ini_option(\"filterwarnings\", [\n    \"ignore::DeprecationWarning\",\n])\n</code></pre>"},{"location":"guides/project-management/#isort","title":"isort","text":"<pre><code>isort = project.isort()\n\n# Use Black-compatible profile\nisort.set_profile(\"black\")\n\n# Custom settings\nisort.set_line_length(110)\nisort.set_multi_line_mode(3)\nisort.set_known_first_party([\"mypackage\"])\nisort.set_known_third_party([\"django\", \"rest_framework\"])\n</code></pre>"},{"location":"guides/project-management/#coverage","title":"coverage","text":"<pre><code>coverage = project.coverage()\n\n# Source paths\ncoverage.set_source_paths([\"src/mypackage\"])\n\n# Omit patterns\ncoverage.set_omit_patterns([\n    \"*/tests/*\",\n    \"*/__init__.py\",\n    \"*/migrations/*\",\n])\n\n# Minimum coverage\ncoverage.set_min_percentage(80)\ncoverage.set_fail_under(80)\n\n# Report settings\ncoverage.set_show_missing(True)\ncoverage.set_skip_covered(True)\n</code></pre>"},{"location":"guides/project-management/#direct-pyprojecttoml-access","title":"Direct pyproject.toml Access","text":"<p>For advanced use cases, access the pyproject.toml directly:</p> <pre><code>pyproject = project.pyproject\n\n# Get any value\nbuild_backend = pyproject.get(\"build-system.build-backend\")\n\n# Set any value\npyproject.set(\"tool.custom.setting\", \"value\")\n\n# Get entire section\ntool_settings = pyproject.get_section(\"tool\")\n\n# Delete a key\npyproject.delete(\"tool.deprecated\")\n</code></pre>"},{"location":"guides/project-management/#common-patterns","title":"Common Patterns","text":""},{"location":"guides/project-management/#initialize-new-project","title":"Initialize New Project","text":"<pre><code>from rejig import PythonProject\n\nproject = PythonProject(\"my-new-project\")\n\n# Set up project metadata\nproj = project.project()\nproj.set_name(\"my-new-project\")\nproj.set_version(\"0.1.0\")\nproj.set_description(\"A new Python project\")\nproj.set_requires_python(\"&gt;=3.10\")\nproj.add_author(\"Your Name\", \"you@example.com\")\nproj.set_license(\"MIT\")\n\n# Add dependencies\ndeps = project.dependencies()\ndeps.add(\"requests\", \"^2.28.0\")\ndeps.add(\"click\", \"^8.0.0\")\n\n# Add dev dependencies\ndev = project.dev_dependencies()\ndev.add(\"pytest\", \"^7.0.0\")\ndev.add(\"black\", \"^23.0.0\")\ndev.add(\"ruff\", \"^0.1.0\")\ndev.add(\"mypy\", \"^1.0.0\")\n\n# Add CLI entry point\nproject.scripts().add(\"mycli\", \"my_new_project.cli:main\")\n\n# Configure tools\nproject.black().set_line_length(110)\nproject.ruff().select_rules([\"E\", \"F\", \"W\", \"I\", \"UP\"])\nproject.mypy().set_strict(True)\nproject.pytest().set_test_paths([\"tests\"])\n</code></pre>"},{"location":"guides/project-management/#sync-tool-configurations","title":"Sync Tool Configurations","text":"<pre><code># Ensure consistent line length across tools\nLINE_LENGTH = 110\n\nproject = PythonProject(\".\")\nproject.black().set_line_length(LINE_LENGTH)\nproject.ruff().set_line_length(LINE_LENGTH)\nproject.isort().set_line_length(LINE_LENGTH)\n</code></pre>"},{"location":"guides/project-management/#migrate-from-setuppy","title":"Migrate from setup.py","text":"<pre><code># Read existing setup.py values and create pyproject.toml\nimport ast\nfrom pathlib import Path\n\n# Parse setup.py (simplified)\nsetup_py = Path(\"setup.py\").read_text()\n# ... extract values ...\n\nproject = PythonProject(\".\")\nproj = project.project()\nproj.set_name(name)\nproj.set_version(version)\nproj.set_description(description)\n# etc.\n</code></pre>"},{"location":"guides/project-management/#add-standard-dev-dependencies","title":"Add Standard Dev Dependencies","text":"<pre><code>def setup_dev_environment(project: PythonProject):\n    \"\"\"Add standard development dependencies.\"\"\"\n    dev = project.dev_dependencies()\n\n    # Testing\n    dev.add(\"pytest\", \"^7.0.0\")\n    dev.add(\"pytest-cov\", \"^4.0.0\")\n    dev.add(\"pytest-asyncio\", \"^0.21.0\")\n\n    # Linting and formatting\n    dev.add(\"black\", \"^23.0.0\")\n    dev.add(\"ruff\", \"^0.1.0\")\n    dev.add(\"mypy\", \"^1.0.0\")\n\n    # Pre-commit\n    dev.add(\"pre-commit\", \"^3.0.0\")\n\n    # Configure tools\n    project.black().set_line_length(110)\n    project.ruff().select_rules([\"E\", \"F\", \"W\", \"I\", \"UP\", \"B\", \"C4\"])\n    project.mypy().set_strict(True)\n    project.pytest().set_test_paths([\"tests\"])\n    project.coverage().set_fail_under(80)\n</code></pre>"},{"location":"guides/project-management/#check-outdated-dependencies","title":"Check Outdated Dependencies","text":"<pre><code>import subprocess\nfrom rejig import PythonProject\n\nproject = PythonProject(\".\")\ndeps = project.dependencies()\n\n# Get current versions\ncurrent = {dep.name: dep.version_spec for dep in deps.list()}\n\n# Check against PyPI (using pip)\nresult = subprocess.run(\n    [\"pip\", \"index\", \"versions\", *current.keys()],\n    capture_output=True, text=True\n)\n# ... parse output to find outdated packages ...\n</code></pre>"},{"location":"guides/project-management/#dry-run-mode","title":"Dry Run Mode","text":"<p>Preview changes without modifying files:</p> <pre><code>project = PythonProject(\".\", dry_run=True)\n\n# Make changes\nproject.project().set_version(\"2.0.0\")\nproject.dependencies().add(\"new-package\", \"^1.0.0\")\n\n# See what would change\nresult = project.save()\nprint(result.diff)\n</code></pre>"},{"location":"guides/security-analysis/","title":"Security Analysis","text":"<p>Rejig provides security scanning capabilities to detect hardcoded secrets, vulnerability patterns, and other security issues in your Python code.</p>"},{"location":"guides/security-analysis/#quick-start","title":"Quick Start","text":"<pre><code>from rejig import Rejig\n\nrj = Rejig(\"src/\")\n\n# Find all security issues\nsecurity = rj.find_security_issues()\n\n# Print summary\nprint(security.summary())\n# Output: Total: 12 issues (2 critical, 4 high, 3 medium, 3 low)\n\n# List critical and high issues\nfor issue in security.critical() + security.high():\n    print(f\"{issue.severity}: {issue.message}\")\n    print(f\"  {issue.file_path}:{issue.line_number}\")\n    print(f\"  Code: {issue.code_snippet}\")\n</code></pre>"},{"location":"guides/security-analysis/#security-issue-types","title":"Security Issue Types","text":""},{"location":"guides/security-analysis/#hardcoded-secrets","title":"Hardcoded Secrets","text":"Type Description <code>HARDCODED_SECRET</code> Generic secret detection <code>HARDCODED_API_KEY</code> API keys (AWS, Google, etc.) <code>HARDCODED_PASSWORD</code> Password strings in code <code>HARDCODED_TOKEN</code> Auth tokens, JWT secrets <code>HARDCODED_CRYPTO_KEY</code> Encryption keys"},{"location":"guides/security-analysis/#injection-vulnerabilities","title":"Injection Vulnerabilities","text":"Type Description <code>SQL_INJECTION</code> SQL query string concatenation <code>COMMAND_INJECTION</code> Shell command string building <code>SHELL_INJECTION</code> subprocess with shell=True <code>CODE_INJECTION</code> Dynamic code execution risks"},{"location":"guides/security-analysis/#unsafe-operations","title":"Unsafe Operations","text":"Type Description <code>UNSAFE_YAML_LOAD</code> yaml.load without safe loader <code>UNSAFE_PICKLE</code> pickle.load on untrusted data <code>UNSAFE_EVAL</code> eval() on user input <code>UNSAFE_EXEC</code> exec() on dynamic code <code>UNSAFE_DESERIALIZE</code> Insecure deserialization"},{"location":"guides/security-analysis/#path-and-file-issues","title":"Path and File Issues","text":"Type Description <code>PATH_TRAVERSAL</code> Unsanitized path construction <code>INSECURE_FILE_PERMISSIONS</code> chmod with overly permissive mode"},{"location":"guides/security-analysis/#cryptography-issues","title":"Cryptography Issues","text":"Type Description <code>INSECURE_RANDOM</code> random module for security <code>WEAK_CRYPTO</code> MD5, SHA1, DES, etc."},{"location":"guides/security-analysis/#network-issues","title":"Network Issues","text":"Type Description <code>INSECURE_SSL</code> SSL verification disabled <code>DISABLED_CERT_VERIFICATION</code> verify=False in requests"},{"location":"guides/security-analysis/#other-issues","title":"Other Issues","text":"Type Description <code>DEBUG_CODE</code> Debug statements in production <code>SENSITIVE_DATA_EXPOSURE</code> Logging sensitive data"},{"location":"guides/security-analysis/#filtering-issues","title":"Filtering Issues","text":""},{"location":"guides/security-analysis/#by-severity","title":"By Severity","text":"<pre><code>security = rj.find_security_issues()\n\n# Severity-specific filters\ncritical = security.critical()\nhigh = security.high()\nmedium = security.medium()\nlow = security.low()\n\n# Combined\nurgent = security.by_severity([\"critical\", \"high\"])\n</code></pre>"},{"location":"guides/security-analysis/#by-type","title":"By Type","text":"<pre><code># Single type\nsecrets = security.by_type(\"HARDCODED_SECRET\")\n\n# Multiple types\ninjection = security.by_types([\n    \"SQL_INJECTION\",\n    \"COMMAND_INJECTION\",\n    \"SHELL_INJECTION\"\n])\n\n# All secret-related\nall_secrets = security.by_types([\n    \"HARDCODED_SECRET\",\n    \"HARDCODED_API_KEY\",\n    \"HARDCODED_PASSWORD\",\n    \"HARDCODED_TOKEN\",\n    \"HARDCODED_CRYPTO_KEY\"\n])\n</code></pre>"},{"location":"guides/security-analysis/#by-location","title":"By Location","text":"<pre><code># Issues in a specific file\nfile_issues = security.in_file(\"src/config.py\")\n\n# Issues in a directory\napi_issues = security.in_directory(\"src/api/\")\n</code></pre>"},{"location":"guides/security-analysis/#secret-detection","title":"Secret Detection","text":""},{"location":"guides/security-analysis/#find-hardcoded-secrets","title":"Find Hardcoded Secrets","text":"<pre><code>from rejig import SecretsScanner\n\nscanner = SecretsScanner(rj)\n\n# Find all secrets\nsecrets = scanner.find_all()\n\nfor secret in secrets:\n    print(f\"Found {secret.type} at {secret.file_path}:{secret.line_number}\")\n    print(f\"  Pattern: {secret.pattern_name}\")\n    print(f\"  Confidence: {secret.confidence}\")\n</code></pre>"},{"location":"guides/security-analysis/#supported-secret-patterns","title":"Supported Secret Patterns","text":"<pre><code># AWS keys\nAWS_ACCESS_KEY_ID = \"AKIA...\"          # Detected\nAWS_SECRET_ACCESS_KEY = \"...\"           # Detected\n\n# API keys\nGOOGLE_API_KEY = \"AIza...\"             # Detected\nSTRIPE_SECRET_KEY = \"sk_live_...\"      # Detected\nGITHUB_TOKEN = \"ghp_...\"               # Detected\n\n# Database URLs\nDATABASE_URL = \"postgresql://user:pass@host/db\"  # Detected\n\n# Private keys\nPRIVATE_KEY = \"-----BEGIN RSA PRIVATE KEY-----\"  # Detected\n\n# Generic patterns\nSECRET_KEY = \"my-super-secret-key\"     # Detected\npassword = \"admin123\"                  # Detected\napi_key = \"abc123def456\"               # Detected\n</code></pre>"},{"location":"guides/security-analysis/#custom-secret-patterns","title":"Custom Secret Patterns","text":"<pre><code>scanner = SecretsScanner(rj)\n\n# Add custom patterns\nscanner.add_pattern(\n    name=\"internal_api_key\",\n    pattern=r\"INTERNAL_[A-Z]+_KEY\\s*=\\s*['\\\"][^'\\\"]+['\\\"]\",\n    severity=\"high\",\n)\n\nscanner.add_pattern(\n    name=\"slack_webhook\",\n    pattern=r\"https://hooks\\.slack\\.com/services/[A-Z0-9]+/[A-Z0-9]+/[a-zA-Z0-9]+\",\n    severity=\"high\",\n)\n\nsecrets = scanner.find_all()\n</code></pre>"},{"location":"guides/security-analysis/#vulnerability-detection","title":"Vulnerability Detection","text":""},{"location":"guides/security-analysis/#find-sql-injection","title":"Find SQL Injection","text":"<pre><code>from rejig import VulnerabilityScanner\n\nscanner = VulnerabilityScanner(rj)\n\n# Find SQL injection patterns\nsql_issues = scanner.find_sql_injection()\n\nfor issue in sql_issues:\n    print(f\"SQL Injection risk: {issue.file_path}:{issue.line_number}\")\n    print(f\"  Code: {issue.code_snippet}\")\n    print(f\"  Suggestion: Use parameterized queries\")\n</code></pre>"},{"location":"guides/security-analysis/#examples-of-detected-patterns","title":"Examples of Detected Patterns","text":"<pre><code># SQL Injection - DETECTED\nquery = \"SELECT * FROM users WHERE id = \" + user_id\ncursor.execute(f\"SELECT * FROM users WHERE name = '{name}'\")\n\n# Safe alternatives - NOT flagged\ncursor.execute(\"SELECT * FROM users WHERE id = %s\", (user_id,))\nUser.objects.filter(id=user_id)  # Django ORM\n</code></pre>"},{"location":"guides/security-analysis/#find-command-injection","title":"Find Command Injection","text":"<pre><code>cmd_issues = scanner.find_command_injection()\n\nfor issue in cmd_issues:\n    print(f\"Command Injection: {issue.file_path}:{issue.line_number}\")\n</code></pre>"},{"location":"guides/security-analysis/#examples-of-detected-patterns_1","title":"Examples of Detected Patterns","text":"<pre><code># Command Injection - DETECTED\nos.system(\"ls \" + user_input)\nsubprocess.call(f\"echo {message}\", shell=True)\nsubprocess.Popen(command, shell=True)\n\n# Safe alternatives - NOT flagged\nsubprocess.run([\"ls\", directory], shell=False)\nsubprocess.run([\"echo\", message])\n</code></pre>"},{"location":"guides/security-analysis/#find-unsafe-operations","title":"Find Unsafe Operations","text":"<pre><code># Find all unsafe operations\nunsafe = scanner.find_unsafe_operations()\n\n# Or specific types\nyaml_issues = scanner.find_unsafe_yaml()\npickle_issues = scanner.find_unsafe_pickle()\neval_issues = scanner.find_unsafe_eval()\n</code></pre>"},{"location":"guides/security-analysis/#examples-of-detected-patterns_2","title":"Examples of Detected Patterns","text":"<pre><code># Unsafe YAML - DETECTED\ndata = yaml.load(file)  # Uses unsafe Loader\nyaml.load(content, Loader=yaml.Loader)\n\n# Safe alternative - NOT flagged\ndata = yaml.safe_load(file)\nyaml.load(content, Loader=yaml.SafeLoader)\n\n# Unsafe Pickle - DETECTED\ndata = pickle.load(untrusted_file)\n\n# Unsafe Eval - DETECTED\nresult = eval(user_input)\nexec(dynamic_code)\n</code></pre>"},{"location":"guides/security-analysis/#grouping-and-aggregation","title":"Grouping and Aggregation","text":""},{"location":"guides/security-analysis/#group-by-file","title":"Group by File","text":"<pre><code>by_file = security.group_by_file()\n\nfor file_path, issues in by_file.items():\n    print(f\"\\n{file_path}:\")\n    for issue in issues:\n        print(f\"  [{issue.severity}] {issue.type}: {issue.message}\")\n</code></pre>"},{"location":"guides/security-analysis/#group-by-type","title":"Group by Type","text":"<pre><code>by_type = security.group_by_type()\n\nfor issue_type, issues in by_type.items():\n    print(f\"\\n{issue_type}: {len(issues)} occurrences\")\n    for issue in issues[:3]:  # Show first 3\n        print(f\"  {issue.file_path}:{issue.line_number}\")\n</code></pre>"},{"location":"guides/security-analysis/#statistics","title":"Statistics","text":"<pre><code># Count by type\ntype_counts = security.count_by_type()\nprint(type_counts)\n# {\"HARDCODED_SECRET\": 5, \"SQL_INJECTION\": 2, ...}\n\n# Count by severity\nseverity_counts = security.count_by_severity()\nprint(severity_counts)\n# {\"critical\": 2, \"high\": 4, \"medium\": 3, \"low\": 3}\n</code></pre>"},{"location":"guides/security-analysis/#working-with-findings","title":"Working with Findings","text":""},{"location":"guides/security-analysis/#navigate-to-code","title":"Navigate to Code","text":"<pre><code>for issue in security:\n    # Get file target\n    file_target = issue.to_file_target()\n\n    # Get line target for direct manipulation\n    line_target = issue.to_line_target()\n\n    # Read surrounding context\n    print(file_target.get_lines(\n        issue.line_number - 2,\n        issue.line_number + 2\n    ))\n</code></pre>"},{"location":"guides/security-analysis/#export-findings","title":"Export Findings","text":"<pre><code># Export as list of dictionaries\nfindings_list = security.to_list_of_dicts()\n\n# Export as JSON\nimport json\nwith open(\"security-report.json\", \"w\") as f:\n    json.dump(findings_list, f, indent=2, default=str)\n</code></pre>"},{"location":"guides/security-analysis/#generating-reports","title":"Generating Reports","text":""},{"location":"guides/security-analysis/#security-reporter","title":"Security Reporter","text":"<pre><code>from rejig import SecurityReporter\n\nreporter = SecurityReporter(security)\n\n# Text report\nprint(reporter.to_text())\n\n# JSON report\njson_report = reporter.to_json()\n\n# Markdown report\nmd_report = reporter.to_markdown()\n\n# HTML report with code snippets\nhtml_report = reporter.to_html(\n    include_code=True,\n    syntax_highlight=True,\n)\n</code></pre>"},{"location":"guides/security-analysis/#sarif-output","title":"SARIF Output","text":"<pre><code># SARIF format for GitHub Code Scanning\nsarif_report = reporter.to_sarif()\n\nwith open(\"security.sarif\", \"w\") as f:\n    f.write(sarif_report)\n</code></pre>"},{"location":"guides/security-analysis/#ci-integration","title":"CI Integration","text":""},{"location":"guides/security-analysis/#pre-commit-hook","title":"Pre-commit Hook","text":"<pre><code>#!/usr/bin/env python\n\"\"\"Pre-commit hook for security scanning.\"\"\"\nimport sys\nfrom rejig import Rejig\n\nrj = Rejig(\"src/\")\nsecurity = rj.find_security_issues()\n\n# Fail on critical or high severity\ncritical_high = security.critical() + security.high()\n\nif critical_high:\n    print(\"Security issues found!\")\n    for issue in critical_high:\n        print(f\"  [{issue.severity}] {issue.file_path}:{issue.line_number}\")\n        print(f\"    {issue.message}\")\n    sys.exit(1)\n\n# Warn on medium\nmedium = security.medium()\nif medium:\n    print(f\"Warning: {len(medium)} medium severity security issues\")\n\nsys.exit(0)\n</code></pre>"},{"location":"guides/security-analysis/#github-actions","title":"GitHub Actions","text":"<pre><code># .github/workflows/security.yml\nname: Security Scan\n\non: [push, pull_request]\n\njobs:\n  security:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n      - uses: actions/setup-python@v4\n        with:\n          python-version: '3.11'\n\n      - name: Install dependencies\n        run: pip install rejig\n\n      - name: Run security scan\n        run: |\n          python -c \"\n          from rejig import Rejig, SecurityReporter\n          rj = Rejig('src/')\n          security = rj.find_security_issues()\n          reporter = SecurityReporter(security)\n          with open('security.sarif', 'w') as f:\n              f.write(reporter.to_sarif())\n          if security.critical() or security.high():\n              exit(1)\n          \"\n\n      - name: Upload SARIF\n        uses: github/codeql-action/upload-sarif@v2\n        with:\n          sarif_file: security.sarif\n</code></pre>"},{"location":"guides/security-analysis/#configuration","title":"Configuration","text":""},{"location":"guides/security-analysis/#ignore-patterns","title":"Ignore Patterns","text":"<pre><code>from rejig import SecurityConfig\n\nconfig = SecurityConfig(\n    # Ignore specific files\n    ignore_files=[\"**/test_*.py\", \"**/conftest.py\"],\n\n    # Ignore specific patterns\n    ignore_patterns=[\n        r\"EXAMPLE_.*\",  # Example values\n        r\"TEST_.*\",     # Test values\n    ],\n\n    # Ignore specific line patterns\n    ignore_line_patterns=[\n        r\"# nosec\",           # Bandit-style ignore\n        r\"# security: ignore\",\n    ],\n\n    # Minimum severity to report\n    min_severity=\"medium\",\n)\n\nsecurity = rj.find_security_issues(config=config)\n</code></pre>"},{"location":"guides/security-analysis/#custom-severity-mappings","title":"Custom Severity Mappings","text":"<pre><code>config = SecurityConfig(\n    severity_overrides={\n        \"DEBUG_CODE\": \"low\",          # Downgrade\n        \"HARDCODED_TOKEN\": \"critical\", # Upgrade\n    }\n)\n</code></pre>"},{"location":"guides/security-analysis/#common-patterns","title":"Common Patterns","text":""},{"location":"guides/security-analysis/#audit-before-deployment","title":"Audit Before Deployment","text":"<pre><code>from rejig import Rejig\n\nrj = Rejig(\"src/\")\nsecurity = rj.find_security_issues()\n\n# Block deployment on critical issues\nif security.critical():\n    print(\"CRITICAL SECURITY ISSUES - DEPLOYMENT BLOCKED\")\n    for issue in security.critical():\n        print(f\"  {issue.file_path}:{issue.line_number}: {issue.message}\")\n    exit(1)\n\n# Require review for high issues\nif security.high():\n    print(\"HIGH SEVERITY ISSUES - MANUAL REVIEW REQUIRED\")\n    # Create review ticket, send alert, etc.\n</code></pre>"},{"location":"guides/security-analysis/#track-security-debt","title":"Track Security Debt","text":"<pre><code># Generate a security debt report\nsecurity = rj.find_security_issues()\n\nby_severity = security.count_by_severity()\nby_type = security.count_by_type()\n\nprint(\"Security Debt Summary\")\nprint(\"=\" * 40)\nprint(f\"Critical: {by_severity.get('critical', 0)}\")\nprint(f\"High:     {by_severity.get('high', 0)}\")\nprint(f\"Medium:   {by_severity.get('medium', 0)}\")\nprint(f\"Low:      {by_severity.get('low', 0)}\")\nprint()\nprint(\"By Type:\")\nfor type_name, count in sorted(by_type.items(), key=lambda x: -x[1]):\n    print(f\"  {type_name}: {count}\")\n</code></pre>"},{"location":"guides/security-analysis/#remediation-guidance","title":"Remediation Guidance","text":"<pre><code>REMEDIATION = {\n    \"SQL_INJECTION\": \"Use parameterized queries or ORM methods\",\n    \"COMMAND_INJECTION\": \"Use subprocess with shell=False and list arguments\",\n    \"HARDCODED_SECRET\": \"Move to environment variables or secrets manager\",\n    \"UNSAFE_YAML_LOAD\": \"Use yaml.safe_load() instead\",\n    \"UNSAFE_PICKLE\": \"Use JSON or other safe serialization formats\",\n    \"INSECURE_RANDOM\": \"Use secrets module for security-sensitive randomness\",\n}\n\nfor issue in security:\n    print(f\"{issue.type}: {issue.message}\")\n    if issue.type in REMEDIATION:\n        print(f\"  Fix: {REMEDIATION[issue.type]}\")\n</code></pre>"},{"location":"guides/transactions/","title":"Transactions","text":"<p>Rejig supports atomic transactions for batch operations. Changes are collected and applied together, with automatic rollback on failure.</p>"},{"location":"guides/transactions/#basic-usage","title":"Basic Usage","text":"<pre><code>from rejig import Rejig\n\nrj = Rejig(\"src/\")\n\n# Use context manager for automatic commit/rollback\nwith rj.transaction() as tx:\n    rj.find_class(\"OldClass\").rename(\"NewClass\")\n    rj.find_function(\"old_func\").rename(\"new_func\")\n    rj.find_method(\"process\").add_parameter(\"timeout\", \"int\", \"30\")\n\n# All changes applied atomically when exiting the context\n</code></pre>"},{"location":"guides/transactions/#how-transactions-work","title":"How Transactions Work","text":"<ol> <li>Collection Phase: All modifications are collected but not written</li> <li>Commit Phase: On successful exit, all changes are written atomically</li> <li>Rollback Phase: On exception, no changes are written</li> </ol> <pre><code>rj = Rejig(\"src/\")\n\nwith rj.transaction():\n    # These changes are collected, not immediately written\n    rj.find_class(\"A\").rename(\"B\")\n    rj.find_class(\"C\").rename(\"D\")\n\n    # If an exception occurs here, nothing is written\n    if some_condition:\n        raise ValueError(\"Abort!\")\n\n    # More changes...\n    rj.find_function(\"x\").rename(\"y\")\n\n# Only here are all changes written together\n</code></pre>"},{"location":"guides/transactions/#manual-transaction-control","title":"Manual Transaction Control","text":"<p>For more control, use explicit commit/rollback:</p> <pre><code>tx = rj.transaction()\ntx.begin()\n\ntry:\n    rj.find_class(\"A\").rename(\"B\")\n    rj.find_class(\"C\").rename(\"D\")\n\n    # Validate changes before committing\n    if validation_passes():\n        tx.commit()\n    else:\n        tx.rollback()\nexcept Exception:\n    tx.rollback()\n    raise\n</code></pre>"},{"location":"guides/transactions/#preview-changes","title":"Preview Changes","text":"<p>See what would be modified before committing:</p> <pre><code>with rj.transaction() as tx:\n    rj.find_class(\"OldName\").rename(\"NewName\")\n    rj.find_function(\"helper\").add_decorator(\"cache\")\n\n    # Preview changes\n    preview = tx.preview()\n\n    print(f\"Files to modify: {preview.files_changed}\")\n    print(f\"Diff:\\n{preview.diff}\")\n\n    # Optionally abort\n    if not confirm(\"Apply changes?\"):\n        tx.rollback()\n        return\n\n# Changes applied on exit (if not rolled back)\n</code></pre>"},{"location":"guides/transactions/#transaction-status","title":"Transaction Status","text":"<p>Check the current transaction state:</p> <pre><code>rj = Rejig(\"src/\")\n\n# Check if in transaction\nprint(rj.in_transaction)  # False\n\nwith rj.transaction() as tx:\n    print(rj.in_transaction)  # True\n\n    # Access current transaction\n    current = rj.current_transaction\n    print(current is tx)  # True\n\n    # Transaction has pending changes\n    rj.find_class(\"A\").rename(\"B\")\n    print(tx.has_changes)  # True\n    print(len(tx.pending_changes))  # 1\n</code></pre>"},{"location":"guides/transactions/#nested-transactions","title":"Nested Transactions","text":"<p>Transactions cannot be nested. Starting a new transaction inside an existing one will raise an error:</p> <pre><code>with rj.transaction():\n    # This will raise an error\n    with rj.transaction():  # Error: Already in transaction\n        pass\n</code></pre> <p>If you need nested behavior, use savepoints (manual approach):</p> <pre><code>with rj.transaction() as tx:\n    rj.find_class(\"A\").rename(\"B\")\n\n    # Save current state\n    savepoint = tx.create_savepoint()\n\n    try:\n        rj.find_class(\"C\").rename(\"D\")\n        rj.find_class(\"E\").rename(\"F\")\n    except Exception:\n        # Rollback to savepoint, keeping earlier changes\n        tx.rollback_to_savepoint(savepoint)\n</code></pre>"},{"location":"guides/transactions/#batch-result-from-transaction","title":"Batch Result from Transaction","text":"<p>Get a combined result for all operations:</p> <pre><code>with rj.transaction() as tx:\n    result1 = rj.find_class(\"A\").rename(\"B\")\n    result2 = rj.find_function(\"x\").rename(\"y\")\n    result3 = rj.find_method(\"m\").add_decorator(\"cache\")\n\n# Get combined result\nbatch_result = tx.result\n\nprint(f\"Success: {batch_result.success}\")\nprint(f\"Files changed: {batch_result.files_changed}\")\nprint(f\"Operations: {len(batch_result)}\")\n\n# Access individual results\nfor result in batch_result:\n    print(f\"  {result.message}\")\n</code></pre>"},{"location":"guides/transactions/#error-handling","title":"Error Handling","text":""},{"location":"guides/transactions/#automatic-rollback","title":"Automatic Rollback","text":"<pre><code>try:\n    with rj.transaction():\n        rj.find_class(\"A\").rename(\"B\")\n        raise ValueError(\"Something went wrong\")\n        rj.find_class(\"C\").rename(\"D\")  # Never reached\nexcept ValueError:\n    # Transaction was automatically rolled back\n    # No files were modified\n    pass\n</code></pre>"},{"location":"guides/transactions/#handling-partial-failures","title":"Handling Partial Failures","text":"<p>Operations that fail return ErrorResult but don't abort the transaction:</p> <pre><code>with rj.transaction() as tx:\n    # This succeeds\n    result1 = rj.find_class(\"Existing\").rename(\"NewName\")\n\n    # This fails (class doesn't exist) but doesn't abort\n    result2 = rj.find_class(\"NonExistent\").rename(\"Something\")\n\n    # This still runs\n    result3 = rj.find_function(\"helper\").rename(\"utility\")\n\n# Transaction commits with partial success\n# Only successful operations are applied\n</code></pre> <p>To abort on any failure:</p> <pre><code>with rj.transaction() as tx:\n    results = []\n\n    results.append(rj.find_class(\"A\").rename(\"B\"))\n    results.append(rj.find_class(\"C\").rename(\"D\"))\n    results.append(rj.find_function(\"x\").rename(\"y\"))\n\n    # Check all succeeded\n    if not all(results):\n        failed = [r for r in results if not r.success]\n        for r in failed:\n            print(f\"Failed: {r.message}\")\n        tx.rollback()\n</code></pre>"},{"location":"guides/transactions/#use-cases","title":"Use Cases","text":""},{"location":"guides/transactions/#coordinated-renames","title":"Coordinated Renames","text":"<pre><code>with rj.transaction():\n    # Rename class and update all method references\n    cls = rj.find_class(\"UserManager\")\n    cls.rename(\"UserService\")\n\n    # Update factory function\n    rj.find_function(\"get_user_manager\").rename(\"get_user_service\")\n\n    # Update type hints referencing the old name\n    for func in rj.find_functions():\n        if \"UserManager\" in func.get_type_hints():\n            func.replace_type_hint(\"UserManager\", \"UserService\")\n</code></pre>"},{"location":"guides/transactions/#safe-migration","title":"Safe Migration","text":"<pre><code>def migrate_api_version():\n    rj = Rejig(\"src/\")\n\n    with rj.transaction() as tx:\n        # Update version constant\n        rj.find_module(\"myapp.version\").find_assignment(\"API_VERSION\").rewrite(\"API_VERSION = '2.0'\")\n\n        # Update all endpoint decorators\n        for method in rj.find_methods(pattern=\"^(get|post|put|delete)_\"):\n            method.replace_decorator_arg(\"api_version\", \"'1.0'\", \"'2.0'\")\n\n        # Preview and confirm\n        print(tx.preview().diff)\n        if not confirm(\"Apply migration?\"):\n            tx.rollback()\n            return False\n\n    return True\n</code></pre>"},{"location":"guides/transactions/#batch-refactoring","title":"Batch Refactoring","text":"<pre><code>with rj.transaction():\n    # Add logging to all API endpoints\n    for cls in rj.find_classes(pattern=\".*View$\"):\n        for method in cls.find_methods():\n            if method.name in [\"get\", \"post\", \"put\", \"delete\"]:\n                method.insert_statement(\"logger.info(f'API call: {request.path}')\")\n\n    # Add timing decorator\n    for func in rj.find_functions().in_directory(\"src/api/\"):\n        func.add_decorator(\"timing\")\n</code></pre>"},{"location":"guides/transactions/#conditional-commit","title":"Conditional Commit","text":"<pre><code>with rj.transaction() as tx:\n    # Collect all changes\n    rj.find_classes().add_decorator(\"dataclass\")\n\n    # Run tests to verify changes work\n    preview = tx.preview()\n    preview.write_to_temp()  # Write to temp files\n\n    test_result = run_tests_on_temp()\n\n    if not test_result.passed:\n        print(\"Tests failed, rolling back\")\n        tx.rollback()\n    # else: auto-commit on exit\n</code></pre>"},{"location":"guides/transactions/#dry-run-with-transactions","title":"Dry Run with Transactions","text":"<p>Combine dry run mode with transactions:</p> <pre><code>rj = Rejig(\"src/\", dry_run=True)\n\nwith rj.transaction() as tx:\n    rj.find_class(\"A\").rename(\"B\")\n    rj.find_function(\"x\").rename(\"y\")\n\n    # Even in dry run, preview shows what would happen\n    print(tx.preview().diff)\n\n# Nothing is written (dry run mode)\n# But you can see the complete diff of all changes\n</code></pre>"},{"location":"guides/transactions/#best-practices","title":"Best Practices","text":"<ol> <li>Keep transactions focused: Don't mix unrelated changes</li> <li>Preview before commit: Use <code>tx.preview()</code> for complex changes</li> <li>Handle errors: Decide whether to abort or continue on failures</li> <li>Use dry run for testing: Test your refactoring logic safely</li> <li>Avoid side effects: Don't perform I/O during collection phase</li> </ol>"},{"location":"guides/type-hints/","title":"Type Hints","text":"<p>Rejig provides comprehensive tools for working with Python type hints: inferring types from code, modernizing syntax to Python 3.10+, generating stub files, and managing type annotations.</p>"},{"location":"guides/type-hints/#inferring-type-hints","title":"Inferring Type Hints","text":"<p>Rejig can infer type hints from default values, parameter names, and usage patterns.</p>"},{"location":"guides/type-hints/#from-default-values","title":"From Default Values","text":"<pre><code>from rejig import Rejig\n\nrj = Rejig(\"src/\")\n\n# Infer types for a specific function\nfunc = rj.find_function(\"process\")\nfunc.infer_type_hints()\n\n# Before:\n# def process(count=0, name=\"\", items=[], enabled=True):\n\n# After:\n# def process(count: int = 0, name: str = \"\", items: list = [], enabled: bool = True):\n</code></pre>"},{"location":"guides/type-hints/#from-parameter-names","title":"From Parameter Names","text":"<p>Rejig uses common naming conventions to infer types:</p> <pre><code># Parameter name patterns:\n# count, num, total, index, size  -&gt;  int\n# is_*, has_*, should_*, can_*    -&gt;  bool\n# *_list, *_items                 -&gt;  list\n# *_dict, *_map                   -&gt;  dict\n# *_set                           -&gt;  set\n# *_str, *_name, *_text           -&gt;  str\n# *_path, *_file, *_dir           -&gt;  Path\n# *_date                          -&gt;  date\n# *_time                          -&gt;  time\n# *_datetime                      -&gt;  datetime\n\nfunc = rj.find_function(\"get_user\")\nfunc.infer_type_hints()\n\n# Before:\n# def get_user(user_id, is_active, user_name):\n\n# After:\n# def get_user(user_id: int, is_active: bool, user_name: str):\n</code></pre>"},{"location":"guides/type-hints/#batch-inference","title":"Batch Inference","text":"<pre><code># Infer types for all functions\nrj.find_functions().infer_type_hints()\n\n# Infer types for all methods in a class\nrj.find_class(\"MyClass\").find_methods().infer_type_hints()\n\n# Infer types for functions without any type hints\nrj.find_functions().filter(lambda f: not f.has_type_hints).infer_type_hints()\n</code></pre>"},{"location":"guides/type-hints/#inference-options","title":"Inference Options","text":"<pre><code>func.infer_type_hints(\n    infer_return=True,           # Infer return type\n    infer_parameters=True,       # Infer parameter types\n    use_names=True,              # Use parameter name heuristics\n    use_defaults=True,           # Use default value types\n    use_docstring=True,          # Parse docstring for types\n    preserve_existing=True,      # Don't overwrite existing hints\n)\n</code></pre>"},{"location":"guides/type-hints/#modernizing-type-hints","title":"Modernizing Type Hints","text":"<p>Convert older typing syntax to Python 3.10+ style:</p>"},{"location":"guides/type-hints/#basic-modernization","title":"Basic Modernization","text":"<pre><code># Modernize a single function\nfunc = rj.find_function(\"process\")\nfunc.modernize_type_hints()\n\n# Modernize all functions\nrj.find_functions().modernize_type_hints()\n\n# Modernize all methods\nrj.find_methods().modernize_type_hints()\n</code></pre>"},{"location":"guides/type-hints/#what-gets-modernized","title":"What Gets Modernized","text":"<pre><code># Before -&gt; After\n\n# Generic types (Python 3.9+)\nList[str]           -&gt;  list[str]\nDict[str, int]      -&gt;  dict[str, int]\nSet[int]            -&gt;  set[int]\nTuple[int, str]     -&gt;  tuple[int, str]\nFrozenSet[str]      -&gt;  frozenset[str]\nType[MyClass]       -&gt;  type[MyClass]\n\n# Optional and Union (Python 3.10+)\nOptional[str]       -&gt;  str | None\nUnion[str, int]     -&gt;  str | int\nUnion[A, B, C]      -&gt;  A | B | C\nOptional[List[str]] -&gt;  list[str] | None\n\n# Callable\nCallable[[int], str]  -&gt;  Callable[[int], str]  # No change needed\n\n# Nested types\nDict[str, List[int]]  -&gt;  dict[str, list[int]]\nOptional[Dict[str, List[int]]]  -&gt;  dict[str, list[int]] | None\n</code></pre>"},{"location":"guides/type-hints/#import-cleanup-after-modernization","title":"Import Cleanup After Modernization","text":"<pre><code># After modernization, clean up unused typing imports\nrj.find_functions().modernize_type_hints()\n\nfor file in rj.find_files():\n    file.find_unused_imports().delete_all()\n\n# This removes: from typing import List, Dict, Optional, Union\n# if they're no longer needed\n</code></pre>"},{"location":"guides/type-hints/#setting-type-hints-manually","title":"Setting Type Hints Manually","text":""},{"location":"guides/type-hints/#parameter-types","title":"Parameter Types","text":"<pre><code>func = rj.find_function(\"process\")\n\n# Set a single parameter type\nfunc.set_parameter_type(\"data\", \"dict[str, Any]\")\n\n# Set multiple parameter types\nfunc.set_parameter_type(\"items\", \"list[Item]\")\nfunc.set_parameter_type(\"callback\", \"Callable[[str], bool]\")\n\n# Set with import (automatically adds the import)\nfunc.set_parameter_type(\"user\", \"User\", import_from=\"myapp.models\")\n</code></pre>"},{"location":"guides/type-hints/#return-types","title":"Return Types","text":"<pre><code># Set return type\nfunc.set_return_type(\"list[str]\")\n\n# Set return type with import\nfunc.set_return_type(\"Response\", import_from=\"myapp.types\")\n\n# Remove return type\nfunc.remove_return_type()\n</code></pre>"},{"location":"guides/type-hints/#class-attributes","title":"Class Attributes","text":"<pre><code>cls = rj.find_class(\"MyClass\")\n\n# Add typed attribute\ncls.add_attribute(\"items\", \"list[Item]\", \"[]\")\n\n# The type hint is included in the class body:\n# class MyClass:\n#     items: list[Item] = []\n</code></pre>"},{"location":"guides/type-hints/#removing-type-hints","title":"Removing Type Hints","text":"<p>Sometimes you need to strip type hints (e.g., for compatibility):</p> <pre><code># Remove all type hints from a function\nfunc = rj.find_function(\"process\")\nfunc.remove_type_hints()\n\n# Remove from all functions\nrj.find_functions().remove_type_hints()\n\n# Remove only parameter hints (keep return type)\nfunc.remove_parameter_types()\n\n# Remove only return type (keep parameter hints)\nfunc.remove_return_type()\n</code></pre>"},{"location":"guides/type-hints/#converting-type-comments","title":"Converting Type Comments","text":"<p>Convert Python 2 style type comments to annotations:</p> <pre><code># Convert type comments to annotations\nfunc.convert_type_comments()\n\n# Before:\n# def process(data):\n#     # type: (dict) -&gt; list\n#     pass\n\n# After:\n# def process(data: dict) -&gt; list:\n#     pass\n\n# Batch conversion\nrj.find_functions().convert_type_comments()\n</code></pre>"},{"location":"guides/type-hints/#generating-stub-files","title":"Generating Stub Files","text":"<p>Create .pyi stub files for type checking:</p> <pre><code>from rejig import StubGenerator\n\ngenerator = StubGenerator(rj)\n\n# Generate stubs for a single file\ngenerator.generate_stub(\"src/mymodule.py\", \"stubs/mymodule.pyi\")\n\n# Generate stubs for entire package\ngenerator.generate_stubs(\"src/\", \"stubs/\")\n\n# Options\ngenerator.generate_stubs(\n    \"src/\",\n    \"stubs/\",\n    include_private=False,       # Exclude _private functions\n    include_docstrings=False,    # Don't include docstrings\n    infer_types=True,            # Infer missing types\n)\n</code></pre>"},{"location":"guides/type-hints/#stub-content-example","title":"Stub Content Example","text":"<pre><code># Generated stub for mymodule.pyi\n\nfrom typing import Any\n\nclass MyClass:\n    items: list[str]\n    count: int\n\n    def __init__(self, items: list[str] | None = None) -&gt; None: ...\n    def process(self, data: dict[str, Any]) -&gt; list[str]: ...\n    def _private_method(self) -&gt; None: ...  # Excluded if include_private=False\n\ndef helper(value: str) -&gt; int: ...\n</code></pre>"},{"location":"guides/type-hints/#type-hint-analysis","title":"Type Hint Analysis","text":""},{"location":"guides/type-hints/#check-for-missing-type-hints","title":"Check for Missing Type Hints","text":"<pre><code># Find functions without type hints\nissues = rj.find_analysis_issues()\nmissing_hints = issues.by_type(\"MISSING_TYPE_HINT\")\n\nfor issue in missing_hints:\n    print(f\"{issue.file_path}:{issue.line_number} - {issue.name} missing type hints\")\n</code></pre>"},{"location":"guides/type-hints/#type-hint-coverage","title":"Type Hint Coverage","text":"<pre><code>from rejig import TypeHintAnalyzer\n\nanalyzer = TypeHintAnalyzer(rj)\n\n# Get coverage statistics\nstats = analyzer.coverage_stats()\nprint(f\"Functions with type hints: {stats.typed_functions}/{stats.total_functions}\")\nprint(f\"Methods with type hints: {stats.typed_methods}/{stats.total_methods}\")\nprint(f\"Coverage: {stats.coverage_percent:.1f}%\")\n\n# Get details by file\nfor file_path, file_stats in stats.by_file.items():\n    print(f\"{file_path}: {file_stats.coverage_percent:.1f}%\")\n</code></pre>"},{"location":"guides/type-hints/#find-inconsistent-types","title":"Find Inconsistent Types","text":"<pre><code># Find places where the same parameter name has different types\ninconsistencies = analyzer.find_inconsistent_types()\n\nfor name, types in inconsistencies.items():\n    print(f\"Parameter '{name}' has multiple types:\")\n    for type_hint, locations in types.items():\n        print(f\"  {type_hint}: {locations}\")\n</code></pre>"},{"location":"guides/type-hints/#common-patterns","title":"Common Patterns","text":""},{"location":"guides/type-hints/#add-type-hints-to-legacy-code","title":"Add Type Hints to Legacy Code","text":"<pre><code>rj = Rejig(\"src/\")\n\n# Step 1: Infer what we can\nrj.find_functions().infer_type_hints()\nrj.find_methods().infer_type_hints()\n\n# Step 2: Check coverage\nfrom rejig import TypeHintAnalyzer\nanalyzer = TypeHintAnalyzer(rj)\nprint(analyzer.coverage_stats())\n\n# Step 3: Find remaining untyped functions for manual review\nuntyped = rj.find_functions().filter(lambda f: not f.has_type_hints)\nfor func in untyped:\n    print(f\"Needs manual types: {func.file_path}:{func.name}\")\n</code></pre>"},{"location":"guides/type-hints/#modernize-an-entire-codebase","title":"Modernize an Entire Codebase","text":"<pre><code>rj = Rejig(\"src/\")\n\n# Modernize type hints\nrj.find_functions().modernize_type_hints()\nrj.find_methods().modernize_type_hints()\n\n# Clean up imports\nfor file in rj.find_files():\n    file.find_unused_imports().delete_all()\n\n# Add future annotations for forward references\nfor file in rj.find_files():\n    file.add_import(\"from __future__ import annotations\")\n</code></pre>"},{"location":"guides/type-hints/#enforce-type-hint-standards","title":"Enforce Type Hint Standards","text":"<pre><code># In CI/pre-commit, check that new code has type hints\nrj = Rejig(\"src/\")\n\n# Find functions added since last commit\n# (you'd filter by changed files in practice)\nissues = rj.find_analysis_issues()\nmissing = issues.by_type(\"MISSING_TYPE_HINT\")\n\nif missing:\n    print(\"Functions missing type hints:\")\n    for issue in missing:\n        print(f\"  {issue.file_path}:{issue.line_number} - {issue.name}\")\n    exit(1)\n</code></pre>"},{"location":"guides/type-hints/#generate-types-for-third-party-libraries","title":"Generate Types for Third-Party Libraries","text":"<pre><code>from rejig import StubGenerator\n\n# Generate stubs for a vendored library\ngenerator = StubGenerator(Rejig(\"vendor/\"))\ngenerator.generate_stubs(\n    \"vendor/external_lib/\",\n    \"stubs/external_lib/\",\n    infer_types=True,\n)\n</code></pre>"},{"location":"guides/type-hints/#integration-with-mypy","title":"Integration with mypy","text":""},{"location":"guides/type-hints/#add-type-ignore-comments","title":"Add Type Ignore Comments","text":"<pre><code># Add type: ignore to a specific line\nline = rj.file(\"module.py\").find_line(42)\nline.add_type_ignore([\"arg-type\"])  # Specific error code\n\n# Find and fix bare type: ignore comments\ntype_ignores = rj.find_type_ignores()\nbare = type_ignores.filter(lambda t: t.is_bare)\nfor ignore in bare:\n    # Make them specific\n    ignore.update_codes([\"type-arg\"])\n</code></pre>"},{"location":"guides/type-hints/#remove-unnecessary-type-ignores","title":"Remove Unnecessary Type Ignores","text":"<pre><code># After fixing type issues, remove unnecessary ignores\n# (This requires running mypy and parsing output)\n\n# Manually remove specific ignores\ntype_ignores = rj.find_type_ignores()\ntype_ignores.by_codes([\"import\"]).delete_all()  # Remove import ignores\n</code></pre>"},{"location":"guides/frameworks/django/","title":"Django Support","text":"<p>Rejig provides specialized tools for refactoring Django projects: managing settings, URLs, apps, models, and views.</p>"},{"location":"guides/frameworks/django/#installation","title":"Installation","text":"<pre><code>pip install rejig[django]\n</code></pre>"},{"location":"guides/frameworks/django/#djangoproject","title":"DjangoProject","text":"<p>The <code>DjangoProject</code> class provides Django-specific operations.</p> <pre><code>from rejig.frameworks.django import DjangoProject\n\n# Use context manager for automatic cleanup\nwith DjangoProject(\"/path/to/project\") as project:\n    # Django-specific operations\n    project.add_installed_app(\"myapp\")\n</code></pre>"},{"location":"guides/frameworks/django/#settings-management","title":"Settings Management","text":""},{"location":"guides/frameworks/django/#add-to-installed_apps","title":"Add to INSTALLED_APPS","text":"<pre><code>with DjangoProject(\".\") as project:\n    # Add app at the end\n    project.add_installed_app(\"myapp\")\n\n    # Add after a specific app\n    project.add_installed_app(\"myapp\", after_app=\"django.contrib.auth\")\n\n    # Add before a specific app\n    project.add_installed_app(\"myapp\", before_app=\"django.contrib.staticfiles\")\n\n    # Add at the beginning (after django apps)\n    project.add_installed_app(\"myapp\", position=\"first\")\n</code></pre>"},{"location":"guides/frameworks/django/#remove-from-installed_apps","title":"Remove from INSTALLED_APPS","text":"<pre><code>project.remove_installed_app(\"deprecated_app\")\n</code></pre>"},{"location":"guides/frameworks/django/#add-middleware","title":"Add Middleware","text":"<pre><code># Add at the end\nproject.add_middleware(\"myapp.middleware.CustomMiddleware\")\n\n# Add at specific position\nproject.add_middleware(\n    \"myapp.middleware.SecurityMiddleware\",\n    position=\"first\"  # Before all other middleware\n)\n\nproject.add_middleware(\n    \"myapp.middleware.LoggingMiddleware\",\n    after=\"django.middleware.common.CommonMiddleware\"\n)\n</code></pre>"},{"location":"guides/frameworks/django/#remove-middleware","title":"Remove Middleware","text":"<pre><code>project.remove_middleware(\"deprecated.middleware.OldMiddleware\")\n</code></pre>"},{"location":"guides/frameworks/django/#manage-settings-variables","title":"Manage Settings Variables","text":"<pre><code># Add a new setting\nproject.add_setting(\"MY_SETTING\", '\"value\"')\nproject.add_setting(\"CACHE_TIMEOUT\", \"3600\")\nproject.add_setting(\"DEBUG_TOOLBAR\", \"True\")\n\n# Add with comment\nproject.add_setting(\n    \"API_KEY\",\n    'os.environ.get(\"API_KEY\")',\n    comment=\"API key from environment\"\n)\n\n# Update existing setting\nproject.update_setting(\"DEBUG\", \"False\")\nproject.update_setting(\"ALLOWED_HOSTS\", '[\"*\"]')\n\n# Delete setting\nproject.delete_setting(\"DEPRECATED_SETTING\")\n</code></pre>"},{"location":"guides/frameworks/django/#read-settings","title":"Read Settings","text":"<pre><code># Get setting value\ndebug = project.get_setting(\"DEBUG\")\nallowed_hosts = project.get_setting(\"ALLOWED_HOSTS\")\n\n# Check if setting exists\nif project.has_setting(\"MY_CUSTOM_SETTING\"):\n    value = project.get_setting(\"MY_CUSTOM_SETTING\")\n</code></pre>"},{"location":"guides/frameworks/django/#url-configuration","title":"URL Configuration","text":""},{"location":"guides/frameworks/django/#add-url-patterns","title":"Add URL Patterns","text":"<pre><code>with DjangoProject(\".\") as project:\n    # Add a simple URL pattern\n    project.add_url_pattern(\n        path=\"api/users/\",\n        view=\"UserListView.as_view()\",\n        name=\"user-list\"\n    )\n\n    # Add with regex (for path with parameters)\n    project.add_url_pattern(\n        path=\"api/users/&lt;int:pk&gt;/\",\n        view=\"UserDetailView.as_view()\",\n        name=\"user-detail\"\n    )\n</code></pre>"},{"location":"guides/frameworks/django/#add-url-include","title":"Add URL Include","text":"<pre><code># Include another URLconf\nproject.add_url_include(\"api.urls\", path_prefix=\"api/\")\nproject.add_url_include(\"myapp.urls\", path_prefix=\"myapp/\")\n\n# Include with namespace\nproject.add_url_include(\n    \"myapp.urls\",\n    path_prefix=\"myapp/\",\n    namespace=\"myapp\"\n)\n</code></pre>"},{"location":"guides/frameworks/django/#remove-url-patterns","title":"Remove URL Patterns","text":"<pre><code># Remove by view name\nproject.remove_url_pattern_by_view(\"OldView\")\n\n# Remove by path\nproject.remove_url_pattern_by_path(\"deprecated/\")\n\n# Remove by name\nproject.remove_url_pattern_by_name(\"old-endpoint\")\n</code></pre>"},{"location":"guides/frameworks/django/#modify-url-patterns","title":"Modify URL Patterns","text":"<pre><code># Update path\nproject.update_url_path(\"user-list\", \"api/v2/users/\")\n\n# Update view\nproject.update_url_view(\"user-list\", \"UserListViewV2.as_view()\")\n</code></pre>"},{"location":"guides/frameworks/django/#app-discovery","title":"App Discovery","text":"<p>Find apps and files containing specific code:</p> <pre><code>with DjangoProject(\".\") as project:\n    # Find which app contains a class\n    app_name = project.find_app_containing_class(\"MyView\", filename=\"views.py\")\n    print(f\"MyView is in app: {app_name}\")\n\n    # Find file containing a class\n    file_path = project.find_file_containing_class(\"MyModel\")\n    print(f\"MyModel is in: {file_path}\")\n\n    # Find app by model\n    app_name = project.find_app_containing_model(\"User\")\n</code></pre>"},{"location":"guides/frameworks/django/#dependency-management","title":"Dependency Management","text":"<p>Manage pyproject.toml dependencies for Django projects:</p> <pre><code>with DjangoProject(\".\") as project:\n    # Add Django dependency\n    project.add_dependency(\"django\", \"^4.2.0\")\n\n    # Add related packages\n    project.add_dependency(\"django-rest-framework\", \"^3.14.0\")\n    project.add_dependency(\"django-cors-headers\", \"^4.0.0\")\n\n    # Update dependency\n    project.update_dependency(\"django\", \"^5.0.0\")\n\n    # Remove dependency\n    project.remove_dependency(\"django-deprecated-package\")\n</code></pre>"},{"location":"guides/frameworks/django/#model-operations","title":"Model Operations","text":"<p>Work with Django models:</p> <pre><code>with DjangoProject(\".\") as project:\n    # Find a model\n    model = project.find_model(\"User\")\n\n    # Add field to model\n    model.add_field(\"email_verified\", \"models.BooleanField(default=False)\")\n\n    # Remove field\n    model.remove_field(\"deprecated_field\")\n\n    # Add method to model\n    model.add_method(\"get_full_name\", \"\"\"\n    def get_full_name(self):\n        return f\"{self.first_name} {self.last_name}\"\n    \"\"\")\n\n    # Add Meta option\n    model.add_meta_option(\"ordering\", '[\"-created_at\"]')\n</code></pre>"},{"location":"guides/frameworks/django/#view-operations","title":"View Operations","text":"<p>Work with Django views:</p> <pre><code>with DjangoProject(\".\") as project:\n    # Find a view class\n    view = project.find_view(\"UserListView\")\n\n    # Change base class\n    view.change_base_class(\"ListView\", \"CustomListView\")\n\n    # Add mixin\n    view.add_mixin(\"LoginRequiredMixin\")\n\n    # Add attribute\n    view.add_attribute(\"paginate_by\", \"25\")\n\n    # Add method\n    view.add_method(\"get_queryset\", \"\"\"\n    def get_queryset(self):\n        return super().get_queryset().filter(active=True)\n    \"\"\")\n</code></pre>"},{"location":"guides/frameworks/django/#migration-helpers","title":"Migration Helpers","text":"<pre><code>with DjangoProject(\".\") as project:\n    # Generate migration name suggestion\n    migration_name = project.suggest_migration_name(\"myapp\")\n\n    # Find migrations that need squashing\n    migrations = project.find_migrations_to_squash(\"myapp\", threshold=20)\n</code></pre>"},{"location":"guides/frameworks/django/#common-patterns","title":"Common Patterns","text":""},{"location":"guides/frameworks/django/#set-up-new-django-app","title":"Set Up New Django App","text":"<pre><code>with DjangoProject(\".\") as project:\n    app_name = \"newapp\"\n\n    # Add to INSTALLED_APPS\n    project.add_installed_app(app_name)\n\n    # Add URL include\n    project.add_url_include(f\"{app_name}.urls\", path_prefix=f\"{app_name}/\")\n\n    # Add any required middleware\n    if needs_middleware:\n        project.add_middleware(f\"{app_name}.middleware.CustomMiddleware\")\n</code></pre>"},{"location":"guides/frameworks/django/#migrate-to-django-rest-framework","title":"Migrate to Django REST Framework","text":"<pre><code>with DjangoProject(\".\") as project:\n    # Add DRF to dependencies\n    project.add_dependency(\"djangorestframework\", \"^3.14.0\")\n\n    # Add to INSTALLED_APPS\n    project.add_installed_app(\"rest_framework\")\n\n    # Add REST framework settings\n    project.add_setting(\"REST_FRAMEWORK\", \"\"\"{\n        'DEFAULT_AUTHENTICATION_CLASSES': [\n            'rest_framework.authentication.SessionAuthentication',\n        ],\n        'DEFAULT_PERMISSION_CLASSES': [\n            'rest_framework.permissions.IsAuthenticated',\n        ],\n    }\"\"\")\n</code></pre>"},{"location":"guides/frameworks/django/#update-django-version","title":"Update Django Version","text":"<pre><code>with DjangoProject(\".\") as project:\n    # Update dependency\n    project.update_dependency(\"django\", \"^5.0.0\")\n\n    # Update deprecated settings\n    project.delete_setting(\"USE_L10N\")  # Removed in Django 4.0\n\n    # Update middleware (if using old names)\n    project.remove_middleware(\"django.middleware.csrf.CsrfViewMiddleware\")\n    project.add_middleware(\"django.middleware.csrf.CsrfViewMiddleware\")\n</code></pre>"},{"location":"guides/frameworks/django/#add-authentication-app","title":"Add Authentication App","text":"<pre><code>with DjangoProject(\".\") as project:\n    # Add dependencies\n    project.add_dependency(\"django-allauth\", \"^0.54.0\")\n\n    # Add to INSTALLED_APPS\n    for app in [\n        \"django.contrib.sites\",\n        \"allauth\",\n        \"allauth.account\",\n        \"allauth.socialaccount\",\n    ]:\n        project.add_installed_app(app)\n\n    # Add settings\n    project.add_setting(\"SITE_ID\", \"1\")\n    project.add_setting(\"AUTHENTICATION_BACKENDS\", \"\"\"[\n        'django.contrib.auth.backends.ModelBackend',\n        'allauth.account.auth_backends.AuthenticationBackend',\n    ]\"\"\")\n\n    # Add URLs\n    project.add_url_include(\"allauth.urls\", path_prefix=\"accounts/\")\n</code></pre>"},{"location":"guides/frameworks/django/#integration-with-core-rejig","title":"Integration with Core Rejig","text":"<p>DjangoProject extends the core Rejig functionality:</p> <pre><code>with DjangoProject(\".\") as project:\n    # All core Rejig operations work\n    project.find_class(\"MyModel\").add_method(\"__str__\", ...)\n    project.find_function(\"helper\").rename(\"utility\")\n\n    # Plus Django-specific operations\n    project.add_installed_app(\"newapp\")\n    project.add_middleware(\"myapp.middleware.Custom\")\n</code></pre>"},{"location":"guides/frameworks/django/#settings-file-detection","title":"Settings File Detection","text":"<p>DjangoProject automatically finds your settings file:</p> <pre><code>with DjangoProject(\".\") as project:\n    # Automatically detects settings from:\n    # - DJANGO_SETTINGS_MODULE environment variable\n    # - config/settings.py, config/settings/base.py\n    # - project_name/settings.py\n    # - settings.py\n\n    print(f\"Settings file: {project.settings_file}\")\n</code></pre> <p>You can also specify explicitly:</p> <pre><code>project = DjangoProject(\".\", settings_module=\"config.settings.production\")\n</code></pre>"},{"location":"guides/frameworks/fastapi/","title":"FastAPI Support","text":"<p>Rejig provides specialized tools for refactoring FastAPI applications: managing endpoints, dependencies, middleware, and routers.</p>"},{"location":"guides/frameworks/fastapi/#installation","title":"Installation","text":"<pre><code>pip install rejig[fastapi]\n</code></pre>"},{"location":"guides/frameworks/fastapi/#fastapiproject","title":"FastAPIProject","text":"<p>The <code>FastAPIProject</code> class provides FastAPI-specific operations.</p> <pre><code>from rejig.frameworks.fastapi import FastAPIProject\n\napi = FastAPIProject(\"src/\")\n\n# Find FastAPI app instance\nprint(f\"App file: {api.app_file}\")\n</code></pre>"},{"location":"guides/frameworks/fastapi/#endpoint-management","title":"Endpoint Management","text":""},{"location":"guides/frameworks/fastapi/#add-endpoints","title":"Add Endpoints","text":"<pre><code>api = FastAPIProject(\"src/\")\n\n# Add GET endpoint\napi.add_endpoint(\"/users\", \"get_users\", method=\"GET\")\n\n# Add with all options\napi.add_endpoint(\n    path=\"/users/{user_id}\",\n    function_name=\"get_user\",\n    method=\"GET\",\n    response_model=\"User\",\n    status_code=200,\n    tags=[\"users\"],\n    summary=\"Get user by ID\",\n    description=\"Retrieve a single user by their unique identifier.\",\n)\n\n# Add POST endpoint\napi.add_endpoint(\n    path=\"/users\",\n    function_name=\"create_user\",\n    method=\"POST\",\n    response_model=\"User\",\n    status_code=201,\n    body_model=\"UserCreate\",\n)\n</code></pre>"},{"location":"guides/frameworks/fastapi/#add-multiple-methods","title":"Add Multiple Methods","text":"<pre><code># Add CRUD endpoints for a resource\napi.add_crud_endpoints(\n    resource=\"users\",\n    model=\"User\",\n    create_model=\"UserCreate\",\n    update_model=\"UserUpdate\",\n)\n\n# Generates:\n# GET /users -&gt; list_users\n# POST /users -&gt; create_user\n# GET /users/{id} -&gt; get_user\n# PUT /users/{id} -&gt; update_user\n# DELETE /users/{id} -&gt; delete_user\n</code></pre>"},{"location":"guides/frameworks/fastapi/#remove-endpoints","title":"Remove Endpoints","text":"<pre><code># Remove by path and method\napi.remove_endpoint(\"/deprecated\", method=\"GET\")\n\n# Remove by function name\napi.remove_endpoint_by_function(\"old_handler\")\n\n# Remove all methods for a path\napi.remove_endpoint(\"/deprecated\")  # Removes all methods\n</code></pre>"},{"location":"guides/frameworks/fastapi/#modify-endpoints","title":"Modify Endpoints","text":"<pre><code># Change path\napi.update_endpoint_path(\"get_user\", \"/api/v2/users/{user_id}\")\n\n# Add response model\napi.set_endpoint_response_model(\"get_users\", \"list[User]\")\n\n# Add tags\napi.add_endpoint_tags(\"get_user\", [\"users\", \"api\"])\n\n# Change status code\napi.set_endpoint_status_code(\"create_user\", 201)\n</code></pre>"},{"location":"guides/frameworks/fastapi/#list-endpoints","title":"List Endpoints","text":"<pre><code>endpoints = api.list_endpoints()\n\nfor ep in endpoints:\n    print(f\"{ep.method} {ep.path}\")\n    print(f\"  Function: {ep.function}\")\n    print(f\"  Response model: {ep.response_model}\")\n    print(f\"  Tags: {ep.tags}\")\n</code></pre>"},{"location":"guides/frameworks/fastapi/#router-management","title":"Router Management","text":""},{"location":"guides/frameworks/fastapi/#create-router","title":"Create Router","text":"<pre><code># Add a new router\napi.add_router(\n    name=\"users_router\",\n    prefix=\"/users\",\n    tags=[\"users\"],\n)\n\n# Creates:\n# users_router = APIRouter(prefix=\"/users\", tags=[\"users\"])\n</code></pre>"},{"location":"guides/frameworks/fastapi/#include-router","title":"Include Router","text":"<pre><code># Include router in main app\napi.include_router(\"users_router\", prefix=\"/api/v1\")\n\n# This adds:\n# app.include_router(users_router, prefix=\"/api/v1\")\n</code></pre>"},{"location":"guides/frameworks/fastapi/#add-endpoint-to-router","title":"Add Endpoint to Router","text":"<pre><code># Add endpoint to specific router\napi.add_endpoint(\n    path=\"/{user_id}\",\n    function_name=\"get_user\",\n    method=\"GET\",\n    router=\"users_router\",\n)\n</code></pre>"},{"location":"guides/frameworks/fastapi/#list-routers","title":"List Routers","text":"<pre><code>routers = api.list_routers()\n\nfor router in routers:\n    print(f\"Router: {router.name}\")\n    print(f\"  Prefix: {router.prefix}\")\n    print(f\"  Endpoints: {len(router.endpoints)}\")\n</code></pre>"},{"location":"guides/frameworks/fastapi/#dependency-injection","title":"Dependency Injection","text":""},{"location":"guides/frameworks/fastapi/#add-dependency","title":"Add Dependency","text":"<pre><code># Add a simple dependency\napi.add_dependency(\"get_db\", \"Depends(get_database)\")\n\n# Add dependency function\napi.add_dependency_function(\n    name=\"get_current_user\",\n    body=\"\"\"\nasync def get_current_user(token: str = Depends(oauth2_scheme)) -&gt; User:\n    user = await verify_token(token)\n    if not user:\n        raise HTTPException(status_code=401, detail=\"Invalid token\")\n    return user\n    \"\"\",\n)\n</code></pre>"},{"location":"guides/frameworks/fastapi/#add-dependency-to-endpoint","title":"Add Dependency to Endpoint","text":"<pre><code># Add dependency parameter to endpoint\napi.add_endpoint_dependency(\n    function_name=\"get_users\",\n    param_name=\"db\",\n    dependency=\"Depends(get_db)\",\n)\n\n# Add current user dependency\napi.add_endpoint_dependency(\n    function_name=\"get_users\",\n    param_name=\"current_user\",\n    dependency=\"Depends(get_current_user)\",\n    type_hint=\"User\",\n)\n</code></pre>"},{"location":"guides/frameworks/fastapi/#add-router-level-dependencies","title":"Add Router-Level Dependencies","text":"<pre><code># Add dependency to all endpoints in router\napi.add_router_dependency(\n    router=\"users_router\",\n    dependency=\"Depends(verify_api_key)\",\n)\n</code></pre>"},{"location":"guides/frameworks/fastapi/#common-dependencies","title":"Common Dependencies","text":"<pre><code># Add database session dependency\napi.add_dependency_function(\n    \"get_db\",\n    body=\"\"\"\nasync def get_db() -&gt; AsyncGenerator[AsyncSession, None]:\n    async with async_session() as session:\n        yield session\n    \"\"\",\n)\n\n# Add authentication dependency\napi.add_dependency_function(\n    \"get_current_user\",\n    body=\"\"\"\nasync def get_current_user(\n    token: str = Depends(oauth2_scheme),\n    db: AsyncSession = Depends(get_db),\n) -&gt; User:\n    payload = jwt.decode(token, SECRET_KEY, algorithms=[\"HS256\"])\n    user = await db.get(User, payload[\"sub\"])\n    if not user:\n        raise HTTPException(status_code=401)\n    return user\n    \"\"\",\n)\n</code></pre>"},{"location":"guides/frameworks/fastapi/#middleware","title":"Middleware","text":""},{"location":"guides/frameworks/fastapi/#add-middleware","title":"Add Middleware","text":"<pre><code># Add CORS middleware\napi.add_middleware(\n    \"CORSMiddleware\",\n    allow_origins=[\"*\"],\n    allow_credentials=True,\n    allow_methods=[\"*\"],\n    allow_headers=[\"*\"],\n)\n\n# Add custom middleware\napi.add_middleware(\n    \"CustomMiddleware\",\n    custom_param=\"value\",\n)\n</code></pre>"},{"location":"guides/frameworks/fastapi/#add-custom-middleware-class","title":"Add Custom Middleware Class","text":"<pre><code>api.add_middleware_class(\n    name=\"TimingMiddleware\",\n    body=\"\"\"\nclass TimingMiddleware(BaseHTTPMiddleware):\n    async def dispatch(self, request: Request, call_next):\n        start = time.time()\n        response = await call_next(request)\n        duration = time.time() - start\n        response.headers[\"X-Process-Time\"] = str(duration)\n        return response\n    \"\"\",\n)\n\n# Register it\napi.add_middleware(\"TimingMiddleware\")\n</code></pre>"},{"location":"guides/frameworks/fastapi/#remove-middleware","title":"Remove Middleware","text":"<pre><code>api.remove_middleware(\"DeprecatedMiddleware\")\n</code></pre>"},{"location":"guides/frameworks/fastapi/#exception-handlers","title":"Exception Handlers","text":""},{"location":"guides/frameworks/fastapi/#add-exception-handler","title":"Add Exception Handler","text":"<pre><code># Add handler for specific exception\napi.add_exception_handler(\n    exception_class=\"ValidationError\",\n    handler_name=\"validation_error_handler\",\n    body=\"\"\"\nasync def validation_error_handler(request: Request, exc: ValidationError):\n    return JSONResponse(\n        status_code=422,\n        content={\"detail\": exc.errors()},\n    )\n    \"\"\",\n)\n\n# Add HTTP exception handler\napi.add_exception_handler(\n    exception_class=\"HTTPException\",\n    handler_name=\"http_exception_handler\",\n)\n</code></pre>"},{"location":"guides/frameworks/fastapi/#add-generic-error-handler","title":"Add Generic Error Handler","text":"<pre><code>api.add_exception_handler(\n    exception_class=\"Exception\",\n    handler_name=\"generic_error_handler\",\n    body=\"\"\"\nasync def generic_error_handler(request: Request, exc: Exception):\n    logger.exception(\"Unhandled error\")\n    return JSONResponse(\n        status_code=500,\n        content={\"detail\": \"Internal server error\"},\n    )\n    \"\"\",\n)\n</code></pre>"},{"location":"guides/frameworks/fastapi/#background-tasks","title":"Background Tasks","text":"<pre><code># Add background task to endpoint\napi.add_background_task(\n    endpoint=\"create_user\",\n    task_function=\"send_welcome_email\",\n    task_args=[\"user.email\"],\n)\n\n# Modifies create_user to include:\n# background_tasks.add_task(send_welcome_email, user.email)\n</code></pre>"},{"location":"guides/frameworks/fastapi/#response-models","title":"Response Models","text":""},{"location":"guides/frameworks/fastapi/#create-response-model","title":"Create Response Model","text":"<pre><code># Add Pydantic model for responses\napi.add_response_model(\n    name=\"UserResponse\",\n    fields={\n        \"id\": \"int\",\n        \"email\": \"str\",\n        \"name\": \"str\",\n        \"created_at\": \"datetime\",\n    },\n)\n\n# Create from existing model\napi.create_response_model_from(\"User\", \"UserResponse\", exclude=[\"password\"])\n</code></pre>"},{"location":"guides/frameworks/fastapi/#common-patterns","title":"Common Patterns","text":""},{"location":"guides/frameworks/fastapi/#add-api-versioning","title":"Add API Versioning","text":"<pre><code>api = FastAPIProject(\"src/\")\n\n# Create versioned routers\napi.add_router(\"v1_router\", prefix=\"/api/v1\", tags=[\"v1\"])\napi.add_router(\"v2_router\", prefix=\"/api/v2\", tags=[\"v2\"])\n\n# Move endpoints to v1\nfor ep in api.list_endpoints():\n    if not ep.router:\n        api.move_endpoint_to_router(ep.function, \"v1_router\")\n</code></pre>"},{"location":"guides/frameworks/fastapi/#add-authentication","title":"Add Authentication","text":"<pre><code>api = FastAPIProject(\"src/\")\n\n# Add OAuth2 scheme\napi.add_code(\"\"\"\noauth2_scheme = OAuth2PasswordBearer(tokenUrl=\"token\")\n\"\"\")\n\n# Add authentication dependency\napi.add_dependency_function(\n    \"get_current_user\",\n    body=\"\"\"\nasync def get_current_user(token: str = Depends(oauth2_scheme)) -&gt; User:\n    credentials_exception = HTTPException(\n        status_code=401,\n        detail=\"Could not validate credentials\",\n        headers={\"WWW-Authenticate\": \"Bearer\"},\n    )\n    try:\n        payload = jwt.decode(token, SECRET_KEY, algorithms=[ALGORITHM])\n        user_id: int = payload.get(\"sub\")\n        if user_id is None:\n            raise credentials_exception\n    except JWTError:\n        raise credentials_exception\n    return await get_user(user_id)\n    \"\"\",\n)\n\n# Add login endpoint\napi.add_endpoint(\n    path=\"/token\",\n    function_name=\"login\",\n    method=\"POST\",\n    response_model=\"Token\",\n)\n</code></pre>"},{"location":"guides/frameworks/fastapi/#add-rate-limiting","title":"Add Rate Limiting","text":"<pre><code>api = FastAPIProject(\"src/\")\n\n# Add slowapi for rate limiting\napi.add_dependency(\"limiter\", \"Limiter(key_func=get_remote_address)\")\n\n# Add to specific endpoint\napi.add_endpoint_decorator(\n    \"get_users\",\n    '@limiter.limit(\"10/minute\")',\n)\n</code></pre>"},{"location":"guides/frameworks/fastapi/#convert-to-async","title":"Convert to Async","text":"<pre><code>api = FastAPIProject(\"src/\")\n\n# Convert sync endpoints to async\nfor func in api.find_functions(pattern=\"^(get|create|update|delete)_\"):\n    if not func.is_async:\n        func.convert_to_async()\n</code></pre>"},{"location":"guides/frameworks/fastapi/#integration-with-core-rejig","title":"Integration with Core Rejig","text":"<p>FastAPIProject extends core Rejig functionality:</p> <pre><code>api = FastAPIProject(\"src/\")\n\n# Core Rejig operations work\napi.find_function(\"helper\").rename(\"utility\")\napi.find_class(\"UserService\").add_method(...)\n\n# Plus FastAPI-specific operations\napi.add_endpoint(\"/new\", \"new_handler\", method=\"GET\")\napi.add_middleware(\"CORSMiddleware\", ...)\n</code></pre>"},{"location":"guides/frameworks/fastapi/#openapi-customization","title":"OpenAPI Customization","text":"<pre><code>api = FastAPIProject(\"src/\")\n\n# Update OpenAPI metadata\napi.set_openapi_info(\n    title=\"My API\",\n    version=\"1.0.0\",\n    description=\"A fantastic API\",\n)\n\n# Add OpenAPI tags\napi.add_openapi_tag(\n    name=\"users\",\n    description=\"User management endpoints\",\n)\n\n# Set contact info\napi.set_openapi_contact(\n    name=\"API Support\",\n    email=\"support@example.com\",\n    url=\"https://support.example.com\",\n)\n</code></pre>"},{"location":"guides/frameworks/fastapi/#testing-helpers","title":"Testing Helpers","text":"<pre><code># Generate test client setup\napi.generate_test_client(\"tests/conftest.py\")\n\n# Generates:\n# import pytest\n# from httpx import AsyncClient\n# from main import app\n#\n# @pytest.fixture\n# async def client():\n#     async with AsyncClient(app=app, base_url=\"http://test\") as client:\n#         yield client\n\n# Generate endpoint tests\napi.generate_endpoint_tests(\"tests/test_users.py\", router=\"users_router\")\n</code></pre>"},{"location":"guides/frameworks/flask/","title":"Flask Support","text":"<p>Rejig provides specialized tools for refactoring Flask applications: managing routes, blueprints, error handlers, and middleware.</p>"},{"location":"guides/frameworks/flask/#installation","title":"Installation","text":"<pre><code>pip install rejig[flask]\n</code></pre>"},{"location":"guides/frameworks/flask/#flaskproject","title":"FlaskProject","text":"<p>The <code>FlaskProject</code> class provides Flask-specific operations.</p> <pre><code>from rejig.frameworks.flask import FlaskProject\n\nflask = FlaskProject(\"src/\")\n\n# Find Flask app instance\nprint(f\"App file: {flask.app_file}\")\nprint(f\"App name: {flask.app_name}\")\n</code></pre>"},{"location":"guides/frameworks/flask/#route-management","title":"Route Management","text":""},{"location":"guides/frameworks/flask/#add-routes","title":"Add Routes","text":"<pre><code>flask = FlaskProject(\"src/\")\n\n# Add a simple route\nflask.add_route(\"/users\", \"get_users\")\n\n# Add with HTTP methods\nflask.add_route(\"/users\", \"list_users\", methods=[\"GET\"])\nflask.add_route(\"/users\", \"create_user\", methods=[\"POST\"])\n\n# Add with all parameters\nflask.add_route(\n    path=\"/users/&lt;int:user_id&gt;\",\n    function_name=\"get_user\",\n    methods=[\"GET\"],\n    endpoint=\"user_detail\",\n)\n</code></pre>"},{"location":"guides/frameworks/flask/#remove-routes","title":"Remove Routes","text":"<pre><code># Remove by path\nflask.remove_route(\"/deprecated/endpoint\")\n\n# Remove by function name\nflask.remove_route_by_function(\"old_handler\")\n\n# Remove by endpoint\nflask.remove_route_by_endpoint(\"deprecated_endpoint\")\n</code></pre>"},{"location":"guides/frameworks/flask/#modify-routes","title":"Modify Routes","text":"<pre><code># Change route path\nflask.update_route_path(\"get_user\", \"/api/v2/users/&lt;int:id&gt;\")\n\n# Add methods to existing route\nflask.add_route_methods(\"user_handler\", [\"PUT\", \"PATCH\"])\n\n# Remove methods from route\nflask.remove_route_methods(\"user_handler\", [\"DELETE\"])\n</code></pre>"},{"location":"guides/frameworks/flask/#list-routes","title":"List Routes","text":"<pre><code># Get all routes\nroutes = flask.list_routes()\n\nfor route in routes:\n    print(f\"{route.path} -&gt; {route.function}\")\n    print(f\"  Methods: {route.methods}\")\n    print(f\"  Blueprint: {route.blueprint or 'main'}\")\n</code></pre>"},{"location":"guides/frameworks/flask/#blueprint-management","title":"Blueprint Management","text":""},{"location":"guides/frameworks/flask/#create-blueprint","title":"Create Blueprint","text":"<pre><code># Add a new blueprint\nflask.add_blueprint(\n    name=\"api\",\n    import_name=\"myapp.api\",\n    url_prefix=\"/api\"\n)\n\n# This creates:\n# api_bp = Blueprint('api', 'myapp.api', url_prefix='/api')\n</code></pre>"},{"location":"guides/frameworks/flask/#register-blueprint","title":"Register Blueprint","text":"<pre><code># Register existing blueprint with app\nflask.register_blueprint(\"api_bp\", url_prefix=\"/api/v1\")\n\n# This adds to app file:\n# app.register_blueprint(api_bp, url_prefix='/api/v1')\n</code></pre>"},{"location":"guides/frameworks/flask/#add-route-to-blueprint","title":"Add Route to Blueprint","text":"<pre><code># Add route to specific blueprint\nflask.add_route(\n    path=\"/items\",\n    function_name=\"list_items\",\n    blueprint=\"api\"  # Add to api blueprint\n)\n</code></pre>"},{"location":"guides/frameworks/flask/#list-blueprints","title":"List Blueprints","text":"<pre><code>blueprints = flask.list_blueprints()\n\nfor bp in blueprints:\n    print(f\"Blueprint: {bp.name}\")\n    print(f\"  URL prefix: {bp.url_prefix}\")\n    print(f\"  Routes: {len(bp.routes)}\")\n</code></pre>"},{"location":"guides/frameworks/flask/#error-handlers","title":"Error Handlers","text":""},{"location":"guides/frameworks/flask/#add-error-handler","title":"Add Error Handler","text":"<pre><code># Add 404 handler\nflask.add_error_handler(404, \"handle_not_found\")\n\n# This generates:\n# @app.errorhandler(404)\n# def handle_not_found(error):\n#     return {'error': 'Not found'}, 404\n\n# Add with custom body\nflask.add_error_handler(\n    error_code=500,\n    function_name=\"handle_server_error\",\n    body=\"\"\"\n    logger.exception(error)\n    return {'error': 'Internal server error'}, 500\n    \"\"\"\n)\n</code></pre>"},{"location":"guides/frameworks/flask/#add-exception-handler","title":"Add Exception Handler","text":"<pre><code># Handle specific exception type\nflask.add_error_handler(\n    \"ValidationError\",\n    \"handle_validation_error\",\n    body=\"\"\"\n    return {'error': str(error)}, 400\n    \"\"\"\n)\n</code></pre>"},{"location":"guides/frameworks/flask/#remove-error-handler","title":"Remove Error Handler","text":"<pre><code>flask.remove_error_handler(404)\nflask.remove_error_handler(\"ValidationError\")\n</code></pre>"},{"location":"guides/frameworks/flask/#middleware-beforeafter-request","title":"Middleware / Before/After Request","text":""},{"location":"guides/frameworks/flask/#add-before-request","title":"Add Before Request","text":"<pre><code>flask.add_before_request(\"check_authentication\")\n\n# Generates:\n# @app.before_request\n# def check_authentication():\n#     pass  # TODO: implement\n\n# With body\nflask.add_before_request(\n    \"log_request\",\n    body=\"\"\"\n    logger.info(f\"Request: {request.method} {request.path}\")\n    \"\"\"\n)\n</code></pre>"},{"location":"guides/frameworks/flask/#add-after-request","title":"Add After Request","text":"<pre><code>flask.add_after_request(\"add_cors_headers\")\n\n# With body\nflask.add_after_request(\n    \"add_security_headers\",\n    body=\"\"\"\n    response.headers['X-Content-Type-Options'] = 'nosniff'\n    response.headers['X-Frame-Options'] = 'DENY'\n    return response\n    \"\"\"\n)\n</code></pre>"},{"location":"guides/frameworks/flask/#add-teardown","title":"Add Teardown","text":"<pre><code>flask.add_teardown_request(\"cleanup_db_session\")\nflask.add_teardown_appcontext(\"close_resources\")\n</code></pre>"},{"location":"guides/frameworks/flask/#remove-handlers","title":"Remove Handlers","text":"<pre><code>flask.remove_before_request(\"deprecated_check\")\nflask.remove_after_request(\"old_handler\")\n</code></pre>"},{"location":"guides/frameworks/flask/#context-processors","title":"Context Processors","text":"<pre><code># Add context processor\nflask.add_context_processor(\"inject_user\")\n\n# With body\nflask.add_context_processor(\n    \"inject_common_data\",\n    body=\"\"\"\n    return {\n        'app_name': 'My Flask App',\n        'current_user': get_current_user(),\n    }\n    \"\"\"\n)\n</code></pre>"},{"location":"guides/frameworks/flask/#configuration","title":"Configuration","text":""},{"location":"guides/frameworks/flask/#add-config-class","title":"Add Config Class","text":"<pre><code>flask.add_config_class(\n    name=\"ProductionConfig\",\n    parent=\"Config\",\n    settings={\n        \"DEBUG\": \"False\",\n        \"SQLALCHEMY_DATABASE_URI\": 'os.environ.get(\"DATABASE_URL\")',\n    }\n)\n</code></pre>"},{"location":"guides/frameworks/flask/#modify-config","title":"Modify Config","text":"<pre><code># Add setting to existing config class\nflask.add_config_setting(\"Config\", \"MAX_CONTENT_LENGTH\", \"16 * 1024 * 1024\")\n\n# Update setting\nflask.update_config_setting(\"Config\", \"DEBUG\", \"False\")\n</code></pre>"},{"location":"guides/frameworks/flask/#extension-management","title":"Extension Management","text":""},{"location":"guides/frameworks/flask/#add-extension","title":"Add Extension","text":"<pre><code># Add Flask-SQLAlchemy\nflask.add_extension(\"Flask-SQLAlchemy\", \"db\", \"SQLAlchemy()\")\n\n# This adds:\n# from flask_sqlalchemy import SQLAlchemy\n# db = SQLAlchemy()\n\n# In create_app or app initialization:\n# db.init_app(app)\n</code></pre>"},{"location":"guides/frameworks/flask/#common-extensions","title":"Common Extensions","text":"<pre><code># Add Flask-Migrate\nflask.add_extension(\"Flask-Migrate\", \"migrate\", \"Migrate()\")\n\n# Add Flask-Login\nflask.add_extension(\"Flask-Login\", \"login_manager\", \"LoginManager()\")\n\n# Add Flask-CORS\nflask.add_extension(\"Flask-Cors\", \"cors\", \"CORS()\")\n</code></pre>"},{"location":"guides/frameworks/flask/#common-patterns","title":"Common Patterns","text":""},{"location":"guides/frameworks/flask/#convert-to-application-factory","title":"Convert to Application Factory","text":"<pre><code>flask = FlaskProject(\"src/\")\n\n# Convert from single app instance to factory pattern\nflask.convert_to_factory()\n\n# Before:\n# app = Flask(__name__)\n# app.config.from_object(Config)\n\n# After:\n# def create_app(config_class=Config):\n#     app = Flask(__name__)\n#     app.config.from_object(config_class)\n#     return app\n</code></pre>"},{"location":"guides/frameworks/flask/#add-api-versioning","title":"Add API Versioning","text":"<pre><code>flask = FlaskProject(\"src/\")\n\n# Create versioned blueprints\nflask.add_blueprint(\"api_v1\", \"myapp.api.v1\", url_prefix=\"/api/v1\")\nflask.add_blueprint(\"api_v2\", \"myapp.api.v2\", url_prefix=\"/api/v2\")\n\n# Move existing routes to v1\nfor route in flask.list_routes():\n    if route.path.startswith(\"/api/\"):\n        flask.move_route_to_blueprint(route.function, \"api_v1\")\n</code></pre>"},{"location":"guides/frameworks/flask/#add-authentication","title":"Add Authentication","text":"<pre><code>flask = FlaskProject(\"src/\")\n\n# Add Flask-Login\nflask.add_extension(\"Flask-Login\", \"login_manager\", \"LoginManager()\")\n\n# Add login required decorator usage\nflask.add_before_request(\n    \"require_login\",\n    blueprint=\"api\",  # Only for API blueprint\n    body=\"\"\"\n    if not current_user.is_authenticated:\n        return {'error': 'Unauthorized'}, 401\n    \"\"\"\n)\n\n# Add login/logout routes\nflask.add_route(\"/auth/login\", \"login\", methods=[\"POST\"])\nflask.add_route(\"/auth/logout\", \"logout\", methods=[\"POST\"])\n</code></pre>"},{"location":"guides/frameworks/flask/#add-logging","title":"Add Logging","text":"<pre><code>flask = FlaskProject(\"src/\")\n\n# Add request logging\nflask.add_before_request(\n    \"log_request_start\",\n    body=\"\"\"\n    g.request_start = time.time()\n    logger.info(f\"Request started: {request.method} {request.path}\")\n    \"\"\"\n)\n\nflask.add_after_request(\n    \"log_request_end\",\n    body=\"\"\"\n    duration = time.time() - g.request_start\n    logger.info(f\"Request completed: {response.status_code} ({duration:.3f}s)\")\n    return response\n    \"\"\"\n)\n</code></pre>"},{"location":"guides/frameworks/flask/#integration-with-core-rejig","title":"Integration with Core Rejig","text":"<p>FlaskProject extends core Rejig functionality:</p> <pre><code>flask = FlaskProject(\"src/\")\n\n# Core Rejig operations work\nflask.find_function(\"helper\").rename(\"utility\")\nflask.find_class(\"UserService\").add_method(...)\n\n# Plus Flask-specific operations\nflask.add_route(\"/new\", \"new_handler\")\nflask.add_blueprint(\"admin\", ...)\n</code></pre>"},{"location":"guides/frameworks/flask/#route-function-generation","title":"Route Function Generation","text":"<pre><code># Generate route function with common patterns\nflask.generate_route_function(\n    name=\"get_users\",\n    path=\"/users\",\n    methods=[\"GET\"],\n    template=\"api\",  # Use API template (returns JSON)\n)\n\n# Template options:\n# - \"api\": Returns JSON, includes error handling\n# - \"view\": Renders template\n# - \"redirect\": Returns redirect\n# - \"minimal\": Just pass\n\n# Generated API template:\n# @app.route('/users', methods=['GET'])\n# def get_users():\n#     try:\n#         # TODO: implement\n#         return jsonify({'data': []})\n#     except Exception as e:\n#         return jsonify({'error': str(e)}), 500\n</code></pre>"},{"location":"guides/frameworks/flask/#blueprint-discovery","title":"Blueprint Discovery","text":"<pre><code>flask = FlaskProject(\"src/\")\n\n# Find all blueprints in the project\nblueprints = flask.discover_blueprints()\n\nfor bp in blueprints:\n    print(f\"Found blueprint: {bp.name}\")\n    print(f\"  File: {bp.file_path}\")\n    print(f\"  Registered: {bp.is_registered}\")\n</code></pre>"},{"location":"reference/analysis/","title":"Analysis Reference","text":"<p>Reference for code analysis types and findings.</p>"},{"location":"reference/analysis/#analysistype-enum","title":"AnalysisType Enum","text":"<p>Types of analysis issues detected.</p>"},{"location":"reference/analysis/#complexity-issues","title":"Complexity Issues","text":"Type Description Default Threshold <code>HIGH_CYCLOMATIC_COMPLEXITY</code> Function has too many branches 10 <code>DEEP_NESTING</code> Code nested too deeply 4 levels <code>LONG_FUNCTION</code> Function has too many lines 50 lines <code>LONG_CLASS</code> Class has too many lines/methods 300 lines <code>TOO_MANY_PARAMETERS</code> Function has too many parameters 5 <code>TOO_MANY_BRANCHES</code> Too many if/elif branches 8 <code>TOO_MANY_RETURNS</code> Function has too many return statements 4"},{"location":"reference/analysis/#documentation-issues","title":"Documentation Issues","text":"Type Description <code>MISSING_TYPE_HINT</code> Function lacks type annotations <code>MISSING_DOCSTRING</code> Public function/class lacks docstring"},{"location":"reference/analysis/#code-quality-issues","title":"Code Quality Issues","text":"Type Description <code>BARE_EXCEPT</code> Catching all exceptions (<code>except:</code>) <code>HARDCODED_STRING</code> Magic string that should be a constant <code>MAGIC_NUMBER</code> Numeric literal that should be named <code>TODO_COMMENT</code> TODO/FIXME/XXX/HACK comment in code"},{"location":"reference/analysis/#dead-code-issues","title":"Dead Code Issues","text":"Type Description <code>UNUSED_FUNCTION</code> Function is never called <code>UNUSED_CLASS</code> Class is never instantiated or subclassed <code>UNUSED_VARIABLE</code> Variable is assigned but never used <code>UNUSED_IMPORT</code> Import is never used <code>UNREACHABLE_CODE</code> Code after return/raise/break"},{"location":"reference/analysis/#analysisfinding","title":"AnalysisFinding","text":"<p>Dataclass representing an analysis finding.</p>"},{"location":"reference/analysis/#properties","title":"Properties","text":"Property Type Description <code>type</code> <code>AnalysisType</code> Type of issue <code>file_path</code> <code>Path</code> File containing the issue <code>line_number</code> <code>int</code> Line number (1-indexed) <code>name</code> <code>str</code> Name of the element <code>message</code> <code>str</code> Human-readable description <code>severity</code> <code>str</code> \"high\", \"medium\", or \"low\" <code>value</code> <code>Any</code> Actual value (e.g., complexity score) <code>threshold</code> <code>Any</code> Threshold that was exceeded <code>context</code> <code>dict</code> Additional context"},{"location":"reference/analysis/#analysistarget","title":"AnalysisTarget","text":"<p>Target wrapping an analysis finding.</p>"},{"location":"reference/analysis/#properties_1","title":"Properties","text":"<p>All properties from <code>AnalysisFinding</code> plus:</p> Property Type Description <code>finding</code> <code>AnalysisFinding</code> The underlying finding"},{"location":"reference/analysis/#navigation-methods","title":"Navigation Methods","text":"Method Returns Description <code>to_file_target()</code> <code>FileTarget</code> Get file containing issue <code>to_line_target()</code> <code>LineTarget</code> Get line with issue <code>exists()</code> <code>bool</code> Always True for valid findings"},{"location":"reference/analysis/#analysistargetlist","title":"AnalysisTargetList","text":"<p>List of analysis findings with filtering and aggregation.</p>"},{"location":"reference/analysis/#filtering","title":"Filtering","text":"Method Description <code>by_type(type)</code> Filter by single type <code>by_types(types)</code> Filter by multiple types <code>by_severity(severity)</code> Filter by severity level <code>in_file(path)</code> Filter by file path <code>in_directory(path)</code> Filter by directory <code>filter(predicate)</code> Filter by callable"},{"location":"reference/analysis/#aggregation","title":"Aggregation","text":"Method Returns Description <code>group_by_file()</code> <code>dict[Path, list]</code> Group by file <code>group_by_type()</code> <code>dict[str, list]</code> Group by type <code>count_by_type()</code> <code>dict[str, int]</code> Count per type <code>count_by_severity()</code> <code>dict[str, int]</code> Count per severity <code>count_by_file()</code> <code>dict[Path, int]</code> Count per file"},{"location":"reference/analysis/#sorting","title":"Sorting","text":"Method Returns Description <code>sorted_by_severity()</code> <code>AnalysisTargetList</code> Sort by severity <code>sorted_by_location()</code> <code>AnalysisTargetList</code> Sort by file/line"},{"location":"reference/analysis/#output","title":"Output","text":"Method Returns Description <code>summary()</code> <code>str</code> Summary string <code>to_list_of_dicts()</code> <code>list[dict]</code> Export as dicts"},{"location":"reference/analysis/#analysisconfig","title":"AnalysisConfig","text":"<p>Configuration for analysis.</p>"},{"location":"reference/analysis/#properties_2","title":"Properties","text":"Property Type Default Description <code>max_complexity</code> <code>int</code> 10 Cyclomatic complexity threshold <code>max_nesting_depth</code> <code>int</code> 4 Maximum nesting levels <code>max_function_lines</code> <code>int</code> 50 Maximum function length <code>max_class_lines</code> <code>int</code> 300 Maximum class length <code>max_parameters</code> <code>int</code> 5 Maximum parameters <code>max_branches</code> <code>int</code> 8 Maximum if/elif branches <code>max_returns</code> <code>int</code> 4 Maximum return statements <code>ignore_files</code> <code>list[str]</code> <code>[]</code> Glob patterns to ignore <code>ignore_functions</code> <code>list[str]</code> <code>[]</code> Function names to ignore <code>ignore_types</code> <code>list[str]</code> <code>[]</code> Issue types to ignore"},{"location":"reference/analysis/#usage","title":"Usage","text":"<pre><code>from rejig import Rejig, AnalysisConfig\n\nconfig = AnalysisConfig(\n    max_complexity=15,\n    max_function_lines=100,\n    ignore_files=[\"**/test_*.py\"],\n    ignore_types=[\"TODO_COMMENT\"],\n)\n\nrj = Rejig(\"src/\")\nissues = rj.find_analysis_issues(config=config)\n</code></pre>"},{"location":"reference/analysis/#analyzers","title":"Analyzers","text":""},{"location":"reference/analysis/#complexityanalyzer","title":"ComplexityAnalyzer","text":"<p>Analyze code complexity.</p> <pre><code>from rejig import Rejig, ComplexityAnalyzer\n\nrj = Rejig(\"src/\")\nanalyzer = ComplexityAnalyzer(rj)\n\n# Analyze single function\nfunc = rj.find_function(\"process\")\ncomplexity = analyzer.analyze_function(func)\nprint(f\"Cyclomatic: {complexity.cyclomatic}\")\nprint(f\"Nesting: {complexity.max_nesting}\")\n\n# Find complex functions\ncomplex_funcs = analyzer.find_complex_functions(threshold=10)\nfor func, c in complex_funcs:\n    print(f\"{func.name}: {c.cyclomatic}\")\n</code></pre>"},{"location":"reference/analysis/#deadcodeanalyzer","title":"DeadCodeAnalyzer","text":"<p>Find unused code.</p> <pre><code>from rejig import Rejig, DeadCodeAnalyzer\n\nrj = Rejig(\"src/\")\nanalyzer = DeadCodeAnalyzer(rj)\n\n# Find unused elements\nunused_funcs = analyzer.find_unused_functions()\nunused_classes = analyzer.find_unused_classes()\nunused_imports = analyzer.find_unused_imports()\nunused_vars = analyzer.find_unused_variables()\n</code></pre>"},{"location":"reference/analysis/#patternfinder","title":"PatternFinder","text":"<p>Find code patterns.</p> <pre><code>from rejig import Rejig, PatternFinder\n\nrj = Rejig(\"src/\")\nfinder = PatternFinder(rj)\n\nmagic_numbers = finder.find_magic_numbers()\nhardcoded_strings = finder.find_hardcoded_strings()\nbare_excepts = finder.find_bare_excepts()\ntodos = finder.find_todos()\n</code></pre>"},{"location":"reference/analysis/#analysisreporter","title":"AnalysisReporter","text":"<p>Generate reports from findings.</p> <pre><code>from rejig import Rejig, AnalysisReporter\n\nrj = Rejig(\"src/\")\nissues = rj.find_analysis_issues()\nreporter = AnalysisReporter(issues)\n\n# Text report\nprint(reporter.to_text())\n\n# JSON report\njson_report = reporter.to_json()\n\n# Markdown report\nmd_report = reporter.to_markdown()\n\n# HTML report\nhtml_report = reporter.to_html(\n    include_code_snippets=True,\n    syntax_highlight=True,\n)\n</code></pre>"},{"location":"reference/patching/","title":"Patching Reference","text":"<p>Complete API reference for the patching module.</p>"},{"location":"reference/patching/#data-models","title":"Data Models","text":""},{"location":"reference/patching/#patch","title":"Patch","text":"<p>A complete patch containing changes to one or more files.</p> <pre><code>from rejig.patching import Patch\n\npatch = Patch(files=[...], format=PatchFormat.UNIFIED)\n</code></pre> <p>Attributes:</p> Attribute Type Description <code>files</code> <code>list[FilePatch]</code> List of file patches <code>format</code> <code>PatchFormat</code> Patch format (UNIFIED or GIT) <p>Properties:</p> Property Type Description <code>file_count</code> <code>int</code> Number of files in the patch <code>total_additions</code> <code>int</code> Total added lines across all files <code>total_deletions</code> <code>int</code> Total deleted lines across all files <code>paths</code> <code>list[Path]</code> All file paths affected <code>new_files</code> <code>list[FilePatch]</code> Files being created <code>deleted_files</code> <code>list[FilePatch]</code> Files being deleted <code>renamed_files</code> <code>list[FilePatch]</code> Files being renamed <code>modified_files</code> <code>list[FilePatch]</code> Files with content changes only <p>Methods:</p> Method Returns Description <code>get_file(path)</code> <code>FilePatch \\| None</code> Get file patch by path <code>reverse()</code> <code>Patch</code> Create reversed patch (undo) <code>to_unified_diff()</code> <code>str</code> Convert to unified diff string <code>summary()</code> <code>str</code> Human-readable summary"},{"location":"reference/patching/#filepatch","title":"FilePatch","text":"<p>All changes to a single file.</p> <pre><code>from rejig.patching import FilePatch\n\nfp = FilePatch(\n    old_path=Path(\"old.py\"),\n    new_path=Path(\"new.py\"),\n    hunks=[...],\n    is_renamed=True,\n)\n</code></pre> <p>Attributes:</p> Attribute Type Description <code>old_path</code> <code>Path \\| None</code> Path in original version <code>new_path</code> <code>Path \\| None</code> Path in new version <code>hunks</code> <code>list[Hunk]</code> List of change hunks <code>is_new</code> <code>bool</code> Whether file is new <code>is_deleted</code> <code>bool</code> Whether file is deleted <code>is_renamed</code> <code>bool</code> Whether file is renamed <code>is_binary</code> <code>bool</code> Whether file is binary <code>old_mode</code> <code>str \\| None</code> Original file mode <code>new_mode</code> <code>str \\| None</code> New file mode <code>similarity_index</code> <code>int \\| None</code> Similarity % for renames <p>Properties:</p> Property Type Description <code>path</code> <code>Path \\| None</code> Primary path (new_path or old_path) <code>additions_count</code> <code>int</code> Total added lines <code>deletions_count</code> <code>int</code> Total deleted lines <code>has_changes</code> <code>bool</code> Whether file has any changes <p>Methods:</p> Method Returns Description <code>to_header_lines()</code> <code>list[str]</code> Generate diff header lines <code>to_unified_diff()</code> <code>str</code> Convert to unified diff <code>reverse()</code> <code>FilePatch</code> Create reversed file patch"},{"location":"reference/patching/#hunk","title":"Hunk","text":"<p>A contiguous block of changes in a file.</p> <pre><code>from rejig.patching import Hunk\n\nhunk = Hunk(\n    old_start=10,\n    old_count=3,\n    new_start=10,\n    new_count=5,\n    changes=[...],\n    function_context=\"def my_func():\",\n)\n</code></pre> <p>Attributes:</p> Attribute Type Description <code>old_start</code> <code>int</code> Starting line in original file <code>old_count</code> <code>int</code> Line count in original file <code>new_start</code> <code>int</code> Starting line in new file <code>new_count</code> <code>int</code> Line count in new file <code>changes</code> <code>list[Change]</code> List of changes <code>function_context</code> <code>str \\| None</code> Function context from @@ line <p>Properties:</p> Property Type Description <code>additions</code> <code>list[Change]</code> Added lines only <code>deletions</code> <code>list[Change]</code> Deleted lines only <code>additions_count</code> <code>int</code> Count of added lines <code>deletions_count</code> <code>int</code> Count of deleted lines <p>Methods:</p> Method Returns Description <code>to_header()</code> <code>str</code> Generate @@ header line <code>to_diff_lines()</code> <code>list[str]</code> Get diff lines including header <code>reverse()</code> <code>Hunk</code> Create reversed hunk <code>get_old_content()</code> <code>str</code> Original content (deletions + context) <code>get_new_content()</code> <code>str</code> New content (additions + context)"},{"location":"reference/patching/#change","title":"Change","text":"<p>A single line change in a hunk.</p> <pre><code>from rejig.patching import Change, ChangeType\n\nchange = Change(\n    type=ChangeType.ADD,\n    content=\"new line\",\n    old_line=None,\n    new_line=10,\n)\n</code></pre> <p>Attributes:</p> Attribute Type Description <code>type</code> <code>ChangeType</code> Type of change <code>content</code> <code>str</code> Line content (without +/- prefix) <code>old_line</code> <code>int \\| None</code> Line number in original file <code>new_line</code> <code>int \\| None</code> Line number in new file <p>Properties:</p> Property Type Description <code>is_addition</code> <code>bool</code> True if added line <code>is_deletion</code> <code>bool</code> True if deleted line <code>is_context</code> <code>bool</code> True if context line <p>Methods:</p> Method Returns Description <code>to_diff_line()</code> <code>str</code> Convert to diff line with prefix"},{"location":"reference/patching/#enums","title":"Enums","text":""},{"location":"reference/patching/#patchformat","title":"PatchFormat","text":"<pre><code>from rejig.patching import PatchFormat\n\nPatchFormat.UNIFIED  # Standard unified diff\nPatchFormat.GIT      # Git extended format\n</code></pre>"},{"location":"reference/patching/#changetype","title":"ChangeType","text":"<pre><code>from rejig.patching import ChangeType\n\nChangeType.ADD      # Added line (+)\nChangeType.DELETE   # Deleted line (-)\nChangeType.CONTEXT  # Context line ( )\n</code></pre>"},{"location":"reference/patching/#operationtype","title":"OperationType","text":"<pre><code>from rejig.patching import OperationType\n\n# Class operations\nOperationType.CLASS_ADD\nOperationType.CLASS_DELETE\nOperationType.CLASS_RENAME\n\n# Function operations\nOperationType.FUNCTION_ADD\nOperationType.FUNCTION_DELETE\nOperationType.FUNCTION_RENAME\n\n# Method operations\nOperationType.METHOD_ADD\nOperationType.METHOD_DELETE\nOperationType.METHOD_RENAME\n\n# Decorator operations\nOperationType.DECORATOR_ADD\nOperationType.DECORATOR_REMOVE\n\n# Import operations\nOperationType.IMPORT_ADD\nOperationType.IMPORT_REMOVE\n\n# Line operations\nOperationType.LINE_REWRITE\nOperationType.LINE_INSERT\nOperationType.LINE_DELETE\n\n# File operations\nOperationType.FILE_CREATE\nOperationType.FILE_DELETE\nOperationType.FILE_RENAME\n</code></pre>"},{"location":"reference/patching/#target-classes","title":"Target Classes","text":""},{"location":"reference/patching/#patchtarget","title":"PatchTarget","text":"<p>Target for a complete patch. Provides fluent API for patch operations.</p> <pre><code>from rejig import Rejig\n\nrj = Rejig(\"src/\")\npatch = rj.patch_from_file(\"changes.patch\")\n</code></pre> <p>Properties:</p> Property Type Description <code>patch</code> <code>Patch</code> Underlying Patch object <code>file_count</code> <code>int</code> Number of files <code>total_additions</code> <code>int</code> Total added lines <code>total_deletions</code> <code>int</code> Total deleted lines <code>paths</code> <code>list[Path]</code> All affected paths <p>Methods:</p> Method Returns Description <code>exists()</code> <code>bool</code> True if patch has files <code>files()</code> <code>TargetList[PatchFileTarget]</code> Get all file targets <code>file(path)</code> <code>PatchFileTarget \\| None</code> Get specific file target <code>apply()</code> <code>Result</code> Apply the patch <code>reverse()</code> <code>PatchTarget</code> Create reversed patch target <code>to_rejig_code(var, smart)</code> <code>str</code> Convert to rejig code <code>to_script(**kwargs)</code> <code>str</code> Generate complete Python script <code>save_script(path, **kwargs)</code> <code>Result</code> Save Python script to file <code>to_unified_diff()</code> <code>str</code> Get as unified diff string <code>save(path, overwrite)</code> <code>Result</code> Save to file <code>analyze()</code> <code>list[DetectedOperation]</code> Detect operations <code>summary()</code> <code>str</code> Human-readable summary <code>get_content()</code> <code>Result</code> Get diff in result.data <p>to_script() Parameters:</p> Parameter Type Default Description <code>variable_name</code> <code>str</code> <code>\"rj\"</code> Variable name for Rejig instance <code>root_path</code> <code>str</code> <code>\".\"</code> Root path for Rejig instance <code>description</code> <code>str \\| None</code> <code>None</code> Script docstring description <code>dry_run</code> <code>bool</code> <code>False</code> Generate dry-run mode script <code>smart_mode</code> <code>bool</code> <code>True</code> Use smart operation detection <code>include_error_handling</code> <code>bool</code> <code>True</code> Include result checking code <code>include_summary</code> <code>bool</code> <code>True</code> Include patch summary comments"},{"location":"reference/patching/#patchfiletarget","title":"PatchFileTarget","text":"<p>Target for a single file within a patch.</p> <pre><code>file_target = patch.file(\"src/models.py\")\n</code></pre> <p>Properties:</p> Property Type Description <code>file_patch</code> <code>FilePatch</code> Underlying FilePatch <code>path</code> <code>Path \\| None</code> Primary path <code>old_path</code> <code>Path \\| None</code> Original path <code>new_path</code> <code>Path \\| None</code> New path <code>is_new</code> <code>bool</code> Whether new file <code>is_deleted</code> <code>bool</code> Whether deleted <code>is_renamed</code> <code>bool</code> Whether renamed <code>additions_count</code> <code>int</code> Added lines <code>deletions_count</code> <code>int</code> Deleted lines <code>hunk_count</code> <code>int</code> Number of hunks <p>Methods:</p> Method Returns Description <code>exists()</code> <code>bool</code> True if has changes <code>hunks()</code> <code>TargetList[PatchHunkTarget]</code> Get all hunk targets <code>hunk(index)</code> <code>PatchHunkTarget \\| None</code> Get hunk by index <code>apply()</code> <code>Result</code> Apply this file's changes <code>reverse()</code> <code>PatchFileTarget</code> Create reversed target <code>to_unified_diff()</code> <code>str</code> Get as unified diff <code>get_content()</code> <code>Result</code> Get diff in result.data"},{"location":"reference/patching/#patchhunktarget","title":"PatchHunkTarget","text":"<p>Target for a single hunk within a file patch.</p> <pre><code>hunk_target = file_target.hunk(0)\n</code></pre> <p>Properties:</p> Property Type Description <code>hunk</code> <code>Hunk</code> Underlying Hunk <code>index</code> <code>int</code> Index in parent file <code>old_start</code> <code>int</code> Start line in original <code>old_count</code> <code>int</code> Line count in original <code>new_start</code> <code>int</code> Start line in new <code>new_count</code> <code>int</code> Line count in new <code>function_context</code> <code>str \\| None</code> Function context <code>additions_count</code> <code>int</code> Added lines <code>deletions_count</code> <code>int</code> Deleted lines <p>Methods:</p> Method Returns Description <code>exists()</code> <code>bool</code> True if has changes <code>apply()</code> <code>Result</code> Apply this hunk <code>reverse()</code> <code>PatchHunkTarget</code> Create reversed target <code>get_old_content()</code> <code>str</code> Original content <code>get_new_content()</code> <code>str</code> New content <code>to_header()</code> <code>str</code> Get @@ header <code>to_diff_lines()</code> <code>list[str]</code> Get diff lines <code>get_content()</code> <code>Result</code> Get diff in result.data"},{"location":"reference/patching/#parser","title":"Parser","text":""},{"location":"reference/patching/#patchparser","title":"PatchParser","text":"<p>Parser for unified diff and git diff formats.</p> <pre><code>from rejig.patching import PatchParser\n\nparser = PatchParser()\npatch = parser.parse(diff_text)\n</code></pre> <p>Methods:</p> Method Returns Description <code>parse(text)</code> <code>Patch</code> Parse diff text <code>parse_file(path)</code> <code>Patch \\| None</code> Parse from file <code>parse_to_result(text)</code> <code>Result</code> Parse with result wrapper"},{"location":"reference/patching/#convenience-functions","title":"Convenience Functions","text":"<pre><code>from rejig.patching import parse_patch, parse_patch_file\n\n# Parse from string\npatch = parse_patch(diff_text)\n\n# Parse from file\npatch = parse_patch_file(Path(\"changes.patch\"))\n</code></pre>"},{"location":"reference/patching/#generator","title":"Generator","text":""},{"location":"reference/patching/#patchgenerator","title":"PatchGenerator","text":"<p>Generate patches from rejig operations.</p> <pre><code>from rejig.patching import PatchGenerator\n\ngen = PatchGenerator()\npatch = gen.from_result(result)\n</code></pre> <p>Methods:</p> Method Returns Description <code>from_result(result)</code> <code>Patch</code> From single Result <code>from_batch_result(batch)</code> <code>Patch</code> From BatchResult <code>from_transaction(tx)</code> <code>Patch</code> From Transaction <code>from_files(original, modified)</code> <code>Patch</code> From file content dicts <code>from_diff_string(text)</code> <code>Patch</code> From raw diff text <code>to_file(patch, path, overwrite)</code> <code>Result</code> Save patch to file"},{"location":"reference/patching/#convenience-functions_1","title":"Convenience Functions","text":"<pre><code>from rejig.patching import generate_patch_from_result, generate_patch_from_batch\n\npatch = generate_patch_from_result(result)\npatch = generate_patch_from_batch(batch_result)\n</code></pre>"},{"location":"reference/patching/#converter","title":"Converter","text":""},{"location":"reference/patching/#patchconverter","title":"PatchConverter","text":"<p>Convert patches to rejig operations and code.</p> <pre><code>from rejig.patching import PatchConverter\n\nconverter = PatchConverter(rejig, smart_mode=True)\n</code></pre> <p>Constructor Parameters:</p> Parameter Type Default Description <code>rejig</code> <code>Rejig</code> required Rejig instance <code>smart_mode</code> <code>bool</code> <code>True</code> Detect high-level operations <p>Methods:</p> Method Returns Description <code>to_rejig_code(patch, var)</code> <code>str</code> Convert to rejig code <code>to_script(patch, **kwargs)</code> <code>str</code> Generate complete Python script <code>save_script(patch, path, **kwargs)</code> <code>Result</code> Save script to file <code>apply(patch)</code> <code>Result</code> Apply patch <p>to_script() Parameters:</p> Parameter Type Default Description <code>variable_name</code> <code>str</code> <code>\"rj\"</code> Variable name for Rejig instance <code>root_path</code> <code>str</code> <code>\".\"</code> Root path for Rejig instance <code>description</code> <code>str \\| None</code> <code>None</code> Script docstring description <code>dry_run</code> <code>bool</code> <code>False</code> Generate dry-run mode script <code>include_error_handling</code> <code>bool</code> <code>True</code> Include result checking code <code>include_summary</code> <code>bool</code> <code>True</code> Include patch summary comments"},{"location":"reference/patching/#convenience-functions_2","title":"Convenience Functions","text":"<pre><code>from rejig.patching import (\n    convert_patch_to_code,\n    apply_patch,\n    generate_script_from_patch,\n    save_script_from_patch,\n)\n\ncode = convert_patch_to_code(patch, rejig, smart_mode=True)\nresult = apply_patch(patch, rejig)\n\n# Script generation\nscript = generate_script_from_patch(patch, rejig, description=\"My script\")\nresult = save_script_from_patch(patch, rejig, \"apply.py\", overwrite=True)\n</code></pre>"},{"location":"reference/patching/#analyzer","title":"Analyzer","text":""},{"location":"reference/patching/#patchanalyzer","title":"PatchAnalyzer","text":"<p>Analyze patches to detect high-level operations.</p> <pre><code>from rejig.patching import PatchAnalyzer\n\nanalyzer = PatchAnalyzer()\noperations = analyzer.analyze(patch)\n</code></pre> <p>Methods:</p> Method Returns Description <code>analyze(patch)</code> <code>list[DetectedOperation]</code> Detect all operations <code>analyze_file_patch(fp)</code> <code>list[DetectedOperation]</code> Analyze single file <code>analyze_hunk(hunk, path, idx)</code> <code>list[DetectedOperation]</code> Analyze single hunk <code>get_optimal_operations(patch)</code> <code>list[DetectedOperation]</code> Get optimized operation set"},{"location":"reference/patching/#detectedoperation","title":"DetectedOperation","text":"<p>A detected operation from patch analysis.</p> <pre><code>from rejig.patching import DetectedOperation, OperationType\n\nop = DetectedOperation(\n    type=OperationType.CLASS_RENAME,\n    file_path=Path(\"models.py\"),\n    details={\"old_name\": \"Foo\", \"new_name\": \"Bar\"},\n    confidence=0.8,\n)\n</code></pre> <p>Attributes:</p> Attribute Type Description <code>type</code> <code>OperationType</code> Type of operation <code>file_path</code> <code>Path</code> Affected file <code>details</code> <code>dict</code> Operation-specific details <code>hunk_index</code> <code>int \\| None</code> Hunk index (if applicable) <code>confidence</code> <code>float</code> Confidence score (0.0-1.0)"},{"location":"reference/patching/#rejig-methods","title":"Rejig Methods","text":"<p>Methods added to the <code>Rejig</code> class for patching support.</p>"},{"location":"reference/patching/#patch_1","title":"patch()","text":"<p>Create a PatchTarget from diff text.</p> <pre><code>patch = rj.patch(diff_text)\n</code></pre> <p>Parameters:</p> Parameter Type Description <code>patch_text</code> <code>str</code> Unified or git diff text <p>Returns: <code>PatchTarget</code></p>"},{"location":"reference/patching/#patch_from_file","title":"patch_from_file()","text":"<p>Load a patch from a file.</p> <pre><code>patch = rj.patch_from_file(\"changes.patch\")\npatch = rj.patch_from_file(Path(\"changes.patch\"))\n</code></pre> <p>Parameters:</p> Parameter Type Description <code>path</code> <code>str \\| Path</code> Path to patch file <p>Returns: <code>PatchTarget</code> (empty if file doesn't exist)</p>"},{"location":"reference/patching/#generate_patch","title":"generate_patch()","text":"<p>Generate a patch from operation results.</p> <pre><code>patch = rj.generate_patch(result)\npatch = rj.generate_patch(batch_result)\n</code></pre> <p>Parameters:</p> Parameter Type Description <code>result</code> <code>Result \\| BatchResult</code> Operation result(s) <p>Returns: <code>PatchTarget</code></p>"},{"location":"reference/rejig/","title":"Rejig Class Reference","text":"<p>The main entry point for all operations.</p>"},{"location":"reference/rejig/#overview","title":"Overview","text":"<p><code>Rejig</code> is the primary class you'll interact with. Create an instance pointed at your codebase, then use its factory methods to get targets.</p> <pre><code>from rejig import Rejig\n\nrj = Rejig(\"src/\")\n</code></pre>"},{"location":"reference/rejig/#constructor","title":"Constructor","text":"<pre><code>Rejig(path: str | Path, dry_run: bool = False)\n</code></pre> <p>Create a Rejig instance.</p> <p>Parameters:</p> <ul> <li><code>path</code> \u2014 Directory, file, or glob pattern to work with</li> <li><code>dry_run</code> \u2014 If True, preview changes without modifying files</li> </ul> <p>Example:</p> <pre><code># Work with a directory\nrj = Rejig(\"src/\")\n\n# Work with a single file\nrj = Rejig(\"src/module.py\")\n\n# Work with glob pattern\nrj = Rejig(\"src/**/*_test.py\")\n\n# Dry-run mode\nrj = Rejig(\"src/\", dry_run=True)\n\n# Context manager (required for move operations)\nwith Rejig(\"src/\") as rj:\n    rj.find_class(\"X\").move_to(\"other_module\")\n</code></pre>"},{"location":"reference/rejig/#properties","title":"Properties","text":"Property Type Description <code>path</code> <code>Path</code> Original path/pattern provided <code>root</code> / <code>root_path</code> <code>Path</code> Resolved root directory <code>files</code> <code>list[Path]</code> List of Python files (lazy-loaded) <code>dry_run</code> <code>bool</code> Whether in dry-run mode <code>in_transaction</code> <code>bool</code> Whether in a transaction <code>current_transaction</code> <code>Transaction \\| None</code> Active transaction"},{"location":"reference/rejig/#target-factory-methods","title":"Target Factory Methods","text":""},{"location":"reference/rejig/#file","title":"file","text":"<pre><code>rj.file(path: str | Path) -&gt; FileTarget\n</code></pre> <p>Get a target for a specific Python file.</p> <p>Parameters:</p> <ul> <li><code>path</code> \u2014 File path, relative to root or absolute</li> </ul> <p>Example:</p> <pre><code>file = rj.file(\"models.py\")\nfile = rj.file(\"subdir/utils.py\")\n</code></pre>"},{"location":"reference/rejig/#module","title":"module","text":"<pre><code>rj.module(dotted_path: str) -&gt; ModuleTarget\n</code></pre> <p>Get a target for a Python module by dotted path.</p> <p>Parameters:</p> <ul> <li><code>dotted_path</code> \u2014 Module path like <code>\"myapp.models\"</code></li> </ul> <p>Example:</p> <pre><code>module = rj.module(\"myapp.models\")\nmodule = rj.module(\"myapp.utils.helpers\")\n</code></pre>"},{"location":"reference/rejig/#package","title":"package","text":"<pre><code>rj.package(path: str | Path) -&gt; PackageTarget\n</code></pre> <p>Get a target for a Python package directory.</p> <p>Parameters:</p> <ul> <li><code>path</code> \u2014 Package directory path</li> </ul> <p>Example:</p> <pre><code>pkg = rj.package(\"myapp/\")\n</code></pre>"},{"location":"reference/rejig/#text_file","title":"text_file","text":"<pre><code>rj.text_file(path: str | Path) -&gt; TextFileTarget\n</code></pre> <p>Get a target for any text file (non-Python).</p> <p>Example:</p> <pre><code>readme = rj.text_file(\"README.md\")\n</code></pre>"},{"location":"reference/rejig/#toml","title":"toml","text":"<pre><code>rj.toml(path: str | Path) -&gt; TomlTarget\n</code></pre> <p>Get a target for a TOML file.</p> <p>Example:</p> <pre><code>config = rj.toml(\"pyproject.toml\")\nconfig.set(\"tool.black.line-length\", 110)\n</code></pre>"},{"location":"reference/rejig/#yaml","title":"yaml","text":"<pre><code>rj.yaml(path: str | Path) -&gt; YamlTarget\n</code></pre> <p>Get a target for a YAML file.</p> <p>Example:</p> <pre><code>config = rj.yaml(\"config.yml\")\nconfig.set(\"database.host\", \"localhost\")\n</code></pre>"},{"location":"reference/rejig/#json","title":"json","text":"<pre><code>rj.json(path: str | Path) -&gt; JsonTarget\n</code></pre> <p>Get a target for a JSON file.</p> <p>Example:</p> <pre><code>pkg = rj.json(\"package.json\")\npkg.set(\"version\", \"2.0.0\")\n</code></pre>"},{"location":"reference/rejig/#ini","title":"ini","text":"<pre><code>rj.ini(path: str | Path) -&gt; IniTarget\n</code></pre> <p>Get a target for an INI/CFG file.</p> <p>Example:</p> <pre><code>ini = rj.ini(\"setup.cfg\")\nini.set(\"metadata\", \"version\", \"1.0.0\")\n</code></pre>"},{"location":"reference/rejig/#find-methods-single-target","title":"Find Methods (Single Target)","text":""},{"location":"reference/rejig/#find_class","title":"find_class","text":"<pre><code>rj.find_class(name: str) -&gt; ClassTarget | ErrorTarget\n</code></pre> <p>Find a class by exact name.</p> <p>Example:</p> <pre><code>cls = rj.find_class(\"MyClass\")\nif cls.exists():\n    cls.rename(\"NewClass\")\n</code></pre>"},{"location":"reference/rejig/#find_function","title":"find_function","text":"<pre><code>rj.find_function(name: str) -&gt; FunctionTarget | ErrorTarget\n</code></pre> <p>Find a module-level function by exact name.</p> <p>Example:</p> <pre><code>func = rj.find_function(\"process_data\")\nfunc.add_decorator(\"cache\")\n</code></pre>"},{"location":"reference/rejig/#find-methods-multiple-targets","title":"Find Methods (Multiple Targets)","text":""},{"location":"reference/rejig/#find_files","title":"find_files","text":"<pre><code>rj.find_files(pattern: str = \"**/*.py\") -&gt; TargetList[FileTarget]\n</code></pre> <p>Find files matching a glob pattern.</p> <p>Example:</p> <pre><code>all_py = rj.find_files()\ntests = rj.find_files(\"tests/**/*.py\")\n</code></pre>"},{"location":"reference/rejig/#find_classes","title":"find_classes","text":"<pre><code>rj.find_classes(pattern: str | None = None) -&gt; TargetList[ClassTarget]\n</code></pre> <p>Find all classes in the project.</p> <p>Parameters:</p> <ul> <li><code>pattern</code> \u2014 Optional regex pattern to filter by name</li> </ul> <p>Example:</p> <pre><code>all_classes = rj.find_classes()\ntest_classes = rj.find_classes(pattern=\"^Test\")\n</code></pre>"},{"location":"reference/rejig/#find_functions","title":"find_functions","text":"<pre><code>rj.find_functions(pattern: str | None = None) -&gt; TargetList[FunctionTarget]\n</code></pre> <p>Find all module-level functions in the project.</p> <p>Parameters:</p> <ul> <li><code>pattern</code> \u2014 Optional regex pattern to filter by name</li> </ul> <p>Example:</p> <pre><code>all_funcs = rj.find_functions()\nhandlers = rj.find_functions(pattern=\".*_handler$\")\n</code></pre>"},{"location":"reference/rejig/#find_methods","title":"find_methods","text":"<pre><code>rj.find_methods(pattern: str | None = None) -&gt; TargetList[MethodTarget]\n</code></pre> <p>Find all methods across all classes.</p> <p>Example:</p> <pre><code>getters = rj.find_methods(pattern=\"^get_\")\n</code></pre>"},{"location":"reference/rejig/#find_imports","title":"find_imports","text":"<pre><code>rj.find_imports(module: str | None = None) -&gt; TargetList[ImportTarget]\n</code></pre> <p>Find import statements.</p> <p>Example:</p> <pre><code>typing_imports = rj.find_imports(\"typing\")\n</code></pre>"},{"location":"reference/rejig/#find_comments","title":"find_comments","text":"<pre><code>rj.find_comments(pattern: str | None = None) -&gt; TargetList[CommentTarget]\n</code></pre> <p>Find comments matching a pattern.</p> <p>Example:</p> <pre><code>todos = rj.find_comments(pattern=\"TODO\")\n</code></pre>"},{"location":"reference/rejig/#find_strings","title":"find_strings","text":"<pre><code>rj.find_strings() -&gt; TargetList[StringLiteralTarget]\n</code></pre> <p>Find all string literals.</p> <p>Example:</p> <pre><code>strings = rj.find_strings()\n</code></pre>"},{"location":"reference/rejig/#find_todos","title":"find_todos","text":"<pre><code>rj.find_todos() -&gt; TodoTargetList\n</code></pre> <p>Find all TODO/FIXME/XXX/HACK comments.</p> <p>Example:</p> <pre><code>todos = rj.find_todos()\nfixmes = todos.by_type(\"FIXME\")\n</code></pre>"},{"location":"reference/rejig/#analysis-methods","title":"Analysis Methods","text":""},{"location":"reference/rejig/#find_analysis_issues","title":"find_analysis_issues","text":"<pre><code>rj.find_analysis_issues(config: AnalysisConfig | None = None) -&gt; AnalysisTargetList\n</code></pre> <p>Run code analysis and return issues.</p> <p>Example:</p> <pre><code>issues = rj.find_analysis_issues()\nhigh_complexity = issues.by_type(\"HIGH_CYCLOMATIC_COMPLEXITY\")\nprint(issues.summary())\n</code></pre>"},{"location":"reference/rejig/#find_security_issues","title":"find_security_issues","text":"<pre><code>rj.find_security_issues(config: SecurityConfig | None = None) -&gt; SecurityTargetList\n</code></pre> <p>Run security scanning and return issues.</p> <p>Example:</p> <pre><code>security = rj.find_security_issues()\ncritical = security.critical()\n</code></pre>"},{"location":"reference/rejig/#find_optimization_opportunities","title":"find_optimization_opportunities","text":"<pre><code>rj.find_optimization_opportunities() -&gt; OptimizeTargetList\n</code></pre> <p>Find optimization opportunities (duplicate code, loop improvements).</p> <p>Example:</p> <pre><code>opts = rj.find_optimization_opportunities()\nduplicates = opts.by_type(\"DUPLICATE_CODE\")\n</code></pre>"},{"location":"reference/rejig/#directive-methods","title":"Directive Methods","text":""},{"location":"reference/rejig/#find_type_ignores","title":"find_type_ignores","text":"<pre><code>rj.find_type_ignores() -&gt; DirectiveTargetList\n</code></pre> <p>Find <code># type: ignore</code> comments.</p> <p>Example:</p> <pre><code>ignores = rj.find_type_ignores()\nbare = ignores.filter(lambda t: t.is_bare)\n</code></pre>"},{"location":"reference/rejig/#find_noqa_comments","title":"find_noqa_comments","text":"<pre><code>rj.find_noqa_comments() -&gt; DirectiveTargetList\n</code></pre> <p>Find <code># noqa</code> comments.</p> <p>Example:</p> <pre><code>noqas = rj.find_noqa_comments()\n</code></pre>"},{"location":"reference/rejig/#transaction-methods","title":"Transaction Methods","text":""},{"location":"reference/rejig/#transaction","title":"transaction","text":"<pre><code>rj.transaction() -&gt; Transaction\n</code></pre> <p>Start an atomic transaction. Changes are collected and applied together.</p> <p>Example:</p> <pre><code>with rj.transaction() as tx:\n    rj.find_class(\"A\").rename(\"B\")\n    rj.find_class(\"C\").rename(\"D\")\n    # Preview before commit\n    print(tx.preview())\n# All changes applied atomically\n</code></pre>"},{"location":"reference/rejig/#import-management","title":"Import Management","text":""},{"location":"reference/rejig/#add_import","title":"add_import","text":"<pre><code>rj.add_import(path: Path, import_statement: str) -&gt; Result\n</code></pre> <p>Add an import to a file.</p> <p>Example:</p> <pre><code>rj.add_import(Path(\"src/module.py\"), \"from typing import Optional\")\n</code></pre>"},{"location":"reference/rejig/#remove_import","title":"remove_import","text":"<pre><code>rj.remove_import(path: Path, pattern: str) -&gt; Result\n</code></pre> <p>Remove imports matching a pattern.</p> <p>Example:</p> <pre><code>rj.remove_import(Path(\"src/module.py\"), r\"from deprecated import.*\")\n</code></pre>"},{"location":"reference/rejig/#low-level-methods","title":"Low-Level Methods","text":""},{"location":"reference/rejig/#transform_file","title":"transform_file","text":"<pre><code>rj.transform_file(path: Path, transformer: CSTTransformer) -&gt; Result\n</code></pre> <p>Apply a LibCST transformer to a file.</p> <p>Example:</p> <pre><code>from rejig.transformers import RenameClass\n\nresult = rj.transform_file(\n    Path(\"src/module.py\"),\n    RenameClass(\"OldName\", \"NewName\")\n)\n</code></pre>"},{"location":"reference/rejig/#context-manager","title":"Context Manager","text":"<p>Use context manager for move operations (uses Rope internally):</p> <pre><code># Required for move operations\nwith Rejig(\"src/\") as rj:\n    rj.find_class(\"X\").move_to(\"other_module\")\n    rj.find_function(\"helper\").move_to(\"utils\")\n# Cleanup happens automatically\n\n# Without context manager, call close() manually\nrj = Rejig(\"src/\")\nrj.find_class(\"X\").move_to(\"other_module\")\nrj.close()\n</code></pre>"},{"location":"reference/results/","title":"Results","text":"<p>All operations return Result objects instead of raising exceptions.</p>"},{"location":"reference/results/#result","title":"Result","text":"<p>The base result class for successful operations.</p> <pre><code>@dataclass\nclass Result:\n    success: bool\n    message: str\n    files_changed: list[Path]\n    data: Any = None\n</code></pre>"},{"location":"reference/results/#properties","title":"Properties","text":"Property Type Description <code>success</code> <code>bool</code> Whether the operation succeeded <code>message</code> <code>str</code> Human-readable description <code>files_changed</code> <code>list[Path]</code> Files that were modified <code>data</code> <code>Any</code> Optional payload for queries"},{"location":"reference/results/#methods","title":"Methods","text":""},{"location":"reference/results/#__bool__","title":"__bool__","text":"<p>Results are truthy when successful:</p> <pre><code>result = cls.rename(\"NewName\")\nif result:\n    print(\"Success!\")\n</code></pre>"},{"location":"reference/results/#is_error","title":"is_error","text":"<p>Check if this is an error result:</p> <pre><code>if result.is_error():\n    print(f\"Failed: {result.message}\")\n</code></pre>"},{"location":"reference/results/#example","title":"Example","text":"<pre><code>result = cls.rename(\"NewName\")\n\nprint(result.success)        # True\nprint(result.message)        # \"Renamed User to NewName\"\nprint(result.files_changed)  # [Path(\"models.py\")]\n</code></pre>"},{"location":"reference/results/#errorresult","title":"ErrorResult","text":"<p>Returned when an operation fails.</p> <pre><code>@dataclass\nclass ErrorResult(Result):\n    success: bool = False  # Always False\n    exception: Exception | None = None\n    operation: str = \"\"\n    target_repr: str = \"\"\n</code></pre>"},{"location":"reference/results/#properties_1","title":"Properties","text":"Property Type Description <code>success</code> <code>bool</code> Always <code>False</code> <code>message</code> <code>str</code> Error description <code>exception</code> <code>Exception \\| None</code> Original exception if any <code>operation</code> <code>str</code> Name of the failed operation <code>target_repr</code> <code>str</code> String representation of the target"},{"location":"reference/results/#methods_1","title":"Methods","text":""},{"location":"reference/results/#raise_if_error","title":"raise_if_error","text":"<p>Convert the result to an exception:</p> <pre><code>result = cls.rename(\"NewName\")\nif result.is_error():\n    result.raise_if_error()  # Raises RuntimeError or original exception\n</code></pre>"},{"location":"reference/results/#example_1","title":"Example","text":"<pre><code>result = cls.rename(\"NewName\")\n\nif result.is_error():\n    print(result.message)       # \"Class 'User' not found\"\n    print(result.operation)     # \"rename\"\n    print(result.target_repr)   # \"ClassTarget(name='User')\"\n\n    if result.exception:\n        print(type(result.exception))  # Original exception type\n</code></pre>"},{"location":"reference/results/#batchresult","title":"BatchResult","text":"<p>Returned when operating on multiple targets.</p> <pre><code>@dataclass\nclass BatchResult:\n    results: list[Result]\n</code></pre>"},{"location":"reference/results/#properties_2","title":"Properties","text":"Property Type Description <code>results</code> <code>list[Result]</code> All individual results <code>success</code> <code>bool</code> <code>True</code> if ALL succeeded <code>partial_success</code> <code>bool</code> <code>True</code> if ANY succeeded <code>all_failed</code> <code>bool</code> <code>True</code> if ALL failed <code>succeeded</code> <code>list[Result]</code> Successful results <code>failed</code> <code>list[Result]</code> Failed results <code>files_changed</code> <code>list[Path]</code> All modified files"},{"location":"reference/results/#methods_2","title":"Methods","text":""},{"location":"reference/results/#__bool___1","title":"__bool__","text":"<p>Truthy only when ALL operations succeeded:</p> <pre><code>results = classes.add_decorator(\"@slow\")\nif results:\n    print(\"All succeeded!\")\n</code></pre>"},{"location":"reference/results/#__len__","title":"__len__","text":"<p>Number of operations:</p> <pre><code>print(f\"Processed {len(results)} targets\")\n</code></pre>"},{"location":"reference/results/#__iter__","title":"__iter__","text":"<p>Iterate over all results:</p> <pre><code>for result in results:\n    print(result.message)\n</code></pre>"},{"location":"reference/results/#example_2","title":"Example","text":"<pre><code>results = rj.find_classes(\"^Test\").add_decorator(\"@slow\")\n\n# Check status\nif results.success:\n    print(f\"Added to all {len(results)} classes\")\nelif results.partial_success:\n    print(f\"Succeeded: {len(results.succeeded)}\")\n    print(f\"Failed: {len(results.failed)}\")\nelse:\n    print(\"All failed\")\n\n# Handle failures\nfor r in results.failed:\n    print(f\"Failed: {r.message}\")\n\n# Get modified files\nprint(f\"Files changed: {results.files_changed}\")\n</code></pre>"},{"location":"reference/results/#common-patterns","title":"Common Patterns","text":""},{"location":"reference/results/#simple-success-check","title":"Simple Success Check","text":"<pre><code>result = cls.rename(\"NewName\")\nif result:\n    print(\"Done!\")\n</code></pre>"},{"location":"reference/results/#detailed-error-handling","title":"Detailed Error Handling","text":"<pre><code>result = cls.rename(\"NewName\")\nif result.is_error():\n    print(f\"Operation: {result.operation}\")\n    print(f\"Target: {result.target_repr}\")\n    print(f\"Error: {result.message}\")\n</code></pre>"},{"location":"reference/results/#convert-to-exception","title":"Convert to Exception","text":"<pre><code>result = cls.rename(\"NewName\")\nif not result:\n    result.raise_if_error()\n</code></pre>"},{"location":"reference/results/#batch-with-partial-failure-handling","title":"Batch with Partial Failure Handling","text":"<pre><code>results = classes.add_decorator(\"@slow\")\n\nif not results.success:\n    print(\"Some operations failed:\")\n    for r in results.failed:\n        print(f\"  - {r.message}\")\n</code></pre>"},{"location":"reference/results/#collect-all-errors","title":"Collect All Errors","text":"<pre><code>errors = []\nfor cls in classes:\n    result = cls.add_decorator(\"@slow\")\n    if not result:\n        errors.append(result)\n\nif errors:\n    for e in errors:\n        print(f\"{e.target_repr}: {e.message}\")\n</code></pre>"},{"location":"reference/results/#rejig.core.results","title":"<code>results</code>","text":"<p>Result types for all operations.</p> <p>This module defines the core result classes: - Result - Base result for all operations - ErrorResult - Result for failed operations - BatchResult - Aggregate result for batch operations</p>"},{"location":"reference/results/#rejig.core.results.Result","title":"<code>Result(success, message, files_changed=list(), data=None, diff=None, diffs=dict())</code>  <code>dataclass</code>","text":"<p>Base result for all operations.</p> <p>Operations never raise exceptions. Instead, they return Result objects that indicate success or failure.</p> <p>Attributes:</p> Name Type Description <code>success</code> <code>bool</code> <p>Whether the operation succeeded</p> <code>message</code> <code>str</code> <p>Human-readable description of what happened</p> <code>files_changed</code> <code>list[Path]</code> <p>List of files that were modified</p> <code>data</code> <code>Any</code> <p>Optional payload for operations that return data</p> <code>diff</code> <code>str | None</code> <p>Combined unified diff of all changes (if any)</p> <code>diffs</code> <code>dict[Path, str]</code> <p>Per-file diffs mapping path to diff string</p>"},{"location":"reference/results/#rejig.core.results.Result.get_diff","title":"<code>get_diff(path=None)</code>","text":"<p>Get diff for a specific file or combined diff.</p>"},{"location":"reference/results/#rejig.core.results.Result.get_diff--parameters","title":"Parameters","text":"<p>path : Path | None     If provided, returns diff for that specific file.     If None, returns the combined diff.</p>"},{"location":"reference/results/#rejig.core.results.Result.get_diff--returns","title":"Returns","text":"<p>str | None     The diff string, or None if no diff available.</p>"},{"location":"reference/results/#rejig.core.results.Result.is_error","title":"<code>is_error()</code>","text":"<p>Check if this result represents an error.</p>"},{"location":"reference/results/#rejig.core.results.ErrorResult","title":"<code>ErrorResult(success, message, files_changed=list(), data=None, diff=None, diffs=dict(), exception=None, operation='', target_repr='')</code>  <code>dataclass</code>","text":"<p>               Bases: <code>Result</code></p> <p>Result for failed operations - never raises automatically.</p> <p>Attributes:</p> Name Type Description <code>exception</code> <code>Exception | None</code> <p>The original exception, if any</p> <code>operation</code> <code>str</code> <p>Name of the attempted operation</p> <code>target_repr</code> <code>str</code> <p>String representation of the target</p>"},{"location":"reference/results/#rejig.core.results.ErrorResult.raise_if_error","title":"<code>raise_if_error()</code>","text":"<p>Explicitly re-raise the exception if the programmer wants to.</p>"},{"location":"reference/results/#rejig.core.results.BatchResult","title":"<code>BatchResult(results=list())</code>  <code>dataclass</code>","text":"<p>Aggregate result for operations applied to multiple targets.</p> <p>Used by TargetList when performing batch operations.</p>"},{"location":"reference/results/#rejig.core.results.BatchResult.all_failed","title":"<code>all_failed</code>  <code>property</code>","text":"<p>True if all operations failed.</p>"},{"location":"reference/results/#rejig.core.results.BatchResult.diff","title":"<code>diff</code>  <code>property</code>","text":"<p>Combined diff from all results.</p>"},{"location":"reference/results/#rejig.core.results.BatchResult.diffs","title":"<code>diffs</code>  <code>property</code>","text":"<p>Merged diffs from all results.</p>"},{"location":"reference/results/#rejig.core.results.BatchResult.failed","title":"<code>failed</code>  <code>property</code>","text":"<p>Results that failed.</p>"},{"location":"reference/results/#rejig.core.results.BatchResult.files_changed","title":"<code>files_changed</code>  <code>property</code>","text":"<p>All files changed across all operations.</p>"},{"location":"reference/results/#rejig.core.results.BatchResult.partial_success","title":"<code>partial_success</code>  <code>property</code>","text":"<p>True if at least one operation succeeded.</p>"},{"location":"reference/results/#rejig.core.results.BatchResult.succeeded","title":"<code>succeeded</code>  <code>property</code>","text":"<p>Results that succeeded.</p>"},{"location":"reference/results/#rejig.core.results.BatchResult.success","title":"<code>success</code>  <code>property</code>","text":"<p>True if all operations succeeded.</p>"},{"location":"reference/results/#rejig.core.results.BatchResult.get_diff","title":"<code>get_diff(path=None)</code>","text":"<p>Get diff for a specific file or combined diff.</p>"},{"location":"reference/results/#rejig.core.results.BatchResult.get_diff--parameters","title":"Parameters","text":"<p>path : Path | None     If provided, returns diff for that specific file.     If None, returns the combined diff.</p>"},{"location":"reference/results/#rejig.core.results.BatchResult.get_diff--returns","title":"Returns","text":"<p>str | None     The diff string, or None if no diff available.</p>"},{"location":"reference/security/","title":"Security Reference","text":"<p>Reference for security scanning types and findings.</p>"},{"location":"reference/security/#securitytype-enum","title":"SecurityType Enum","text":"<p>Types of security issues detected.</p>"},{"location":"reference/security/#hardcoded-secrets","title":"Hardcoded Secrets","text":"Type Description <code>HARDCODED_SECRET</code> Generic secret detection <code>HARDCODED_API_KEY</code> API keys (AWS, Google, Stripe, etc.) <code>HARDCODED_PASSWORD</code> Password strings in code <code>HARDCODED_TOKEN</code> Auth tokens, JWT secrets, bearer tokens <code>HARDCODED_CRYPTO_KEY</code> Encryption/decryption keys"},{"location":"reference/security/#injection-vulnerabilities","title":"Injection Vulnerabilities","text":"Type Description <code>SQL_INJECTION</code> SQL query string concatenation <code>COMMAND_INJECTION</code> Shell command string building <code>SHELL_INJECTION</code> subprocess with shell=True <code>CODE_INJECTION</code> Dynamic code execution risks"},{"location":"reference/security/#unsafe-operations","title":"Unsafe Operations","text":"Type Description <code>UNSAFE_YAML_LOAD</code> yaml.load without safe loader <code>UNSAFE_PICKLE</code> pickle.load on potentially untrusted data <code>UNSAFE_EVAL</code> eval() on user input or dynamic strings <code>UNSAFE_EXEC</code> exec() on dynamic code <code>UNSAFE_DESERIALIZE</code> Other insecure deserialization"},{"location":"reference/security/#path-and-file-issues","title":"Path and File Issues","text":"Type Description <code>PATH_TRAVERSAL</code> Unsanitized path construction <code>INSECURE_FILE_PERMISSIONS</code> chmod with overly permissive mode"},{"location":"reference/security/#cryptography-issues","title":"Cryptography Issues","text":"Type Description <code>INSECURE_RANDOM</code> random module for security purposes <code>WEAK_CRYPTO</code> MD5, SHA1, DES, or other weak algorithms"},{"location":"reference/security/#network-issues","title":"Network Issues","text":"Type Description <code>INSECURE_SSL</code> SSL verification disabled <code>DISABLED_CERT_VERIFICATION</code> verify=False in requests"},{"location":"reference/security/#other-issues","title":"Other Issues","text":"Type Description <code>DEBUG_CODE</code> Debug statements in production code <code>SENSITIVE_DATA_EXPOSURE</code> Logging sensitive data"},{"location":"reference/security/#securityfinding","title":"SecurityFinding","text":"<p>Dataclass representing a security finding.</p>"},{"location":"reference/security/#properties","title":"Properties","text":"Property Type Description <code>type</code> <code>SecurityType</code> Type of issue <code>file_path</code> <code>Path</code> File containing the issue <code>line_number</code> <code>int</code> Line number (1-indexed) <code>name</code> <code>str</code> Name of the pattern matched <code>message</code> <code>str</code> Human-readable description <code>severity</code> <code>str</code> \"critical\", \"high\", \"medium\", or \"low\" <code>code_snippet</code> <code>str</code> The problematic code <code>context</code> <code>dict</code> Additional context"},{"location":"reference/security/#securitytarget","title":"SecurityTarget","text":"<p>Target wrapping a security finding.</p>"},{"location":"reference/security/#properties_1","title":"Properties","text":"<p>All properties from <code>SecurityFinding</code> plus:</p> Property Type Description <code>finding</code> <code>SecurityFinding</code> The underlying finding"},{"location":"reference/security/#navigation-methods","title":"Navigation Methods","text":"Method Returns Description <code>to_file_target()</code> <code>FileTarget</code> Get file containing issue <code>to_line_target()</code> <code>LineTarget</code> Get line with issue"},{"location":"reference/security/#securitytargetlist","title":"SecurityTargetList","text":"<p>List of security findings with filtering and aggregation.</p>"},{"location":"reference/security/#severity-shortcuts","title":"Severity Shortcuts","text":"Method Returns Description <code>critical()</code> <code>SecurityTargetList</code> Critical severity only <code>high()</code> <code>SecurityTargetList</code> High severity only <code>medium()</code> <code>SecurityTargetList</code> Medium severity only <code>low()</code> <code>SecurityTargetList</code> Low severity only"},{"location":"reference/security/#filtering","title":"Filtering","text":"Method Description <code>by_type(type)</code> Filter by single type <code>by_types(types)</code> Filter by multiple types <code>by_severity(severity)</code> Filter by severity level <code>in_file(path)</code> Filter by file path <code>in_directory(path)</code> Filter by directory"},{"location":"reference/security/#aggregation","title":"Aggregation","text":"Method Returns Description <code>group_by_file()</code> <code>dict[Path, list]</code> Group by file <code>group_by_type()</code> <code>dict[str, list]</code> Group by type <code>count_by_type()</code> <code>dict[str, int]</code> Count per type <code>count_by_severity()</code> <code>dict[str, int]</code> Count per severity"},{"location":"reference/security/#output","title":"Output","text":"Method Returns Description <code>summary()</code> <code>str</code> Summary string <code>to_list_of_dicts()</code> <code>list[dict]</code> Export as dicts"},{"location":"reference/security/#scanners","title":"Scanners","text":""},{"location":"reference/security/#secretsscanner","title":"SecretsScanner","text":"<p>Scan for hardcoded secrets.</p> <pre><code>from rejig import Rejig, SecretsScanner\n\nrj = Rejig(\"src/\")\nscanner = SecretsScanner(rj)\n\n# Find all secrets\nsecrets = scanner.find_all()\n\n# Add custom pattern\nscanner.add_pattern(\n    name=\"internal_key\",\n    pattern=r\"INTERNAL_[A-Z]+_KEY\\s*=\\s*['\\\"][^'\\\"]+['\\\"]\",\n    severity=\"high\",\n)\n\n# Scan again\nsecrets = scanner.find_all()\n</code></pre>"},{"location":"reference/security/#vulnerabilityscanner","title":"VulnerabilityScanner","text":"<p>Scan for vulnerability patterns.</p> <pre><code>from rejig import Rejig, VulnerabilityScanner\n\nrj = Rejig(\"src/\")\nscanner = VulnerabilityScanner(rj)\n\n# Find specific vulnerability types\nsql = scanner.find_sql_injection()\ncmd = scanner.find_command_injection()\nyaml = scanner.find_unsafe_yaml()\npickle = scanner.find_unsafe_pickle()\neval_exec = scanner.find_unsafe_eval()\n\n# Find all unsafe operations\nunsafe = scanner.find_unsafe_operations()\n</code></pre>"},{"location":"reference/security/#securityconfig","title":"SecurityConfig","text":"<p>Configuration for security scanning.</p>"},{"location":"reference/security/#properties_2","title":"Properties","text":"Property Type Default Description <code>ignore_files</code> <code>list[str]</code> <code>[]</code> Glob patterns to ignore <code>ignore_patterns</code> <code>list[str]</code> <code>[]</code> Regex patterns to ignore <code>ignore_line_patterns</code> <code>list[str]</code> <code>[\"# nosec\"]</code> Line-level ignores <code>min_severity</code> <code>str</code> <code>\"low\"</code> Minimum severity to report <code>severity_overrides</code> <code>dict</code> <code>{}</code> Override default severities"},{"location":"reference/security/#usage","title":"Usage","text":"<pre><code>from rejig import Rejig, SecurityConfig\n\nconfig = SecurityConfig(\n    ignore_files=[\"**/test_*.py\", \"**/conftest.py\"],\n    ignore_patterns=[r\"EXAMPLE_.*\", r\"TEST_.*\"],\n    min_severity=\"medium\",\n    severity_overrides={\n        \"DEBUG_CODE\": \"low\",\n        \"HARDCODED_TOKEN\": \"critical\",\n    },\n)\n\nrj = Rejig(\"src/\")\nsecurity = rj.find_security_issues(config=config)\n</code></pre>"},{"location":"reference/security/#securityreporter","title":"SecurityReporter","text":"<p>Generate security reports.</p> <pre><code>from rejig import Rejig, SecurityReporter\n\nrj = Rejig(\"src/\")\nsecurity = rj.find_security_issues()\nreporter = SecurityReporter(security)\n\n# Text report\nprint(reporter.to_text())\n\n# JSON report\njson_report = reporter.to_json()\n\n# Markdown report\nmd_report = reporter.to_markdown()\n\n# HTML report\nhtml_report = reporter.to_html(include_code=True)\n\n# SARIF format (for GitHub Code Scanning)\nsarif_report = reporter.to_sarif()\n</code></pre>"},{"location":"reference/security/#severity-levels","title":"Severity Levels","text":"Level Description Examples <code>critical</code> Immediate action required Hardcoded production secrets <code>high</code> Serious vulnerability SQL injection, command injection <code>medium</code> Potential vulnerability Unsafe YAML, insecure random <code>low</code> Minor issue Debug code, weak crypto"},{"location":"reference/security/#default-severity-mappings","title":"Default Severity Mappings","text":"Type Default Severity <code>HARDCODED_SECRET</code> high <code>HARDCODED_API_KEY</code> high <code>HARDCODED_PASSWORD</code> high <code>HARDCODED_TOKEN</code> high <code>SQL_INJECTION</code> high <code>COMMAND_INJECTION</code> high <code>UNSAFE_EVAL</code> high <code>UNSAFE_PICKLE</code> medium <code>UNSAFE_YAML_LOAD</code> medium <code>INSECURE_RANDOM</code> medium <code>DEBUG_CODE</code> low"},{"location":"reference/targets/","title":"Targets","text":"<p>Targets are objects representing code elements you can inspect or modify.</p>"},{"location":"reference/targets/#base-classes","title":"Base Classes","text":""},{"location":"reference/targets/#target","title":"Target","text":"<p>The abstract base class for all targets.</p> <pre><code>class Target(ABC):\n    def exists(self) -&gt; bool: ...\n    def get_content(self) -&gt; Result: ...\n</code></pre>"},{"location":"reference/targets/#errortarget","title":"ErrorTarget","text":"<p>Returned when navigation fails. Allows safe chaining.</p> <pre><code># Navigation returns ErrorTarget instead of raising\nmethod = rj.file(\"x.py\").find_class(\"Missing\").find_method(\"foo\")\nprint(type(method))  # ErrorTarget\n\n# Operations return ErrorResult\nresult = method.rename(\"bar\")\nprint(result.success)  # False\n</code></pre>"},{"location":"reference/targets/#targetlist","title":"TargetList","text":"<p>A list of targets supporting batch operations.</p> <pre><code>classes = rj.find_classes(pattern=\"^Test\")  # TargetList[ClassTarget]\n\n# Filtering\nclasses.filter(lambda c: c.has_docstring())\nclasses.in_file(\"models.py\")\nclasses.matching(\"User\")\n\n# Batch operations\nclasses.add_decorator(\"@slow\")  # Returns BatchResult\nclasses.delete()\n</code></pre>"},{"location":"reference/targets/#python-targets","title":"Python Targets","text":""},{"location":"reference/targets/#filetarget","title":"FileTarget","text":"<p>A Python file.</p> <pre><code>file = rj.file(\"models.py\")\n\n# Properties\nfile.path           # Path object\nfile.exists()       # True if file exists\n\n# Navigation\nfile.find_class(\"User\")       # ClassTarget\nfile.find_function(\"main\")    # FunctionTarget\nfile.find_classes()           # TargetList[ClassTarget]\nfile.find_functions()         # TargetList[FunctionTarget]\nfile.line(42)                 # LineTarget\nfile.lines(10, 20)            # LineBlockTarget\nfile.block_at_line(15)        # CodeBlockTarget\n\n# Operations\nfile.add_import(\"from typing import Optional\")\nfile.add_function(\"main\", body=\"pass\")\nfile.add_class(\"Config\", body=\"DEBUG = True\")\nfile.organize_imports()\nfile.remove_unused_imports()\n</code></pre>"},{"location":"reference/targets/#moduletarget","title":"ModuleTarget","text":"<p>A Python module by dotted path.</p> <pre><code>module = rj.module(\"myapp.models\")\n\n# Properties\nmodule.module_path   # \"myapp.models\"\nmodule.file_path     # Resolved Path or None\n\n# Navigation\nmodule.find_class(\"User\")\nmodule.find_function(\"helper\")\n\n# Operations\nmodule.add_function(\"new_func\")\nmodule.add_class(\"NewClass\")\n</code></pre>"},{"location":"reference/targets/#packagetarget","title":"PackageTarget","text":"<p>A Python package directory.</p> <pre><code>pkg = rj.package(\"myapp/\")\n\n# Properties\npkg.path         # Path to directory\npkg.exists()     # True if __init__.py exists\n\n# Navigation\npkg.find_modules()             # TargetList[ModuleTarget]\npkg.find_classes()             # TargetList[ClassTarget]\npkg.find_functions()           # TargetList[FunctionTarget]\n\n# Operations\npkg.generate_stubs(\"stubs/\")   # Generate .pyi files\npkg.merge_modules([\"a.py\", \"b.py\"], into=\"combined.py\")\n</code></pre>"},{"location":"reference/targets/#classtarget","title":"ClassTarget","text":"<p>A class definition.</p> <pre><code>cls = file.find_class(\"User\")\n\n# Properties\ncls.name                      # \"User\"\ncls.file_path                 # Path to containing file\ncls.exists()                  # True if found\ncls.has_docstring()           # True if has docstring\ncls.get_lines()               # (start, end) line numbers\ncls.get_content()             # Result with source code\n\n# Navigation\ncls.find_method(\"save\")       # MethodTarget\ncls.find_methods()            # TargetList[MethodTarget]\n\n# Operations\ncls.rename(\"NewName\")\ncls.add_method(\"validate\", body=\"return True\")\ncls.add_attribute(\"name\", type_hint=\"str\", default=\"''\")\ncls.add_decorator(\"dataclass\")\ncls.remove_decorator(\"old_decorator\")\ncls.add_base_class(\"BaseModel\")\ncls.remove_base_class(\"OldBase\")\ncls.delete()\ncls.duplicate(\"UserCopy\")\n\n# Conversions\ncls.convert_to_dataclass()\ncls.convert_to_pydantic_model()\ncls.generate_all_dunders()\n</code></pre>"},{"location":"reference/targets/#functiontarget","title":"FunctionTarget","text":"<p>A module-level function.</p> <pre><code>func = file.find_function(\"process\")\n\n# Properties\nfunc.name                     # \"process\"\nfunc.file_path                # Path to file\nfunc.exists()                 # True if found\nfunc.has_docstring()          # True if has docstring\nfunc.has_type_hints()         # True if has annotations\ncls.get_lines()               # (start, end) line numbers\n\n# Operations\nfunc.rename(\"process_data\")\nfunc.add_decorator(\"lru_cache\")\nfunc.remove_decorator(\"deprecated\")\nfunc.insert_statement(\"log('start')\", position=\"start\")\nfunc.add_parameter(\"timeout\", type=\"int\", default=\"30\")\nfunc.remove_parameter(\"old_param\")\nfunc.set_return_type(\"list[str]\")\nfunc.set_parameter_type(\"data\", \"dict[str, Any]\")\nfunc.generate_docstring(style=\"google\")\nfunc.delete()\n\n# Conversions\nfunc.convert_to_async()\nfunc.convert_to_sync()\n</code></pre>"},{"location":"reference/targets/#methodtarget","title":"MethodTarget","text":"<p>A method within a class.</p> <pre><code>method = cls.find_method(\"save\")\n\n# Properties (same as FunctionTarget)\nmethod.name\nmethod.class_name             # Name of containing class\nmethod.file_path\nmethod.exists()\nmethod.has_docstring()\nmethod.has_type_hints()\n\n# Operations (same as FunctionTarget)\nmethod.rename(\"save_data\")\nmethod.add_decorator(\"transaction\")\nmethod.insert_statement(\"self.validate()\")\nmethod.set_return_type(\"bool\")\nmethod.delete()\n\n# Additional\nmethod.extract_to_function(\"save_helper\")\n</code></pre>"},{"location":"reference/targets/#linetarget","title":"LineTarget","text":"<p>A single line in a file.</p> <pre><code>line = file.line(42)\n\n# Properties\nline.line_number              # 42\nline.file_path                # Path to file\nline.exists()                 # True if line exists\nline.get_content()            # Result with line content\n\n# Directive operations\nline.add_type_ignore(\"arg-type\")\nline.remove_type_ignore()\nline.add_noqa(\"E501\")\nline.remove_noqa()\nline.add_pylint_disable(\"line-too-long\")\nline.add_fmt_skip()\nline.add_no_cover()\n\n# TODO operations\nline.add_todo(\"Fix this\")\nline.remove_todo()\nline.link_to_issue(\"#123\")\n</code></pre>"},{"location":"reference/targets/#lineblocktarget","title":"LineBlockTarget","text":"<p>A range of lines.</p> <pre><code>block = file.lines(10, 20)\n\n# Properties\nblock.start_line              # 10\nblock.end_line                # 20\nblock.file_path               # Path to file\nblock.get_content()           # Result with content\n\n# Operations\nblock.move_to(100)            # Move to line 100\nblock.move_to_file(\"other.py\", after_line=5)\nblock.rewrite(\"new content\")\nblock.prepend(\"# Start\\n\")\nblock.append(\"# End\\n\")\nblock.delete()\nblock.indent(2)\nblock.dedent()\n\n# Wrapping\nblock.wrap_with_fmt_off()\nblock.wrap_with_pylint_disable([\"C0114\"])\nblock.wrap_with_no_cover()\n</code></pre>"},{"location":"reference/targets/#codeblocktarget","title":"CodeBlockTarget","text":"<p>A detected code structure (class, function, if, for, etc.).</p> <pre><code>block = file.block_at_line(42)\n\n# Properties\nblock.kind                    # \"class\", \"function\", \"if\", \"for\", etc.\nblock.name                    # Name if applicable\nblock.start_line              # First line\nblock.end_line                # Last line\nblock.file_path               # Path to file\n\n# Operations\nblock.delete()\nblock.to_line_block()         # Convert to LineBlockTarget\n</code></pre>"},{"location":"reference/targets/#commenttarget","title":"CommentTarget","text":"<p>A Python comment (standalone or inline).</p> <pre><code># Find comments\ncomments = file.find_comments()\ntodos = file.find_comments(pattern=\"TODO|FIXME\")\n\n# Access comment properties\nfor comment in comments:\n    comment.line_number           # Line number\n    comment.text                  # Comment text (without #)\n    comment.is_inline             # True if code precedes comment\n    comment.file_path             # Path to file\n\n# Operations\ncomment.rewrite(\"New comment text\")\ncomment.delete()\ncomment.convert_to_docstring()    # If preceding a function/class\n\n# Check type\ncomment.is_todo()                 # True for TODO/FIXME/XXX/HACK\ncomment.to_line_target()          # Get LineTarget for this line\n</code></pre>"},{"location":"reference/targets/#stringliteraltarget","title":"StringLiteralTarget","text":"<p>A string literal in Python code.</p> <pre><code># Find strings\nstrings = file.find_strings()\nsql_strings = file.find_strings(pattern=\"SELECT.*FROM\")\nmultiline = file.find_multiline_strings()\nfstrings = file.find_fstrings()\ndocstrings = file.find_docstrings()\n\n# Access string properties\nfor s in strings:\n    s.value                       # String content (unquoted)\n    s.kind                        # \"simple\", \"multiline\", \"fstring\", \"raw\", \"bytes\"\n    s.quote_style                 # \"single\", \"double\", \"triple_single\", \"triple_double\"\n    s.line_number                 # Start line\n    s.end_line_number             # End line (for multiline)\n    s.is_multiline                # True for triple-quoted\n    s.is_docstring                # True if it's a docstring\n\n# Operations\ns.rewrite(\"new content\")          # Replace content (keeps quotes)\ns.rewrite(new_content=\"...\")      # Alias for API consistency\ns.convert_to_fstring()            # Convert .format() to f-string\ns.convert_to_raw()                # Add r prefix\ns.convert_to_multiline()          # Convert to triple-quoted\ns.change_quote_style(\"double\")    # Change quote type\ns.delete()\n\n# Analysis helpers\ns.contains_sql()                  # True if looks like SQL\ns.contains_url()                  # True if contains URL\ns.contains_path()                 # True if looks like file path\ns.to_line_block()                 # Get LineBlockTarget\n</code></pre>"},{"location":"reference/targets/#config-targets","title":"Config Targets","text":""},{"location":"reference/targets/#tomltarget","title":"TomlTarget","text":"<p>A TOML file.</p> <pre><code>toml = rj.toml(\"pyproject.toml\")\n\ntoml.exists()                 # True if file exists\ntoml.get(\"tool.black.line-length\")\ntoml.get(\"missing.key\", default=None)\ntoml.set(\"project.version\", \"2.0.0\")\ntoml.delete_key(\"tool.old-tool\")\ntoml.get_section(\"tool.black\")\ntoml.rewrite(new_content)     # Replace entire file content (validates TOML)\n</code></pre>"},{"location":"reference/targets/#yamltarget","title":"YamlTarget","text":"<p>A YAML file.</p> <pre><code>yaml = rj.yaml(\"config.yml\")\n\nyaml.exists()\nyaml.get(\"database.host\")\nyaml.set(\"database.port\", 5432)\nyaml.delete_key(\"deprecated\")\n</code></pre>"},{"location":"reference/targets/#jsontarget","title":"JsonTarget","text":"<p>A JSON file.</p> <pre><code>json = rj.json(\"package.json\")\n\njson.exists()\njson.get(\"version\")\njson.set(\"scripts.test\", \"pytest\")\njson.delete_key(\"devDependencies.old\")\n</code></pre>"},{"location":"reference/targets/#initarget","title":"IniTarget","text":"<p>An INI/CFG file.</p> <pre><code>ini = rj.ini(\"setup.cfg\")\n\nini.exists()\nini.get(\"metadata\", \"name\")\nini.set(\"metadata\", \"version\", \"2.0.0\")\nini.delete_key(\"options\", \"old_option\")\nini.add_section(\"tool:pytest\")\nini.get_data()                # Get entire file as nested dict\n</code></pre>"},{"location":"reference/targets/#textfiletarget","title":"TextFileTarget","text":"<p>Any text file.</p> <pre><code>text = rj.text_file(\"README.md\")\n\ntext.exists()\ntext.get_content()\ntext.line(1)                  # First line\ntext.lines(1, 10)             # First 10 lines\ntext.find_pattern(r\"## .*\")   # Find headers\ntext.replace_pattern(r\"v\\d+\", \"v2\")\n</code></pre>"},{"location":"reference/targets/#rejig.targets","title":"<code>targets</code>","text":"<p>Unified Target architecture for code refactoring operations.</p> <p>This package provides a consistent interface for manipulating Python code, configuration files, and text files through Target objects.</p> Core Classes <p>Result: Success result from operations ErrorResult: Failure result from operations (never raises) BatchResult: Aggregate result for batch operations Target: Base class for all targets ErrorTarget: Sentinel for failed lookups (allows chaining) TargetList: Batch operations on multiple targets</p> Python Targets <p>FileTarget: Individual .py files ModuleTarget: Python modules by dotted path ClassTarget: Class definitions FunctionTarget: Module-level functions MethodTarget: Class methods LineTarget: Single lines LineBlockTarget: Line ranges CodeBlockTarget: Code structures (if, for, while, etc.) CommentTarget: Python comments StringLiteralTarget: String literals</p> Config Targets <p>TomlTarget: TOML files JsonTarget: JSON files YamlTarget: YAML files IniTarget: INI/CFG files</p> Text Targets <p>TextFileTarget: Any text file TextBlock: Raw text pattern-based manipulation TextMatch: Individual pattern match within a file</p>"},{"location":"reference/targets/#rejig.targets.BatchResult","title":"<code>BatchResult(results=list())</code>  <code>dataclass</code>","text":"<p>Aggregate result for operations applied to multiple targets.</p> <p>Used by TargetList when performing batch operations.</p>"},{"location":"reference/targets/#rejig.targets.BatchResult.all_failed","title":"<code>all_failed</code>  <code>property</code>","text":"<p>True if all operations failed.</p>"},{"location":"reference/targets/#rejig.targets.BatchResult.diff","title":"<code>diff</code>  <code>property</code>","text":"<p>Combined diff from all results.</p>"},{"location":"reference/targets/#rejig.targets.BatchResult.diffs","title":"<code>diffs</code>  <code>property</code>","text":"<p>Merged diffs from all results.</p>"},{"location":"reference/targets/#rejig.targets.BatchResult.failed","title":"<code>failed</code>  <code>property</code>","text":"<p>Results that failed.</p>"},{"location":"reference/targets/#rejig.targets.BatchResult.files_changed","title":"<code>files_changed</code>  <code>property</code>","text":"<p>All files changed across all operations.</p>"},{"location":"reference/targets/#rejig.targets.BatchResult.partial_success","title":"<code>partial_success</code>  <code>property</code>","text":"<p>True if at least one operation succeeded.</p>"},{"location":"reference/targets/#rejig.targets.BatchResult.succeeded","title":"<code>succeeded</code>  <code>property</code>","text":"<p>Results that succeeded.</p>"},{"location":"reference/targets/#rejig.targets.BatchResult.success","title":"<code>success</code>  <code>property</code>","text":"<p>True if all operations succeeded.</p>"},{"location":"reference/targets/#rejig.targets.BatchResult.get_diff","title":"<code>get_diff(path=None)</code>","text":"<p>Get diff for a specific file or combined diff.</p>"},{"location":"reference/targets/#rejig.targets.BatchResult.get_diff--parameters","title":"Parameters","text":"<p>path : Path | None     If provided, returns diff for that specific file.     If None, returns the combined diff.</p>"},{"location":"reference/targets/#rejig.targets.BatchResult.get_diff--returns","title":"Returns","text":"<p>str | None     The diff string, or None if no diff available.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget","title":"<code>ClassTarget(rejig, name, file_path=None)</code>","text":"<p>               Bases: <code>Target</code></p> <p>Target for a Python class definition.</p> <p>Provides operations for modifying class attributes, methods, decorators, and more.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget--parameters","title":"Parameters","text":"<p>rejig : Rejig     The parent Rejig instance. name : str     Name of the class. file_path : Path | None     Optional path to the file containing the class.     If not provided, the class will be searched across all files.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget--examples","title":"Examples","text":"<p>cls = rj.file(\"models.py\").find_class(\"User\") cls.add_attribute(\"email\", \"str\", '\"\"') cls.find_method(\"save\").insert_statement(\"self.validate()\")</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.end_line","title":"<code>end_line</code>  <code>property</code>","text":"<p>Ending line number of this class definition (1-indexed).</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.file_path","title":"<code>file_path</code>  <code>property</code>","text":"<p>Path to the file containing this class.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.has_docstring","title":"<code>has_docstring</code>  <code>property</code>","text":"<p>Check if this class has a docstring.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.has_docstring--returns","title":"Returns","text":"<p>bool     True if the class has a docstring.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.has_docstring--examples","title":"Examples","text":"<p>if not cls.has_docstring: ...     cls.generate_docstring()</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.line_number","title":"<code>line_number</code>  <code>property</code>","text":"<p>Line number where the class is defined (alias for start_line).</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.start_line","title":"<code>start_line</code>  <code>property</code>","text":"<p>Starting line number of this class definition (1-indexed).</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.add_attribute","title":"<code>add_attribute(name, type_hint, default='None')</code>","text":"<p>Add a class-level attribute with type annotation.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.add_attribute--parameters","title":"Parameters","text":"<p>name : str     Name of the attribute to add. type_hint : str     Type annotation for the attribute. default : str     Default value for the attribute (default: \"None\").</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.add_attribute--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.add_attribute--examples","title":"Examples","text":"<p>cls.add_attribute(\"count\", \"int\", \"0\") cls.add_attribute(\"cache\", \"dict[str, Any] | None\", \"None\")</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.add_base_class","title":"<code>add_base_class(base_class, position='last')</code>","text":"<p>Add a base class to this class.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.add_base_class--parameters","title":"Parameters","text":"<p>base_class : str     Name of the base class to add. position : str     Where to add: \"first\" or \"last\". Default \"last\".</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.add_base_class--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.add_base_class--examples","title":"Examples","text":"<p>cls.add_base_class(\"BaseModel\") cls.add_base_class(\"ABC\", position=\"first\")</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.add_decorator","title":"<code>add_decorator(decorator)</code>","text":"<p>Add a decorator to this class.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.add_decorator--parameters","title":"Parameters","text":"<p>decorator : str     Decorator to add (without @ prefix). Can include arguments,     e.g., \"dataclass(frozen=True)\".</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.add_decorator--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.add_method","title":"<code>add_method(name, body='pass', **kwargs)</code>","text":"<p>Add a method to this class.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.add_method--parameters","title":"Parameters","text":"<p>name : str     Name of the method to add. body : str     Body of the method (default: \"pass\"). **kwargs     Additional options:     - params: Parameter list after self (string)     - return_type: Return type annotation     - decorators: Decorators (list of strings without @)</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.add_method--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.add_mixin","title":"<code>add_mixin(mixin_class)</code>","text":"<p>Add a mixin class to this class.</p> <p>Mixins are added at the beginning of the base class list following Python MRO conventions.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.add_mixin--parameters","title":"Parameters","text":"<p>mixin_class : str     Name of the mixin class to add.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.add_mixin--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.add_mixin--examples","title":"Examples","text":"<p>cls.add_mixin(\"LoggingMixin\")</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.add_no_cover","title":"<code>add_no_cover()</code>","text":"<p>Add pragma: no cover to exclude this class from coverage.</p> <p>Adds the pragma comment to the class definition line.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.add_no_cover--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.add_no_cover--examples","title":"Examples","text":"<p>cls.add_no_cover()</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.add_property","title":"<code>add_property(prop_name, getter, setter=None, return_type=None)</code>","text":"<p>Add a property to this class.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.add_property--parameters","title":"Parameters","text":"<p>prop_name : str     Name of the property. getter : str     Body of the getter (return statement or expression). setter : str | None     Body of the setter. If None, property is read-only. return_type : str | None     Return type annotation for the getter.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.add_property--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.add_property--examples","title":"Examples","text":"<p>cls.add_property(\"full_name\", \"f'{self.first} {self.last}'\", return_type=\"str\") cls.add_property(\"age\", \"self._age\", \"self._age = value\", \"int\")</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.add_pylint_disable","title":"<code>add_pylint_disable(codes)</code>","text":"<p>Add pylint: disable comment to this class's definition line.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.add_pylint_disable--parameters","title":"Parameters","text":"<p>codes : str | list[str]     Pylint error codes to disable.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.add_pylint_disable--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.add_pylint_disable--examples","title":"Examples","text":"<p>cls.add_pylint_disable(\"R0903\")  # too-few-public-methods cls.add_pylint_disable([\"R0903\", \"R0901\"])</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.add_type_hints_from_defaults","title":"<code>add_type_hints_from_defaults(overwrite=False)</code>","text":"<p>Add type hints to methods based on parameter defaults.</p> <p>Infers type hints from: - Default parameter values (e.g., = 0 \u2192 int) - Parameter names (e.g., count \u2192 int, is_valid \u2192 bool)</p> <p>This primarily targets the init method to infer instance attribute types from default values.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.add_type_hints_from_defaults--parameters","title":"Parameters","text":"<p>overwrite : bool     If True, overwrite existing type hints. Default False.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.add_type_hints_from_defaults--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.add_type_hints_from_defaults--examples","title":"Examples","text":"<p>cls.add_type_hints_from_defaults() cls.add_type_hints_from_defaults(overwrite=True)</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.convert_attribute_to_property","title":"<code>convert_attribute_to_property(attr_name, getter=True, setter=True)</code>","text":"<p>Convert a class attribute to a property with getter/setter.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.convert_attribute_to_property--parameters","title":"Parameters","text":"<p>attr_name : str     Name of the attribute to convert. getter : bool     If True, generate a getter property. Default True. setter : bool     If True, generate a setter. Default True.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.convert_attribute_to_property--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.convert_attribute_to_property--examples","title":"Examples","text":"<p>cls.convert_attribute_to_property(\"_name\") cls.convert_attribute_to_property(\"value\", setter=False)</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.convert_from_dataclass","title":"<code>convert_from_dataclass(generate_repr=True, generate_eq=True, generate_hash=False)</code>","text":"<p>Convert this dataclass back to a regular class.</p> <p>Removes @dataclass decorator and generates explicit dunder methods.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.convert_from_dataclass--parameters","title":"Parameters","text":"<p>generate_repr : bool     If True, generate repr method. Default True. generate_eq : bool     If True, generate eq method. Default True. generate_hash : bool     If True, generate hash method. Default False.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.convert_from_dataclass--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.convert_to_context_manager","title":"<code>convert_to_context_manager(enter_body=None, exit_body=None)</code>","text":"<p>Convert this class to a context manager by adding enter/exit.</p> <p>If the class has open/connect methods, uses them in enter. If the class has close/disconnect methods, uses them in exit. Otherwise, returns self in enter and passes in exit.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.convert_to_context_manager--parameters","title":"Parameters","text":"<p>enter_body : str | None     Custom body for enter method. If None, auto-generates. exit_body : str | None     Custom body for exit method. If None, auto-generates.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.convert_to_context_manager--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.convert_to_context_manager--examples","title":"Examples","text":"<p>cls.convert_to_context_manager() cls.convert_to_context_manager( ...     enter_body=\"self._conn = self.connect()\\nreturn self._conn\", ...     exit_body=\"self._conn.close()\" ... )</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.convert_to_dataclass","title":"<code>convert_to_dataclass(frozen=False, slots=False)</code>","text":"<p>Convert this class to a dataclass.</p> <p>Adds @dataclass decorator and converts instance attributes to class-level annotated attributes. Removes init if it only does attribute assignment.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.convert_to_dataclass--parameters","title":"Parameters","text":"<p>frozen : bool     If True, add frozen=True to decorator. Default False. slots : bool     If True, add slots=True (Python 3.10+). Default False.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.convert_to_dataclass--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.convert_to_dataclass--examples","title":"Examples","text":"<p>cls.convert_to_dataclass() cls.convert_to_dataclass(frozen=True, slots=True)</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.convert_to_named_tuple","title":"<code>convert_to_named_tuple()</code>","text":"<p>Convert this class to a NamedTuple.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.convert_to_named_tuple--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.convert_to_named_tuple--examples","title":"Examples","text":"<p>cls.convert_to_named_tuple()</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.convert_to_typed_dict","title":"<code>convert_to_typed_dict(total=True)</code>","text":"<p>Convert this class to a TypedDict.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.convert_to_typed_dict--parameters","title":"Parameters","text":"<p>total : bool     If True, all keys are required. Default True.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.convert_to_typed_dict--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.convert_to_typed_dict--examples","title":"Examples","text":"<p>cls.convert_to_typed_dict() cls.convert_to_typed_dict(total=False)</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.delete","title":"<code>delete()</code>","text":"<p>Delete this class from the file.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.delete--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.duplicate","title":"<code>duplicate(new_name)</code>","text":"<p>Duplicate this class with a new name.</p> <p>Creates a copy of the class definition with the specified new name. The duplicate is inserted immediately after the original class.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.duplicate--parameters","title":"Parameters","text":"<p>new_name : str     Name for the duplicated class.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.duplicate--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.duplicate--examples","title":"Examples","text":"<p>result = cls.duplicate(\"UserV2\") if result.success: ...     new_cls = rj.find_class(\"UserV2\")</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.exists","title":"<code>exists()</code>","text":"<p>Check if this class exists.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.extract_abstract_base","title":"<code>extract_abstract_base(abc_name=None, methods=None)</code>","text":"<p>Extract an Abstract Base Class from this class.</p> <p>Creates a new ABC with abstract method signatures and makes this class inherit from it.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.extract_abstract_base--parameters","title":"Parameters","text":"<p>abc_name : str | None     Name for the new ABC. Defaults to \"Base{ClassName}\". methods : list[str] | None     Method names to make abstract. If None, uses all public methods.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.extract_abstract_base--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.extract_abstract_base--examples","title":"Examples","text":"<p>cls.extract_abstract_base() cls.extract_abstract_base(\"AbstractUser\", methods=[\"save\", \"validate\"])</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.extract_protocol","title":"<code>extract_protocol(protocol_name, methods=None)</code>","text":"<p>Extract a Protocol from this class.</p> <p>Creates a new Protocol class with specified method signatures and inserts it before the original class.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.extract_protocol--parameters","title":"Parameters","text":"<p>protocol_name : str     Name for the new Protocol class. methods : list[str] | None     Method names to include. If None, includes all public methods.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.extract_protocol--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.extract_protocol--examples","title":"Examples","text":"<p>cls.extract_protocol(\"UserProtocol\") cls.extract_protocol(\"ValidatorProtocol\", methods=[\"validate\", \"check\"])</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.find_method","title":"<code>find_method(name)</code>","text":"<p>Find a method within this class.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.find_method--parameters","title":"Parameters","text":"<p>name : str     Name of the method to find.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.find_method--returns","title":"Returns","text":"<p>MethodTarget | ErrorTarget     MethodTarget if found, ErrorTarget otherwise.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.find_methods","title":"<code>find_methods(pattern=None)</code>","text":"<p>Find all methods in this class, optionally filtered by pattern.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.find_methods--parameters","title":"Parameters","text":"<p>pattern : str | None     Optional regex pattern to filter method names.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.find_methods--returns","title":"Returns","text":"<p>TargetList[MethodTarget]     List of matching MethodTarget objects.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.find_methods_without_docstrings","title":"<code>find_methods_without_docstrings()</code>","text":"<p>Find all methods in this class that don't have docstrings.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.find_methods_without_docstrings--returns","title":"Returns","text":"<p>TargetList[MethodTarget]     List of methods without docstrings.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.find_methods_without_docstrings--examples","title":"Examples","text":"<p>missing = cls.find_methods_without_docstrings() for method in missing: ...     method.generate_docstring()</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.generate_all_dunders","title":"<code>generate_all_dunders(overwrite=False)</code>","text":"<p>Generate all common dunder methods (init, repr, eq, hash).</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.generate_all_dunders--parameters","title":"Parameters","text":"<p>overwrite : bool     If True, replace existing dunders. Default False.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.generate_all_dunders--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.generate_all_dunders--examples","title":"Examples","text":"<p>cls.generate_all_dunders()</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.generate_docstrings","title":"<code>generate_docstrings(style='google', overwrite=False)</code>","text":"<p>Generate docstrings for all methods in this class.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.generate_docstrings--parameters","title":"Parameters","text":"<p>style : str     Docstring style: \"google\", \"numpy\", or \"sphinx\".     Defaults to \"google\". overwrite : bool     Whether to overwrite existing docstrings. Default False.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.generate_docstrings--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.generate_docstrings--examples","title":"Examples","text":"<p>cls.generate_docstrings() cls.generate_docstrings(style=\"numpy\")</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.generate_eq","title":"<code>generate_eq(overwrite=False)</code>","text":"<p>Generate eq method from class attributes.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.generate_eq--parameters","title":"Parameters","text":"<p>overwrite : bool     If True, replace existing eq. Default False.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.generate_eq--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.generate_hash","title":"<code>generate_hash(overwrite=False)</code>","text":"<p>Generate hash method from class attributes.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.generate_hash--parameters","title":"Parameters","text":"<p>overwrite : bool     If True, replace existing hash. Default False.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.generate_hash--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.generate_init","title":"<code>generate_init(overwrite=False)</code>","text":"<p>Generate init method from class attributes.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.generate_init--parameters","title":"Parameters","text":"<p>overwrite : bool     If True, replace existing init. Default False.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.generate_init--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.generate_init--examples","title":"Examples","text":"<p>cls.generate_init() cls.generate_init(overwrite=True)</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.generate_repr","title":"<code>generate_repr(overwrite=False)</code>","text":"<p>Generate repr method from class attributes.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.generate_repr--parameters","title":"Parameters","text":"<p>overwrite : bool     If True, replace existing repr. Default False.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.generate_repr--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.generate_test_file","title":"<code>generate_test_file(output_path, include_setup=True, include_teardown=False)</code>","text":"<p>Generate a complete test file for this class.</p> <p>Creates a pytest test file with test stubs for all public methods.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.generate_test_file--parameters","title":"Parameters","text":"<p>output_path : str | Path     Path where the test file should be written. include_setup : bool     Whether to include a setup_method. Default True. include_teardown : bool     Whether to include a teardown_method. Default False.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.generate_test_file--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.generate_test_file--examples","title":"Examples","text":"<p>cls.generate_test_file(\"tests/test_calculator.py\") cls.generate_test_file(\"tests/test_user.py\", include_teardown=True)</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.generate_test_stub","title":"<code>generate_test_stub(test_dir=None)</code>","text":"<p>Generate a test stub in the default location.</p> <p>Creates a test file in the tests/ directory mirroring the source structure.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.generate_test_stub--parameters","title":"Parameters","text":"<p>test_dir : str | Path | None     Base directory for tests. Defaults to \"tests\" in project root.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.generate_test_stub--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.generate_test_stub--examples","title":"Examples","text":"<p>cls.generate_test_stub()  # Creates tests/test_mymodule.py cls.generate_test_stub(\"test_suite/unit\")</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.get_content","title":"<code>get_content()</code>","text":"<p>Get the source code of this class.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.get_content--returns","title":"Returns","text":"<p>Result     Result with class source code in <code>data</code> field if successful.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.get_docstring","title":"<code>get_docstring()</code>","text":"<p>Get the docstring of this class.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.get_docstring--returns","title":"Returns","text":"<p>Result     Result with docstring text in <code>data</code> field if successful.     Returns empty string if no docstring exists.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.get_docstring--examples","title":"Examples","text":"<p>result = cls.get_docstring() if result.success and result.data: ...     print(result.data)</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.get_source","title":"<code>get_source()</code>","text":"<p>Get just the class signature (without body).</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.get_source--returns","title":"Returns","text":"<p>Result     Result with class signature in <code>data</code> field if successful.     The signature includes decorators, class name, and base classes.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.get_source--examples","title":"Examples","text":"<p>sig = cls.get_source() if sig.success: ...     print(sig.data)  # \"class MyClass(BaseClass):\"</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.move_to","title":"<code>move_to(destination)</code>","text":"<p>Move this class to a different module using rope.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.move_to--parameters","title":"Parameters","text":"<p>destination : str | Target     Destination module path (e.g., 'myapp.models').</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.move_to--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.remove_attribute","title":"<code>remove_attribute(attr_name)</code>","text":"<p>Remove a class-level attribute.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.remove_attribute--parameters","title":"Parameters","text":"<p>attr_name : str     Name of the attribute to remove.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.remove_attribute--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.remove_base_class","title":"<code>remove_base_class(base_class)</code>","text":"<p>Remove a base class from this class.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.remove_base_class--parameters","title":"Parameters","text":"<p>base_class : str     Name of the base class to remove.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.remove_base_class--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.remove_base_class--examples","title":"Examples","text":"<p>cls.remove_base_class(\"OldBase\")</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.remove_decorator","title":"<code>remove_decorator(decorator)</code>","text":"<p>Remove a decorator from this class.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.remove_decorator--parameters","title":"Parameters","text":"<p>decorator : str     Decorator to remove (without @ prefix).</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.remove_decorator--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.remove_object_base","title":"<code>remove_object_base()</code>","text":"<p>Remove unnecessary (object) base class from this class.</p> <p>In Python 3, all classes implicitly inherit from object, so explicitly inheriting from object is unnecessary.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.remove_object_base--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.remove_object_base--examples","title":"Examples","text":"<p>cls.remove_object_base()  # class Foo(object): \u2192 class Foo:</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.rename","title":"<code>rename(new_name)</code>","text":"<p>Rename this class.</p> <p>Note: This only renames the class definition. It does not update references to the class throughout the codebase.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.rename--parameters","title":"Parameters","text":"<p>new_name : str     New name for the class.</p>"},{"location":"reference/targets/#rejig.targets.ClassTarget.rename--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget","title":"<code>CodeBlockTarget(rejig, file_path, kind, start_line, end_line, name=None)</code>","text":"<p>               Bases: <code>Target</code></p> <p>Target for a detected code structure (class, function, if-block, etc.).</p> <p>This target represents a syntactic code block that can be manipulated as a unit. It can be converted to a LineBlockTarget for line-based operations.</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget--parameters","title":"Parameters","text":"<p>rejig : Rejig     The parent Rejig instance. file_path : Path     Path to the file containing the code block. kind : CodeBlockKind     Type of code block (class, function, if, for, etc.). start_line : int     1-based starting line number. end_line : int     1-based ending line number. name : str | None     Name of the block (for named blocks like classes/functions).</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget--examples","title":"Examples","text":"<p>block = rj.file(\"utils.py\").find_block_at_line(42) block.to_line_block().indent()</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget.file_path","title":"<code>file_path</code>  <code>property</code>","text":"<p>Path to the file containing this code block.</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget.dedent","title":"<code>dedent(levels=1)</code>","text":"<p>Dedent (unindent) this code block.</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget.dedent--parameters","title":"Parameters","text":"<p>levels : int     Number of indentation levels to remove.</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget.dedent--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget.delete","title":"<code>delete()</code>","text":"<p>Delete this code block from the file.</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget.delete--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget.exists","title":"<code>exists()</code>","text":"<p>Check if this code block still exists.</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget.find_at_line","title":"<code>find_at_line(rejig, file_path, line_number)</code>  <code>classmethod</code>","text":"<p>Find the code block containing a specific line.</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget.find_at_line--parameters","title":"Parameters","text":"<p>rejig : Rejig     The Rejig instance. file_path : Path     Path to the file. line_number : int     1-based line number to search for.</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget.find_at_line--returns","title":"Returns","text":"<p>CodeBlockTarget | None     The innermost code block containing the line, or None if not found.</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget.get_content","title":"<code>get_content()</code>","text":"<p>Get the content of this code block.</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget.get_content--returns","title":"Returns","text":"<p>Result     Result with block content in <code>data</code> field if successful.</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget.indent","title":"<code>indent(levels=1)</code>","text":"<p>Indent this code block.</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget.indent--parameters","title":"Parameters","text":"<p>levels : int     Number of indentation levels to add.</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget.indent--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget.insert_after","title":"<code>insert_after(content)</code>","text":"<p>Insert content after this code block.</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget.insert_after--parameters","title":"Parameters","text":"<p>content : str     Content to insert.</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget.insert_after--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget.insert_before","title":"<code>insert_before(content)</code>","text":"<p>Insert content before this code block.</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget.insert_before--parameters","title":"Parameters","text":"<p>content : str     Content to insert.</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget.insert_before--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget.move_to","title":"<code>move_to(destination)</code>","text":"<p>Move this code block to a different location in the same file.</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget.move_to--parameters","title":"Parameters","text":"<p>destination : int | Target     Target line number to move to.</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget.move_to--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget.move_to_file","title":"<code>move_to_file(file_path, line_number)</code>","text":"<p>Move this code block to a different file.</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget.move_to_file--parameters","title":"Parameters","text":"<p>file_path : str | Path     Path to the destination file. line_number : int     1-based line number to insert at in the destination file.</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget.move_to_file--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget.move_to_file--examples","title":"Examples","text":"<p>block = rj.file(\"source.py\").block_at_line(10) block.move_to_file(\"destination.py\", 5)</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget.replace","title":"<code>replace(pattern, replacement)</code>","text":"<p>Replace pattern in this code block.</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget.replace--parameters","title":"Parameters","text":"<p>pattern : str     Regex pattern to search for. replacement : str     Replacement string.</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget.replace--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget.rewrite","title":"<code>rewrite(new_content)</code>","text":"<p>Replace the content of this code block.</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget.rewrite--parameters","title":"Parameters","text":"<p>new_content : str     New content for the block.</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget.rewrite--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget.to_line_block","title":"<code>to_line_block()</code>","text":"<p>Convert this code block to a LineBlockTarget.</p>"},{"location":"reference/targets/#rejig.targets.CodeBlockTarget.to_line_block--returns","title":"Returns","text":"<p>LineBlockTarget     A LineBlockTarget covering the same lines.</p>"},{"location":"reference/targets/#rejig.targets.CommentTarget","title":"<code>CommentTarget(rejig, file_path, line_number, content)</code>","text":"<p>               Bases: <code>Target</code></p> <p>Target for a Python comment.</p> <p>Provides operations for reading, modifying, and deleting comments in Python source files.</p>"},{"location":"reference/targets/#rejig.targets.CommentTarget--parameters","title":"Parameters","text":"<p>rejig : Rejig     The parent Rejig instance. file_path : Path     Path to the file containing the comment. line_number : int     1-based line number where the comment is located. content : str     The comment content (including # prefix).</p>"},{"location":"reference/targets/#rejig.targets.CommentTarget--examples","title":"Examples","text":"<p>comments = rj.file(\"utils.py\").find_comments(pattern=\"TODO\") for comment in comments: ...     print(f\"{comment.line_number}: {comment.text}\")</p>"},{"location":"reference/targets/#rejig.targets.CommentTarget.file_path","title":"<code>file_path</code>  <code>property</code>","text":"<p>Path to the file containing this comment.</p>"},{"location":"reference/targets/#rejig.targets.CommentTarget.is_fixme","title":"<code>is_fixme</code>  <code>property</code>","text":"<p>Check if this is a FIXME comment.</p>"},{"location":"reference/targets/#rejig.targets.CommentTarget.is_hack","title":"<code>is_hack</code>  <code>property</code>","text":"<p>Check if this is a HACK comment.</p>"},{"location":"reference/targets/#rejig.targets.CommentTarget.is_noqa","title":"<code>is_noqa</code>  <code>property</code>","text":"<p>Check if this is a noqa comment.</p>"},{"location":"reference/targets/#rejig.targets.CommentTarget.is_todo","title":"<code>is_todo</code>  <code>property</code>","text":"<p>Check if this is a TODO comment.</p>"},{"location":"reference/targets/#rejig.targets.CommentTarget.is_type_ignore","title":"<code>is_type_ignore</code>  <code>property</code>","text":"<p>Check if this is a type: ignore comment.</p>"},{"location":"reference/targets/#rejig.targets.CommentTarget.is_xxx","title":"<code>is_xxx</code>  <code>property</code>","text":"<p>Check if this is an XXX comment.</p>"},{"location":"reference/targets/#rejig.targets.CommentTarget.name","title":"<code>name</code>  <code>property</code>","text":"<p>Alias for text, used by TargetList filtering.</p>"},{"location":"reference/targets/#rejig.targets.CommentTarget.text","title":"<code>text</code>  <code>property</code>","text":"<p>The comment text without the # prefix.</p>"},{"location":"reference/targets/#rejig.targets.CommentTarget.delete","title":"<code>delete()</code>","text":"<p>Delete this comment from the file.</p> <p>If the comment is on a line by itself, the entire line is removed. If it's an inline comment, only the comment portion is removed.</p>"},{"location":"reference/targets/#rejig.targets.CommentTarget.delete--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.CommentTarget.exists","title":"<code>exists()</code>","text":"<p>Check if this comment still exists at the recorded location.</p>"},{"location":"reference/targets/#rejig.targets.CommentTarget.get_content","title":"<code>get_content()</code>","text":"<p>Get the content of this comment.</p>"},{"location":"reference/targets/#rejig.targets.CommentTarget.get_content--returns","title":"Returns","text":"<p>Result     Result with comment content in <code>data</code> field if successful.</p>"},{"location":"reference/targets/#rejig.targets.CommentTarget.rewrite","title":"<code>rewrite(new_content)</code>","text":"<p>Replace the comment with new content.</p>"},{"location":"reference/targets/#rejig.targets.CommentTarget.rewrite--parameters","title":"Parameters","text":"<p>new_content : str     New comment content (with or without # prefix).</p>"},{"location":"reference/targets/#rejig.targets.CommentTarget.rewrite--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ErrorResult","title":"<code>ErrorResult(success, message, files_changed=list(), data=None, diff=None, diffs=dict(), exception=None, operation='', target_repr='')</code>  <code>dataclass</code>","text":"<p>               Bases: <code>Result</code></p> <p>Result for failed operations - never raises automatically.</p> <p>Attributes:</p> Name Type Description <code>exception</code> <code>Exception | None</code> <p>The original exception, if any</p> <code>operation</code> <code>str</code> <p>Name of the attempted operation</p> <code>target_repr</code> <code>str</code> <p>String representation of the target</p>"},{"location":"reference/targets/#rejig.targets.ErrorResult.raise_if_error","title":"<code>raise_if_error()</code>","text":"<p>Explicitly re-raise the exception if the programmer wants to.</p>"},{"location":"reference/targets/#rejig.targets.ErrorTarget","title":"<code>ErrorTarget(rejig, error_message)</code>","text":"<p>               Bases: <code>Target</code></p> <p>A target that represents a failed lookup - all operations return ErrorResult.</p> <p>Navigation methods return ErrorTarget (not ErrorResult) to allow chaining. Operation methods return ErrorResult.</p> This allows code like <p>rj.module(\"nonexistent\").find_class(\"Foo\").add_method(\"bar\")</p> <p>to return an ErrorResult without raising, even though the module doesn't exist.</p>"},{"location":"reference/targets/#rejig.targets.ErrorTarget.__getattr__","title":"<code>__getattr__(name)</code>","text":"<p>Any other method call returns an ErrorResult.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget","title":"<code>FileTarget(rejig, path)</code>","text":"<p>               Bases: <code>Target</code></p> <p>Target for a specific Python file.</p> <p>Provides operations for reading, modifying, and navigating within a Python source file.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget--parameters","title":"Parameters","text":"<p>rejig : Rejig     The parent Rejig instance. path : str | Path     Path to the Python file.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget--examples","title":"Examples","text":"<p>file = rj.file(\"mymodule.py\") file.add_class(\"NewClass\", body=\"pass\") file.find_class(\"MyClass\").add_method(\"process\")</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.file_path","title":"<code>file_path</code>  <code>property</code>","text":"<p>The path to this file (alias for consistency with other targets).</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.add_class","title":"<code>add_class(name, body='pass', **kwargs)</code>","text":"<p>Add a class to this file.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.add_class--parameters","title":"Parameters","text":"<p>name : str     Name of the class to add. body : str     Body of the class (default: \"pass\"). **kwargs     Additional options:     - bases: Base classes (comma-separated string)     - decorators: Decorators (list of strings without @)</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.add_class--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.add_copyright_header","title":"<code>add_copyright_header(copyright_text, year=None)</code>","text":"<p>Add a copyright header to this file.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.add_copyright_header--parameters","title":"Parameters","text":"<p>copyright_text : str     Copyright holder text (e.g., \"MyCompany Inc.\"). year : int | None     Copyright year. Defaults to current year.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.add_copyright_header--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.add_copyright_header--examples","title":"Examples","text":"<p>file = rj.file(\"mymodule.py\") file.add_copyright_header(\"Copyright 2024 MyCompany\")</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.add_function","title":"<code>add_function(name, body='pass', **kwargs)</code>","text":"<p>Add a module-level function to this file.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.add_function--parameters","title":"Parameters","text":"<p>name : str     Name of the function to add. body : str     Body of the function (default: \"pass\"). **kwargs     Additional options:     - params: Parameter list (string)     - return_type: Return type annotation     - decorators: Decorators (list of strings without @)</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.add_function--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.add_future_annotations","title":"<code>add_future_annotations()</code>","text":"<p>Add <code>from __future__ import annotations</code> to this file.</p> <p>This enables PEP 563 postponed evaluation of annotations, allowing forward references and reducing runtime overhead.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.add_future_annotations--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.add_future_annotations--examples","title":"Examples","text":"<p>file = rj.file(\"mymodule.py\") file.add_future_annotations()</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.add_import","title":"<code>add_import(import_statement)</code>","text":"<p>Add an import statement to this file.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.add_import--parameters","title":"Parameters","text":"<p>import_statement : str     Import statement to add (without newline).</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.add_import--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.add_license_header","title":"<code>add_license_header(license_name, copyright_holder=None, year=None)</code>","text":"<p>Add a license header to this file.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.add_license_header--parameters","title":"Parameters","text":"<p>license_name : str     License identifier: \"MIT\", \"Apache-2.0\", \"GPL-3.0\",     \"BSD-3-Clause\", or \"Proprietary\". copyright_holder : str | None     Copyright holder name. If None, uses a placeholder. year : int | None     Copyright year. Defaults to current year.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.add_license_header--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.add_license_header--examples","title":"Examples","text":"<p>file = rj.file(\"mymodule.py\") file.add_license_header(\"MIT\") file.add_license_header(\"Apache-2.0\", \"MyCompany Inc.\")</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.add_missing_imports","title":"<code>add_missing_imports(import_mapping=None)</code>","text":"<p>Add imports for undefined names in this file.</p> <p>Note: This is a heuristic operation. It detects names that appear to be undefined (not imported or defined locally) and adds imports for them if a mapping is provided.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.add_missing_imports--parameters","title":"Parameters","text":"<p>import_mapping : dict[str, str] | None     Mapping of name to import statement. For example:     {\"Optional\": \"from typing import Optional\"}     If None, uses a default mapping for common names.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.add_missing_imports--returns","title":"Returns","text":"<p>Result     Result with the list of potentially missing imports in <code>data</code>.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.add_missing_imports--examples","title":"Examples","text":"<p>file = rj.file(\"mymodule.py\") result = file.add_missing_imports({ ...     \"Optional\": \"from typing import Optional\", ...     \"Path\": \"from pathlib import Path\", ... })</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.add_pytest_fixture","title":"<code>add_pytest_fixture(fixture_name, body, scope='function', autouse=False, params=None)</code>","text":"<p>Add a pytest fixture to this file.</p> <p>Typically used with conftest.py files to add shared fixtures.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.add_pytest_fixture--parameters","title":"Parameters","text":"<p>fixture_name : str     Name of the fixture function. body : str     Body of the fixture function. scope : str     Fixture scope: \"function\", \"class\", \"module\", or \"session\".     Defaults to \"function\". autouse : bool     If True, fixture is automatically used. Default False. params : list[str] | None     Optional list of fixture parameters for parametrized fixtures.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.add_pytest_fixture--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.add_pytest_fixture--examples","title":"Examples","text":"<p>conftest = rj.file(\"tests/conftest.py\") conftest.add_pytest_fixture( ...     \"db_session\", ...     scope=\"function\", ...     body=\"yield get_db()\" ... )</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.add_to_all","title":"<code>add_to_all(name)</code>","text":"<p>Add a name to all.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.add_to_all--parameters","title":"Parameters","text":"<p>name : str     Name to add to all.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.add_to_all--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.add_to_all--examples","title":"Examples","text":"<p>init_file = rj.file(\"mypackage/init.py\") init_file.add_to_all(\"new_function\")</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.block_at_line","title":"<code>block_at_line(line_number)</code>","text":"<p>Get the code block containing the given line.</p> <p>Finds the innermost code structure (class, function, if, for, while, try, with) that contains the specified line.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.block_at_line--parameters","title":"Parameters","text":"<p>line_number : int     1-based line number.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.block_at_line--returns","title":"Returns","text":"<p>CodeBlockTarget | ErrorTarget     CodeBlockTarget if a block is found, ErrorTarget otherwise.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.block_at_line--examples","title":"Examples","text":"<p>block = rj.file(\"utils.py\").block_at_line(42) print(block.kind)  # \"class\", \"function\", \"if\", etc. block.delete()  # Delete the entire block</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.convert_absolute_to_relative","title":"<code>convert_absolute_to_relative()</code>","text":"<p>Convert all absolute imports to relative imports where possible.</p> <p>Only converts imports that are within the same package.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.convert_absolute_to_relative--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.convert_absolute_to_relative--examples","title":"Examples","text":"<p>file = rj.file(\"myapp/utils.py\") file.convert_absolute_to_relative()</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.convert_docstring_style","title":"<code>convert_docstring_style(from_style, to_style)</code>","text":"<p>Convert all docstrings from one style to another.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.convert_docstring_style--parameters","title":"Parameters","text":"<p>from_style : str | None     Source docstring style (\"google\", \"numpy\", \"sphinx\"),     or None to auto-detect. to_style : str     Target docstring style (\"google\", \"numpy\", \"sphinx\").</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.convert_docstring_style--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.convert_docstring_style--examples","title":"Examples","text":"<p>file = rj.file(\"mymodule.py\") file.convert_docstring_style(\"sphinx\", \"google\") file.convert_docstring_style(None, \"numpy\")  # auto-detect source</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.convert_format_strings_to_fstrings","title":"<code>convert_format_strings_to_fstrings()</code>","text":"<p>Convert .format() string formatting to f-strings.</p> Converts <p>\"Hello {}\".format(name) \u2192 f\"Hello {name}\" \"Hello {0}\".format(name) \u2192 f\"Hello {name}\" \"Hello {name}\".format(name=value) \u2192 f\"Hello {value}\"</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.convert_format_strings_to_fstrings--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.convert_format_strings_to_fstrings--examples","title":"Examples","text":"<p>file = rj.file(\"legacy_module.py\") file.convert_format_strings_to_fstrings()</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.convert_percent_format_to_fstrings","title":"<code>convert_percent_format_to_fstrings()</code>","text":"<p>Convert % string formatting to f-strings.</p> Converts <p>\"Hello %s\" % name \u2192 f\"Hello {name}\" \"Hello %s %s\" % (a, b) \u2192 f\"Hello {a} {b}\" \"%(name)s\" % {\"name\": value} \u2192 f\"{value}\"</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.convert_percent_format_to_fstrings--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.convert_percent_format_to_fstrings--examples","title":"Examples","text":"<p>file = rj.file(\"legacy_module.py\") file.convert_percent_format_to_fstrings()</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.convert_relative_to_absolute","title":"<code>convert_relative_to_absolute(package_name=None)</code>","text":"<p>Convert all relative imports to absolute imports.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.convert_relative_to_absolute--parameters","title":"Parameters","text":"<p>package_name : str | None     The package name to use as the base for absolute imports.     If None, attempts to detect from project configuration.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.convert_relative_to_absolute--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.convert_relative_to_absolute--examples","title":"Examples","text":"<p>file = rj.file(\"myapp/utils.py\") file.convert_relative_to_absolute(\"myapp\")</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.convert_to_package","title":"<code>convert_to_package(keep_original=False)</code>","text":"<p>Convert this file to a package directory.</p> <p>Transforms utils.py into utils/init.py.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.convert_to_package--parameters","title":"Parameters","text":"<p>keep_original : bool     Whether to keep the original file. Default False.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.convert_to_package--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.convert_to_package--examples","title":"Examples","text":"<p>file = rj.file(\"utils.py\") file.convert_to_package()  # Creates utils/init.py</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.convert_type_comments_to_annotations","title":"<code>convert_type_comments_to_annotations()</code>","text":"<p>Convert type comments to inline annotations.</p> Converts <p>x = 1  # type: int</p> <p>To:     x: int = 1</p> And <p>def f(x):  # type: (int) -&gt; str</p> <p>To:     def f(x: int) -&gt; str:</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.convert_type_comments_to_annotations--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.convert_type_comments_to_annotations--examples","title":"Examples","text":"<p>file = rj.file(\"legacy_module.py\") file.convert_type_comments_to_annotations()</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.delete","title":"<code>delete()</code>","text":"<p>Delete this file.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.delete--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.exists","title":"<code>exists()</code>","text":"<p>Check if this file exists.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.find_class","title":"<code>find_class(name)</code>","text":"<p>Find a class by name in this file.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.find_class--parameters","title":"Parameters","text":"<p>name : str     Name of the class to find.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.find_class--returns","title":"Returns","text":"<p>ClassTarget | ErrorTarget     ClassTarget if found, ErrorTarget otherwise.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.find_classes","title":"<code>find_classes(pattern=None)</code>","text":"<p>Find all classes in this file, optionally filtered by pattern.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.find_classes--parameters","title":"Parameters","text":"<p>pattern : str | None     Optional regex pattern to filter class names.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.find_classes--returns","title":"Returns","text":"<p>TargetList[ClassTarget]     List of matching ClassTarget objects.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.find_directives","title":"<code>find_directives()</code>","text":"<p>Find all linting directives in this file.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.find_directives--returns","title":"Returns","text":"<p>DirectiveTargetList     List of DirectiveTarget objects.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.find_directives--examples","title":"Examples","text":"<p>file = rj.file(\"mymodule.py\") directives = file.find_directives() for d in directives: ...     print(f\"Line {d.line_number}: {d.directive_type}\")</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.find_function","title":"<code>find_function(name)</code>","text":"<p>Find a module-level function by name in this file.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.find_function--parameters","title":"Parameters","text":"<p>name : str     Name of the function to find.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.find_function--returns","title":"Returns","text":"<p>FunctionTarget | ErrorTarget     FunctionTarget if found, ErrorTarget otherwise.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.find_functions","title":"<code>find_functions(pattern=None)</code>","text":"<p>Find all module-level functions in this file.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.find_functions--parameters","title":"Parameters","text":"<p>pattern : str | None     Optional regex pattern to filter function names.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.find_functions--returns","title":"Returns","text":"<p>TargetList[FunctionTarget]     List of matching FunctionTarget objects.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.find_imports","title":"<code>find_imports()</code>","text":"<p>Find all imports in this file.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.find_imports--returns","title":"Returns","text":"<p>ImportTargetList     List of ImportTarget objects for all imports in this file.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.find_imports--examples","title":"Examples","text":"<p>file = rj.file(\"mymodule.py\") imports = file.find_imports() for imp in imports: ...     print(f\"Line {imp.line_number}: {imp.import_info.import_statement}\")</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.find_missing_docstrings","title":"<code>find_missing_docstrings()</code>","text":"<p>Find all functions, methods, and classes without docstrings.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.find_missing_docstrings--returns","title":"Returns","text":"<p>TargetList[Target]     List of FunctionTarget, MethodTarget, and ClassTarget objects     that don't have docstrings.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.find_missing_docstrings--examples","title":"Examples","text":"<p>file = rj.file(\"mymodule.py\") missing = file.find_missing_docstrings() print(f\"Found {len(missing)} items without docstrings\")</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.find_noqa_comments","title":"<code>find_noqa_comments()</code>","text":"<p>Find all noqa comments in this file.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.find_noqa_comments--returns","title":"Returns","text":"<p>TargetList[LineTarget]     List of LineTarget objects for lines with noqa comments.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.find_noqa_comments--examples","title":"Examples","text":"<p>file = rj.file(\"mymodule.py\") noqa = file.find_noqa_comments() print(f\"Found {len(noqa)} noqa comments\")</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.find_outdated_docstrings","title":"<code>find_outdated_docstrings()</code>","text":"<p>Find functions/methods with outdated docstrings.</p> <p>A docstring is considered outdated if: - It documents parameters that no longer exist in the signature - It's missing documentation for parameters in the signature</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.find_outdated_docstrings--returns","title":"Returns","text":"<p>Result     Result with list of outdated docstrings in <code>data</code> field.     Each entry is a dict with:     - name: function/method name     - class_name: class name (or None for functions)     - stale_params: params documented but not in signature     - missing_params: params in signature but not documented</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.find_outdated_docstrings--examples","title":"Examples","text":"<p>file = rj.file(\"mymodule.py\") result = file.find_outdated_docstrings() for item in result.data: ...     print(f\"{item['name']}: stale={item['stale_params']}, missing={item['missing_params']}\")</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.find_type_ignores","title":"<code>find_type_ignores()</code>","text":"<p>Find all type: ignore comments in this file.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.find_type_ignores--returns","title":"Returns","text":"<p>TargetList[LineTarget]     List of LineTarget objects for lines with type: ignore.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.find_type_ignores--examples","title":"Examples","text":"<p>file = rj.file(\"mymodule.py\") ignores = file.find_type_ignores() print(f\"Found {len(ignores)} type: ignore comments\")</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.find_unused_imports","title":"<code>find_unused_imports()</code>","text":"<p>Find all unused imports in this file.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.find_unused_imports--returns","title":"Returns","text":"<p>ImportTargetList     List of ImportTarget objects for unused imports.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.find_unused_imports--examples","title":"Examples","text":"<p>file = rj.file(\"mymodule.py\") unused = file.find_unused_imports() print(f\"Found {len(unused)} unused imports\") unused.delete()  # Remove all unused imports</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.generate_all_docstrings","title":"<code>generate_all_docstrings(style='google', overwrite=False)</code>","text":"<p>Generate docstrings for all functions and methods without them.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.generate_all_docstrings--parameters","title":"Parameters","text":"<p>style : str     Docstring style: \"google\", \"numpy\", or \"sphinx\".     Defaults to \"google\". overwrite : bool     Whether to overwrite existing docstrings. Default False.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.generate_all_docstrings--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.generate_all_docstrings--examples","title":"Examples","text":"<p>file = rj.file(\"mymodule.py\") file.generate_all_docstrings() file.generate_all_docstrings(style=\"numpy\", overwrite=True)</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.generate_all_exports","title":"<code>generate_all_exports(include_private=False)</code>","text":"<p>Generate all from all public definitions in this file.</p> <p>Creates an all list containing all public classes, functions, and module-level variables.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.generate_all_exports--parameters","title":"Parameters","text":"<p>include_private : bool     Whether to include private names (starting with _).</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.generate_all_exports--returns","title":"Returns","text":"<p>Result     Result with generated all in data field.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.generate_all_exports--examples","title":"Examples","text":"<p>init_file = rj.file(\"mypackage/init.py\") init_file.generate_all_exports()</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.get_all_exports","title":"<code>get_all_exports()</code>","text":"<p>Get the current all exports from this file.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.get_all_exports--returns","title":"Returns","text":"<p>list[str]     List of exported names, or empty list if no all.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.get_all_exports--examples","title":"Examples","text":"<p>file = rj.file(\"mypackage/init.py\") exports = file.get_all_exports() print(exports)  # ['Class1', 'function1', ...]</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.get_content","title":"<code>get_content()</code>","text":"<p>Get the content of this file.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.get_content--returns","title":"Returns","text":"<p>Result     Result with file content in <code>data</code> field if successful.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.has_header","title":"<code>has_header()</code>","text":"<p>Check if this file has a copyright/license header.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.has_header--returns","title":"Returns","text":"<p>bool     True if the file has a header.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.has_header--examples","title":"Examples","text":"<p>file = rj.file(\"mymodule.py\") if not file.has_header(): ...     file.add_license_header(\"MIT\")</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.line","title":"<code>line(line_number)</code>","text":"<p>Get a specific line of this file.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.line--parameters","title":"Parameters","text":"<p>line_number : int     1-based line number.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.line--returns","title":"Returns","text":"<p>LineTarget     Target for the specified line.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.lines","title":"<code>lines(start, end)</code>","text":"<p>Get a range of lines from this file.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.lines--parameters","title":"Parameters","text":"<p>start : int     1-based starting line number. end : int     1-based ending line number (inclusive).</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.lines--returns","title":"Returns","text":"<p>LineBlockTarget     Target for the specified line range.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.modernize_all","title":"<code>modernize_all()</code>","text":"<p>Apply all modernization transformations to this file.</p> <p>This is a convenience method that applies: 1. F-string conversion (format and percent) 2. Type hint modernization 3. Python 2 compatibility removal 4. Deprecated code replacement</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.modernize_all--returns","title":"Returns","text":"<p>Result     Result of the operation with summary of changes.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.modernize_all--examples","title":"Examples","text":"<p>file = rj.file(\"legacy_module.py\") file.modernize_all()</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.modernize_type_hints","title":"<code>modernize_type_hints()</code>","text":"<p>Modernize type hints to Python 3.10+ syntax.</p> <p>Converts: - List[str] \u2192 list[str] - Dict[str, int] \u2192 dict[str, int] - Optional[str] \u2192 str | None - Union[str, int] \u2192 str | int</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.modernize_type_hints--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.modernize_type_hints--examples","title":"Examples","text":"<p>file = rj.file(\"mymodule.py\") file.modernize_type_hints()</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.organize_imports","title":"<code>organize_imports(first_party_packages=None)</code>","text":"<p>Organize imports in this file (isort-like).</p> <p>Groups imports into: 1. future imports 2. Standard library imports 3. Third-party imports 4. Local/first-party imports</p> <p>Within each group, imports are sorted alphabetically.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.organize_imports--parameters","title":"Parameters","text":"<p>first_party_packages : set[str] | None     Set of package names to treat as first-party. If None, will     try to auto-detect from the project root.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.organize_imports--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.organize_imports--examples","title":"Examples","text":"<p>file = rj.file(\"mymodule.py\") file.organize_imports()</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.remove_all_directives","title":"<code>remove_all_directives()</code>","text":"<p>Remove all linting directive comments from this file.</p> <p>Removes all: type: ignore, noqa, pylint: disable, fmt: skip/off/on, pragma: no cover.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.remove_all_directives--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.remove_all_directives--examples","title":"Examples","text":"<p>file = rj.file(\"mymodule.py\") file.remove_all_directives()</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.remove_all_noqa","title":"<code>remove_all_noqa()</code>","text":"<p>Remove all noqa comments from this file.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.remove_all_noqa--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.remove_all_noqa--examples","title":"Examples","text":"<p>file = rj.file(\"mymodule.py\") file.remove_all_noqa()</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.remove_all_type_ignores","title":"<code>remove_all_type_ignores()</code>","text":"<p>Remove all type: ignore comments from this file.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.remove_all_type_ignores--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.remove_all_type_ignores--examples","title":"Examples","text":"<p>file = rj.file(\"mymodule.py\") file.remove_all_type_ignores()</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.remove_from_all","title":"<code>remove_from_all(name)</code>","text":"<p>Remove a name from all.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.remove_from_all--parameters","title":"Parameters","text":"<p>name : str     Name to remove from all.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.remove_from_all--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.remove_from_all--examples","title":"Examples","text":"<p>init_file = rj.file(\"mypackage/init.py\") init_file.remove_from_all(\"old_function\")</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.remove_python2_compatibility","title":"<code>remove_python2_compatibility()</code>","text":"<p>Remove Python 2 compatibility code from this file.</p> <p>Removes: - future imports (except annotations) - super(ClassName, self) \u2192 super() - u\"string\" prefixes - Unnecessary (object) base class</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.remove_python2_compatibility--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.remove_python2_compatibility--examples","title":"Examples","text":"<p>file = rj.file(\"legacy_module.py\") file.remove_python2_compatibility()</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.remove_six_usage","title":"<code>remove_six_usage()</code>","text":"<p>Remove <code>six</code> library compatibility usage.</p> <p>Converts: - six.text_type \u2192 str - six.binary_type \u2192 bytes - six.PY2 \u2192 False, six.PY3 \u2192 True - six.moves.range \u2192 range</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.remove_six_usage--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.remove_six_usage--examples","title":"Examples","text":"<p>file = rj.file(\"legacy_module.py\") file.remove_six_usage()</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.remove_unused_imports","title":"<code>remove_unused_imports()</code>","text":"<p>Remove all unused imports from this file.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.remove_unused_imports--returns","title":"Returns","text":"<p>Result     Result of the operation, including count of removed imports.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.remove_unused_imports--examples","title":"Examples","text":"<p>file = rj.file(\"mymodule.py\") result = file.remove_unused_imports() print(result.message)</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.replace_deprecated_code","title":"<code>replace_deprecated_code(replacements=None)</code>","text":"<p>Replace deprecated API usage with modern equivalents.</p> <p>Replaces common deprecated patterns like: - collections.MutableMapping \u2192 collections.abc.MutableMapping - assertEquals \u2192 assertEqual - logger.warn \u2192 logger.warning</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.replace_deprecated_code--parameters","title":"Parameters","text":"<p>replacements : dict[str, str] | None     Custom replacement mapping. If None, uses built-in defaults.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.replace_deprecated_code--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.replace_deprecated_code--examples","title":"Examples","text":"<p>file = rj.file(\"tests.py\") file.replace_deprecated_code() file.replace_deprecated_code({\"oldFunc\": \"newFunc\"})</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.rewrite","title":"<code>rewrite(new_content)</code>","text":"<p>Replace the entire content of this file.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.rewrite--parameters","title":"Parameters","text":"<p>new_content : str     New content for the file.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.rewrite--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.split","title":"<code>split(by='class', output_dir=None, create_init=True)</code>","text":"<p>Split this file into multiple files.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.split--parameters","title":"Parameters","text":"<p>by : str     What to split by: \"class\" or \"function\". output_dir : Path | None     Output directory. Defaults to a package named after the file. create_init : bool     Whether to create an init.py with imports.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.split--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.split--examples","title":"Examples","text":"<p>file = rj.file(\"big_module.py\") file.split(by=\"class\")  # One file per class file.split(by=\"function\")  # One file per function</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.update_all_exports","title":"<code>update_all_exports(include_private=False)</code>","text":"<p>Update all to sync with actual definitions.</p> <p>Adds missing exports and removes stale ones.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.update_all_exports--parameters","title":"Parameters","text":"<p>include_private : bool     Whether to include private names (starting with _).</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.update_all_exports--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.update_all_exports--examples","title":"Examples","text":"<p>init_file = rj.file(\"mypackage/init.py\") init_file.update_all_exports()</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.update_copyright_year","title":"<code>update_copyright_year(new_year=None)</code>","text":"<p>Update the copyright year in this file's header.</p> <p>Updates patterns like: - \"Copyright 2023\" -&gt; \"Copyright 2023-2024\" - \"Copyright 2023-2024\" -&gt; \"Copyright 2023-2025\"</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.update_copyright_year--parameters","title":"Parameters","text":"<p>new_year : int | None     Target year. Defaults to current year.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.update_copyright_year--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FileTarget.update_copyright_year--examples","title":"Examples","text":"<p>file = rj.file(\"mymodule.py\") file.update_copyright_year()</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget","title":"<code>FunctionTarget(rejig, name, file_path=None)</code>","text":"<p>               Bases: <code>Target</code></p> <p>Target for a module-level Python function.</p> <p>Provides operations for modifying function body, decorators, parameters, and more.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget--parameters","title":"Parameters","text":"<p>rejig : Rejig     The parent Rejig instance. name : str     Name of the function. file_path : Path | None     Optional path to the file containing the function.     If not provided, the function will be searched across all files.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget--examples","title":"Examples","text":"<p>func = rj.file(\"utils.py\").find_function(\"process_data\") func.insert_statement(\"logger.info('Processing started')\") func.add_decorator(\"timing\")</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.end_line","title":"<code>end_line</code>  <code>property</code>","text":"<p>Ending line number of this function definition (1-indexed).</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.file_path","title":"<code>file_path</code>  <code>property</code>","text":"<p>Path to the file containing this function.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.has_docstring","title":"<code>has_docstring</code>  <code>property</code>","text":"<p>Check if this function has a docstring.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.has_docstring--returns","title":"Returns","text":"<p>bool     True if the function has a docstring.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.has_docstring--examples","title":"Examples","text":"<p>if not func.has_docstring: ...     func.generate_docstring()</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.line_number","title":"<code>line_number</code>  <code>property</code>","text":"<p>Line number where the function is defined (alias for start_line).</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.start_line","title":"<code>start_line</code>  <code>property</code>","text":"<p>Starting line number of this function definition (1-indexed).</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_caching_decorator","title":"<code>add_caching_decorator(ttl=None)</code>","text":"<p>Add a caching decorator to this function.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_caching_decorator--parameters","title":"Parameters","text":"<p>ttl : int | None     Time-to-live in seconds. If None, uses lru_cache without maxsize.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_caching_decorator--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_caching_decorator--examples","title":"Examples","text":"<p>func.add_caching_decorator() func.add_caching_decorator(ttl=300)</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_decorator","title":"<code>add_decorator(decorator)</code>","text":"<p>Add a decorator to this function.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_decorator--parameters","title":"Parameters","text":"<p>decorator : str     Decorator to add (without @ prefix). Can include arguments,     e.g., \"lru_cache(maxsize=128)\".</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_decorator--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_docstring_example","title":"<code>add_docstring_example(example)</code>","text":"<p>Add an example to the docstring.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_docstring_example--parameters","title":"Parameters","text":"<p>example : str     Example code (can include &gt;&gt;&gt; and output).</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_docstring_example--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_docstring_example--examples","title":"Examples","text":"<p>func.add_docstring_example(\"&gt;&gt;&gt; process(5)\\n10\")</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_docstring_raises","title":"<code>add_docstring_raises(exception, description)</code>","text":"<p>Add a raises entry to the docstring.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_docstring_raises--parameters","title":"Parameters","text":"<p>exception : str     Name of the exception (e.g., \"ValueError\"). description : str     Description of when the exception is raised.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_docstring_raises--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_docstring_raises--examples","title":"Examples","text":"<p>func.add_docstring_raises(\"ValueError\", \"If input is negative\")</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_docstring_returns","title":"<code>add_docstring_returns(description)</code>","text":"<p>Add or update the returns section in the docstring.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_docstring_returns--parameters","title":"Parameters","text":"<p>description : str     Description of the return value.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_docstring_returns--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_docstring_returns--examples","title":"Examples","text":"<p>func.add_docstring_returns(\"The processed result\")</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_logging","title":"<code>add_logging(level='debug', include_args=False, logger_name='logger')</code>","text":"<p>Add logging statement at the start of this function.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_logging--parameters","title":"Parameters","text":"<p>level : str     Logging level: \"debug\", \"info\", \"warning\", \"error\", \"critical\".     Defaults to \"debug\". include_args : bool     If True, include argument values in the log message.     Defaults to False. logger_name : str     Name of the logger variable. Defaults to \"logger\".</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_logging--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_logging--examples","title":"Examples","text":"<p>func.add_logging(level=\"debug\", include_args=True)</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_no_cover","title":"<code>add_no_cover()</code>","text":"<p>Add pragma: no cover to exclude this function from coverage.</p> <p>Adds the pragma comment to the function definition line.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_no_cover--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_no_cover--examples","title":"Examples","text":"<p>func.add_no_cover()</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_parameter","title":"<code>add_parameter(param_name, type_annotation=None, default_value=None, position='end')</code>","text":"<p>Add a parameter to the function signature.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_parameter--parameters","title":"Parameters","text":"<p>param_name : str     Name of the parameter to add. type_annotation : str | None     Type annotation for the parameter. default_value : str | None     Default value for the parameter. position : str     Where to add: \"start\", \"end\".     Defaults to \"end\".</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_parameter--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_parameter--examples","title":"Examples","text":"<p>func.add_parameter(\"timeout\", \"int\", \"30\") func.add_parameter(\"verbose\", \"bool\", \"False\")</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_pylint_disable","title":"<code>add_pylint_disable(codes)</code>","text":"<p>Add pylint: disable comment to this function's definition line.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_pylint_disable--parameters","title":"Parameters","text":"<p>codes : str | list[str]     Pylint error codes to disable.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_pylint_disable--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_pylint_disable--examples","title":"Examples","text":"<p>func.add_pylint_disable(\"C0114\") func.add_pylint_disable([\"C0114\", \"C0115\"])</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_retry_decorator","title":"<code>add_retry_decorator(max_attempts=3, exceptions=None)</code>","text":"<p>Add a retry decorator to this function.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_retry_decorator--parameters","title":"Parameters","text":"<p>max_attempts : int     Maximum number of retry attempts. Defaults to 3. exceptions : list[str] | None     List of exception types to catch for retry.     Defaults to [\"Exception\"].</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_retry_decorator--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_retry_decorator--examples","title":"Examples","text":"<p>func.add_retry_decorator(max_attempts=3, exceptions=[\"ConnectionError\"])</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_timing_decorator","title":"<code>add_timing_decorator()</code>","text":"<p>Add a timing decorator to this function.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_timing_decorator--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.add_timing_decorator--examples","title":"Examples","text":"<p>func.add_timing_decorator()</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.convert_to_async","title":"<code>convert_to_async()</code>","text":"<p>Convert this function to async.</p> <p>Adds the <code>async</code> keyword to the function definition.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.convert_to_async--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.convert_to_async--examples","title":"Examples","text":"<p>func.convert_to_async()</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.convert_to_sync","title":"<code>convert_to_sync()</code>","text":"<p>Convert this function from async to sync.</p> <p>Removes the <code>async</code> keyword and all <code>await</code> expressions.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.convert_to_sync--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.convert_to_sync--examples","title":"Examples","text":"<p>func.convert_to_sync()</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.delete","title":"<code>delete()</code>","text":"<p>Delete this function from the file.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.delete--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.exists","title":"<code>exists()</code>","text":"<p>Check if this function exists.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.generate_docstring","title":"<code>generate_docstring(style='google', summary='', overwrite=False)</code>","text":"<p>Generate a docstring for this function.</p> <p>Creates a docstring from the function signature including parameters, return type, and raised exceptions.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.generate_docstring--parameters","title":"Parameters","text":"<p>style : str     Docstring style: \"google\", \"numpy\", or \"sphinx\".     Defaults to \"google\". summary : str     Custom summary line. If empty, auto-generates from function name. overwrite : bool     Whether to overwrite existing docstring. Default False.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.generate_docstring--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.generate_docstring--examples","title":"Examples","text":"<p>func.generate_docstring() func.generate_docstring(style=\"numpy\") func.generate_docstring(summary=\"Process the input data.\")</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.generate_test_stub","title":"<code>generate_test_stub(test_dir=None)</code>","text":"<p>Generate a test stub for this function.</p> <p>Creates a pytest test function stub in the test directory.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.generate_test_stub--parameters","title":"Parameters","text":"<p>test_dir : str | Path | None     Base directory for tests. Defaults to \"tests\" in project root.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.generate_test_stub--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.generate_test_stub--examples","title":"Examples","text":"<p>func.generate_test_stub()  # Creates tests/test_mymodule.py func.generate_test_stub(\"test_suite/unit\")</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.generate_tests_from_doctest","title":"<code>generate_tests_from_doctest(output_path=None)</code>","text":"<p>Convert doctest examples in this function to pytest tests.</p> <p>Extracts doctest examples from the function's docstring and generates equivalent pytest test functions.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.generate_tests_from_doctest--parameters","title":"Parameters","text":"<p>output_path : str | Path | None     Where to write the tests. If None, writes to tests/test_{module}.py.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.generate_tests_from_doctest--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.generate_tests_from_doctest--examples","title":"Examples","text":"<p>func.generate_tests_from_doctest() func.generate_tests_from_doctest(\"tests/test_doctests.py\")</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.get_content","title":"<code>get_content()</code>","text":"<p>Get the source code of this function.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.get_content--returns","title":"Returns","text":"<p>Result     Result with function source code in <code>data</code> field if successful.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.get_docstring","title":"<code>get_docstring()</code>","text":"<p>Get the docstring of this function.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.get_docstring--returns","title":"Returns","text":"<p>Result     Result with docstring text in <code>data</code> field if successful.     Returns empty string if no docstring exists.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.get_docstring--examples","title":"Examples","text":"<p>result = func.get_docstring() if result.success and result.data: ...     print(result.data)</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.infer_type_hints","title":"<code>infer_type_hints(overwrite=False)</code>","text":"<p>Infer and add type hints based on defaults and name heuristics.</p> <p>Uses heuristics to infer types from: - Default parameter values (e.g., = 0 \u2192 int) - Parameter names (e.g., count \u2192 int, is_valid \u2192 bool)</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.infer_type_hints--parameters","title":"Parameters","text":"<p>overwrite : bool     If True, overwrite existing type hints. Default False.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.infer_type_hints--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.infer_type_hints--examples","title":"Examples","text":"<p>func.infer_type_hints() func.infer_type_hints(overwrite=True)</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.insert_statement","title":"<code>insert_statement(statement, position='start')</code>","text":"<p>Insert a statement into the function body.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.insert_statement--parameters","title":"Parameters","text":"<p>statement : str     Python statement to insert. position : str     Where to insert: \"start\" (after docstring) or \"end\".     Defaults to \"start\".</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.insert_statement--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.insert_statement--examples","title":"Examples","text":"<p>func.insert_statement(\"logger.info('Starting')\") func.insert_statement(\"return result\", position=\"end\")</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.move_to","title":"<code>move_to(destination)</code>","text":"<p>Move this function to a different module using rope.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.move_to--parameters","title":"Parameters","text":"<p>destination : str | Target     Destination module path (e.g., 'utils.helpers').</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.move_to--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.remove_decorator","title":"<code>remove_decorator(decorator)</code>","text":"<p>Remove a decorator from this function.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.remove_decorator--parameters","title":"Parameters","text":"<p>decorator : str     Decorator to remove (without @ prefix).</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.remove_decorator--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.remove_parameter","title":"<code>remove_parameter(param_name)</code>","text":"<p>Remove a parameter from the function signature.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.remove_parameter--parameters","title":"Parameters","text":"<p>param_name : str     Name of the parameter to remove.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.remove_parameter--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.remove_parameter--examples","title":"Examples","text":"<p>func.remove_parameter(\"deprecated_arg\")</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.remove_type_hints","title":"<code>remove_type_hints()</code>","text":"<p>Remove all type hints from this function.</p> <p>Removes return type annotations and parameter type annotations.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.remove_type_hints--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.remove_type_hints--examples","title":"Examples","text":"<p>func.remove_type_hints()</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.rename","title":"<code>rename(new_name)</code>","text":"<p>Rename this function.</p> <p>Note: This only renames the function definition. It does not update calls to the function throughout the codebase.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.rename--parameters","title":"Parameters","text":"<p>new_name : str     New name for the function.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.rename--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.rename_parameter","title":"<code>rename_parameter(old_name, new_name)</code>","text":"<p>Rename a parameter in the function signature.</p> <p>Also updates all references to the parameter within the function body.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.rename_parameter--parameters","title":"Parameters","text":"<p>old_name : str     Current name of the parameter. new_name : str     New name for the parameter.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.rename_parameter--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.rename_parameter--examples","title":"Examples","text":"<p>func.rename_parameter(\"old_arg\", \"new_arg\")</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.reorder_parameters","title":"<code>reorder_parameters(param_order)</code>","text":"<p>Reorder parameters in the function signature.</p> <p>Parameters not in the order list are appended at the end in their original relative order.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.reorder_parameters--parameters","title":"Parameters","text":"<p>param_order : list[str]     Ordered list of parameter names defining the new order.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.reorder_parameters--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.reorder_parameters--examples","title":"Examples","text":"<p>func.reorder_parameters([\"required\", \"optional\", \"extra\"])</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.set_parameter_type","title":"<code>set_parameter_type(param_name, param_type)</code>","text":"<p>Set the type annotation for a parameter.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.set_parameter_type--parameters","title":"Parameters","text":"<p>param_name : str     Name of the parameter to annotate. param_type : str     The type annotation (e.g., \"dict[str, Any]\").</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.set_parameter_type--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.set_parameter_type--examples","title":"Examples","text":"<p>func.set_parameter_type(\"data\", \"dict[str, Any]\") func.set_parameter_type(\"timeout\", \"int\")</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.set_return_type","title":"<code>set_return_type(return_type)</code>","text":"<p>Set the return type annotation for this function.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.set_return_type--parameters","title":"Parameters","text":"<p>return_type : str     The return type annotation (e.g., \"list[str]\", \"None\").</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.set_return_type--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.set_return_type--examples","title":"Examples","text":"<p>func.set_return_type(\"list[str]\") func.set_return_type(\"dict[str, Any]\")</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.update_docstring_param","title":"<code>update_docstring_param(param_name, description)</code>","text":"<p>Update or add a parameter description in the docstring.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.update_docstring_param--parameters","title":"Parameters","text":"<p>param_name : str     Name of the parameter to document. description : str     Description of the parameter.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.update_docstring_param--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.update_docstring_param--examples","title":"Examples","text":"<p>func.update_docstring_param(\"timeout\", \"Maximum wait time in seconds\")</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.wrap_with_try_except","title":"<code>wrap_with_try_except(exceptions, handler)</code>","text":"<p>Wrap the function body with a try/except block.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.wrap_with_try_except--parameters","title":"Parameters","text":"<p>exceptions : list[str]     List of exception types to catch. handler : str     Handler code to execute in the except block.     Use 'e' to reference the caught exception.     Separate multiple statements with semicolons.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.wrap_with_try_except--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.FunctionTarget.wrap_with_try_except--examples","title":"Examples","text":"<p>func.wrap_with_try_except( ...     [\"ValueError\", \"TypeError\"], ...     \"logger.error(f'Error: {e}'); raise\" ... )</p>"},{"location":"reference/targets/#rejig.targets.IniTarget","title":"<code>IniTarget(rejig, path)</code>","text":"<p>               Bases: <code>Target</code></p> <p>Target for an INI or CFG configuration file.</p> <p>Provides operations for reading, modifying, and querying INI/CFG files using Python's configparser.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget--parameters","title":"Parameters","text":"<p>rejig : Rejig     The parent Rejig instance. path : str | Path     Path to the INI/CFG file.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget--examples","title":"Examples","text":"<p>ini = rj.ini(\"setup.cfg\") ini.get(\"metadata\", \"name\") ini.set(\"metadata\", \"version\", \"1.0.0\")</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.file_path","title":"<code>file_path</code>  <code>property</code>","text":"<p>Path to the INI file.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.add_section","title":"<code>add_section(section)</code>","text":"<p>Add a new section.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.add_section--parameters","title":"Parameters","text":"<p>section : str     Section name to add.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.add_section--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.delete_key","title":"<code>delete_key(section, key)</code>","text":"<p>Delete a key from a section.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.delete_key--parameters","title":"Parameters","text":"<p>section : str     Section name. key : str     Key to delete.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.delete_key--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.delete_section","title":"<code>delete_section(section)</code>","text":"<p>Delete an entire section.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.delete_section--parameters","title":"Parameters","text":"<p>section : str     Section name to delete.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.delete_section--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.exists","title":"<code>exists()</code>","text":"<p>Check if this INI file exists.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.get","title":"<code>get(section, key, default=None)</code>","text":"<p>Get a value from a section.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.get--parameters","title":"Parameters","text":"<p>section : str     Section name. key : str     Key name within the section. default : str | None     Default value if key not found.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.get--returns","title":"Returns","text":"<p>str | None     The value, or default if not found.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.get--examples","title":"Examples","text":"<p>ini.get(\"metadata\", \"name\") \"my-project\" ini.get(\"metadata\", \"license\", \"MIT\")</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.get_bool","title":"<code>get_bool(section, key, default=False)</code>","text":"<p>Get a boolean value from a section.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.get_bool--parameters","title":"Parameters","text":"<p>section : str     Section name. key : str     Key name within the section. default : bool     Default value if key not found.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.get_bool--returns","title":"Returns","text":"<p>bool     The boolean value.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.get_content","title":"<code>get_content()</code>","text":"<p>Get the raw content of the INI file.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.get_content--returns","title":"Returns","text":"<p>Result     Result with file content in <code>data</code> field if successful.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.get_data","title":"<code>get_data()</code>","text":"<p>Get the parsed INI data as a nested dictionary.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.get_data--returns","title":"Returns","text":"<p>Result     Result with parsed dict in <code>data</code> field if successful.     The dict has section names as keys and section data dicts as values.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.get_data--examples","title":"Examples","text":"<p>result = ini.get_data() if result.success: ...     for section, values in result.data.items(): ...         print(f\"[{section}]\")</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.get_float","title":"<code>get_float(section, key, default=0.0)</code>","text":"<p>Get a float value from a section.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.get_float--parameters","title":"Parameters","text":"<p>section : str     Section name. key : str     Key name within the section. default : float     Default value if key not found.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.get_float--returns","title":"Returns","text":"<p>float     The float value.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.get_int","title":"<code>get_int(section, key, default=0)</code>","text":"<p>Get an integer value from a section.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.get_int--parameters","title":"Parameters","text":"<p>section : str     Section name. key : str     Key name within the section. default : int     Default value if key not found.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.get_int--returns","title":"Returns","text":"<p>int     The integer value.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.get_section","title":"<code>get_section(section)</code>","text":"<p>Get all key-value pairs in a section.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.get_section--parameters","title":"Parameters","text":"<p>section : str     Section name.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.get_section--returns","title":"Returns","text":"<p>dict[str, str]     Dictionary of key-value pairs.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.has_key","title":"<code>has_key(section, key)</code>","text":"<p>Check if a key exists in a section.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.has_key--parameters","title":"Parameters","text":"<p>section : str     Section name. key : str     Key name.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.has_key--returns","title":"Returns","text":"<p>bool     True if key exists.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.has_section","title":"<code>has_section(section)</code>","text":"<p>Check if a section exists.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.has_section--parameters","title":"Parameters","text":"<p>section : str     Section name to check.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.has_section--returns","title":"Returns","text":"<p>bool     True if section exists.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.keys","title":"<code>keys(section)</code>","text":"<p>Get all keys in a section.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.keys--parameters","title":"Parameters","text":"<p>section : str     Section name.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.keys--returns","title":"Returns","text":"<p>list[str]     List of keys in the section.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.rewrite","title":"<code>rewrite(new_content)</code>","text":"<p>Replace the entire content of the INI file.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.rewrite--parameters","title":"Parameters","text":"<p>new_content : str     New INI content.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.rewrite--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.sections","title":"<code>sections()</code>","text":"<p>Get all section names.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.sections--returns","title":"Returns","text":"<p>list[str]     List of section names.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.set","title":"<code>set(section, key, value)</code>","text":"<p>Set a value in a section.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.set--parameters","title":"Parameters","text":"<p>section : str     Section name. key : str     Key name within the section. value : str     Value to set.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.set--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.set--examples","title":"Examples","text":"<p>ini.set(\"metadata\", \"version\", \"2.0.0\")</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.set_section","title":"<code>set_section(section, data)</code>","text":"<p>Set all key-value pairs in a section.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.set_section--parameters","title":"Parameters","text":"<p>section : str     Section name. data : dict[str, str]     Key-value pairs to set.</p>"},{"location":"reference/targets/#rejig.targets.IniTarget.set_section--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.JsonTarget","title":"<code>JsonTarget(rejig, path)</code>","text":"<p>               Bases: <code>Target</code></p> <p>Target for a JSON configuration file.</p> <p>Provides operations for reading, modifying, and querying JSON files.</p>"},{"location":"reference/targets/#rejig.targets.JsonTarget--parameters","title":"Parameters","text":"<p>rejig : Rejig     The parent Rejig instance. path : str | Path     Path to the JSON file.</p>"},{"location":"reference/targets/#rejig.targets.JsonTarget--examples","title":"Examples","text":"<p>json_file = rj.json(\"package.json\") json_file.get(\"name\") json_file.set(\"version\", \"1.0.0\")</p>"},{"location":"reference/targets/#rejig.targets.JsonTarget.file_path","title":"<code>file_path</code>  <code>property</code>","text":"<p>Path to the JSON file.</p>"},{"location":"reference/targets/#rejig.targets.JsonTarget.add_script","title":"<code>add_script(name, command)</code>","text":"<p>Add a script (for package.json).</p>"},{"location":"reference/targets/#rejig.targets.JsonTarget.delete","title":"<code>delete(key_path)</code>","text":"<p>Delete a key by dotted key path.</p>"},{"location":"reference/targets/#rejig.targets.JsonTarget.delete--parameters","title":"Parameters","text":"<p>key_path : str     Dotted path to the key to delete.</p>"},{"location":"reference/targets/#rejig.targets.JsonTarget.delete--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.JsonTarget.exists","title":"<code>exists()</code>","text":"<p>Check if this JSON file exists.</p>"},{"location":"reference/targets/#rejig.targets.JsonTarget.get","title":"<code>get(key_path, default=None)</code>","text":"<p>Get a value by dotted key path.</p>"},{"location":"reference/targets/#rejig.targets.JsonTarget.get--parameters","title":"Parameters","text":"<p>key_path : str     Dotted path to the key (e.g., \"scripts.build\", \"dependencies.react\"). default : Any     Default value if key not found.</p>"},{"location":"reference/targets/#rejig.targets.JsonTarget.get--returns","title":"Returns","text":"<p>Any     The value at the key path, or default if not found.</p>"},{"location":"reference/targets/#rejig.targets.JsonTarget.get--examples","title":"Examples","text":"<p>json_file.get(\"name\") \"my-project\" json_file.get(\"scripts.test\", \"npm test\")</p>"},{"location":"reference/targets/#rejig.targets.JsonTarget.get_content","title":"<code>get_content()</code>","text":"<p>Get the raw content of the JSON file.</p>"},{"location":"reference/targets/#rejig.targets.JsonTarget.get_content--returns","title":"Returns","text":"<p>Result     Result with file content in <code>data</code> field if successful.</p>"},{"location":"reference/targets/#rejig.targets.JsonTarget.get_data","title":"<code>get_data()</code>","text":"<p>Get the parsed JSON data.</p>"},{"location":"reference/targets/#rejig.targets.JsonTarget.get_data--returns","title":"Returns","text":"<p>Result     Result with parsed data in <code>data</code> field if successful.</p>"},{"location":"reference/targets/#rejig.targets.JsonTarget.get_package_name","title":"<code>get_package_name()</code>","text":"<p>Get the package name (for package.json).</p>"},{"location":"reference/targets/#rejig.targets.JsonTarget.get_package_version","title":"<code>get_package_version()</code>","text":"<p>Get the package version (for package.json).</p>"},{"location":"reference/targets/#rejig.targets.JsonTarget.get_scripts","title":"<code>get_scripts()</code>","text":"<p>Get scripts (for package.json).</p>"},{"location":"reference/targets/#rejig.targets.JsonTarget.has_key","title":"<code>has_key(key_path)</code>","text":"<p>Check if a key exists.</p>"},{"location":"reference/targets/#rejig.targets.JsonTarget.has_key--parameters","title":"Parameters","text":"<p>key_path : str     Dotted path to check.</p>"},{"location":"reference/targets/#rejig.targets.JsonTarget.has_key--returns","title":"Returns","text":"<p>bool     True if the key exists.</p>"},{"location":"reference/targets/#rejig.targets.JsonTarget.keys","title":"<code>keys(section_path=None)</code>","text":"<p>Get keys at a section path.</p>"},{"location":"reference/targets/#rejig.targets.JsonTarget.keys--parameters","title":"Parameters","text":"<p>section_path : str | None     Dotted path to section, or None for root keys.</p>"},{"location":"reference/targets/#rejig.targets.JsonTarget.keys--returns","title":"Returns","text":"<p>list[str]     List of keys at the section.</p>"},{"location":"reference/targets/#rejig.targets.JsonTarget.rewrite","title":"<code>rewrite(new_content)</code>","text":"<p>Replace the entire content of the JSON file.</p>"},{"location":"reference/targets/#rejig.targets.JsonTarget.rewrite--parameters","title":"Parameters","text":"<p>new_content : str     New JSON content.</p>"},{"location":"reference/targets/#rejig.targets.JsonTarget.rewrite--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.JsonTarget.set","title":"<code>set(key_path, value)</code>","text":"<p>Set a value by dotted key path.</p>"},{"location":"reference/targets/#rejig.targets.JsonTarget.set--parameters","title":"Parameters","text":"<p>key_path : str     Dotted path to the key (e.g., \"version\", \"scripts.build\"). value : Any     Value to set.</p>"},{"location":"reference/targets/#rejig.targets.JsonTarget.set--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.JsonTarget.set_package_version","title":"<code>set_package_version(version)</code>","text":"<p>Set the package version (for package.json).</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget","title":"<code>LineBlockTarget(rejig, file_path, start_line, end_line)</code>","text":"<p>               Bases: <code>Target</code></p> <p>Target for a contiguous range of lines in a Python file.</p> <p>Provides operations for reading, modifying, moving, and transforming blocks of code by line numbers.</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget--parameters","title":"Parameters","text":"<p>rejig : Rejig     The parent Rejig instance. file_path : Path     Path to the file containing the lines. start_line : int     1-based starting line number. end_line : int     1-based ending line number (inclusive).</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget--examples","title":"Examples","text":"<p>block = rj.file(\"utils.py\").lines(10, 20) block.indent() block.delete()</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.file_path","title":"<code>file_path</code>  <code>property</code>","text":"<p>Path to the file containing this block.</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.dedent","title":"<code>dedent(levels=1, spaces_per_level=4)</code>","text":"<p>Dedent (unindent) this line block.</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.dedent--parameters","title":"Parameters","text":"<p>levels : int     Number of indentation levels to remove (default: 1). spaces_per_level : int     Number of spaces per indentation level (default: 4).</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.dedent--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.delete","title":"<code>delete()</code>","text":"<p>Delete this line block from the file.</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.delete--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.exists","title":"<code>exists()</code>","text":"<p>Check if this line range exists in the file.</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.get_content","title":"<code>get_content()</code>","text":"<p>Get the content of this line block.</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.get_content--returns","title":"Returns","text":"<p>Result     Result with block content in <code>data</code> field if successful.</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.indent","title":"<code>indent(levels=1, spaces_per_level=4)</code>","text":"<p>Indent this line block.</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.indent--parameters","title":"Parameters","text":"<p>levels : int     Number of indentation levels to add (default: 1). spaces_per_level : int     Number of spaces per indentation level (default: 4).</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.indent--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.insert_after","title":"<code>insert_after(content)</code>","text":"<p>Insert content after this line block.</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.insert_after--parameters","title":"Parameters","text":"<p>content : str     Content to insert.</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.insert_after--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.insert_before","title":"<code>insert_before(content)</code>","text":"<p>Insert content before this line block.</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.insert_before--parameters","title":"Parameters","text":"<p>content : str     Content to insert.</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.insert_before--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.move_to","title":"<code>move_to(destination)</code>","text":"<p>Move this line block to a different location in the same file.</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.move_to--parameters","title":"Parameters","text":"<p>destination : int | Target     Target line number or LineTarget to move after.</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.move_to--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.move_to_file","title":"<code>move_to_file(file_path, line_number)</code>","text":"<p>Move this line block to a different file.</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.move_to_file--parameters","title":"Parameters","text":"<p>file_path : str | Path     Path to the destination file. line_number : int     1-based line number to insert at in the destination file.</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.move_to_file--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.move_to_file--examples","title":"Examples","text":"<p>block = rj.file(\"source.py\").lines(10, 20) block.move_to_file(\"destination.py\", 5)</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.replace","title":"<code>replace(pattern, replacement)</code>","text":"<p>Replace pattern in this line block.</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.replace--parameters","title":"Parameters","text":"<p>pattern : str     Regex pattern to search for. replacement : str     Replacement string.</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.replace--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.rewrite","title":"<code>rewrite(new_content)</code>","text":"<p>Replace the content of this line block.</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.rewrite--parameters","title":"Parameters","text":"<p>new_content : str     New content for the block.</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.rewrite--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.wrap_with_fmt_off","title":"<code>wrap_with_fmt_off()</code>","text":"<p>Wrap this line block with fmt: off/on comments.</p> <p>Adds: - <code># fmt: off</code> before the block - <code># fmt: on</code> after the block</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.wrap_with_fmt_off--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.wrap_with_fmt_off--examples","title":"Examples","text":"<p>block = rj.file(\"utils.py\").lines(10, 20) block.wrap_with_fmt_off()</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.wrap_with_no_cover","title":"<code>wrap_with_no_cover()</code>","text":"<p>Wrap this line block with pragma: no cover comment.</p> <p>For multi-line blocks, this adds the pragma comment to the first statement line. For better coverage exclusion of blocks, consider using the pragma on the controlling statement (if/for/while/etc.) or wrapping in a function.</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.wrap_with_no_cover--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.wrap_with_no_cover--examples","title":"Examples","text":"<p>block = rj.file(\"utils.py\").lines(10, 20) block.wrap_with_no_cover()</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.wrap_with_pylint_disable","title":"<code>wrap_with_pylint_disable(codes)</code>","text":"<p>Wrap this line block with pylint: disable/enable comments.</p> <p>Adds: - <code># pylint: disable=codes</code> before the block - <code># pylint: enable=codes</code> after the block</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.wrap_with_pylint_disable--parameters","title":"Parameters","text":"<p>codes : str | list[str]     Pylint error codes to disable (e.g., \"line-too-long\" or [\"C0114\", \"C0115\"]).</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.wrap_with_pylint_disable--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.LineBlockTarget.wrap_with_pylint_disable--examples","title":"Examples","text":"<p>block = rj.file(\"utils.py\").lines(10, 20) block.wrap_with_pylint_disable(\"C0114\") block.wrap_with_pylint_disable([\"C0114\", \"C0115\"])</p>"},{"location":"reference/targets/#rejig.targets.LineTarget","title":"<code>LineTarget(rejig, file_path, line_number)</code>","text":"<p>               Bases: <code>Target</code></p> <p>Target for a single line in a Python file.</p> <p>Provides operations for reading, modifying, and adding directives to a specific line of code.</p>"},{"location":"reference/targets/#rejig.targets.LineTarget--parameters","title":"Parameters","text":"<p>rejig : Rejig     The parent Rejig instance. file_path : Path     Path to the file containing the line. line_number : int     1-based line number.</p>"},{"location":"reference/targets/#rejig.targets.LineTarget--examples","title":"Examples","text":"<p>line = rj.file(\"utils.py\").line(42) line.add_type_ignore(\"arg-type\") line.add_noqa(\"E501\")</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.file_path","title":"<code>file_path</code>  <code>property</code>","text":"<p>Path to the file containing this line.</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.add_fmt_skip","title":"<code>add_fmt_skip()</code>","text":"<p>Add a fmt: skip comment to this line (for black/formatter).</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.add_fmt_skip--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.add_no_cover","title":"<code>add_no_cover()</code>","text":"<p>Add a pragma: no cover comment to this line.</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.add_no_cover--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.add_noqa","title":"<code>add_noqa(codes=None)</code>","text":"<p>Add a noqa comment to this line.</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.add_noqa--parameters","title":"Parameters","text":"<p>codes : str | list[str] | None     Specific error codes to suppress (e.g., \"E501\" or [\"E501\", \"F401\"]).</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.add_noqa--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.add_pylint_disable","title":"<code>add_pylint_disable(codes)</code>","text":"<p>Add a pylint: disable comment to this line.</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.add_pylint_disable--parameters","title":"Parameters","text":"<p>codes : str | list[str]     Pylint error codes to disable (e.g., \"line-too-long\" or [\"C0114\", \"C0115\"]).</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.add_pylint_disable--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.add_pylint_disable--examples","title":"Examples","text":"<p>line.add_pylint_disable(\"line-too-long\") line.add_pylint_disable([\"C0114\", \"C0115\"])</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.add_type_ignore","title":"<code>add_type_ignore(error_code=None, reason=None)</code>","text":"<p>Add a type: ignore comment to this line.</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.add_type_ignore--parameters","title":"Parameters","text":"<p>error_code : str | None     Specific mypy error code to ignore (e.g., \"arg-type\"). reason : str | None     Optional reason for the ignore.</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.add_type_ignore--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.add_type_ignore--examples","title":"Examples","text":"<p>line.add_type_ignore()  # Generic ignore line.add_type_ignore(\"arg-type\") line.add_type_ignore(\"arg-type\", reason=\"Legacy API\")</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.delete","title":"<code>delete()</code>","text":"<p>Delete this line from the file.</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.delete--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.exists","title":"<code>exists()</code>","text":"<p>Check if this line exists in the file.</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.get_content","title":"<code>get_content()</code>","text":"<p>Get the content of this line.</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.get_content--returns","title":"Returns","text":"<p>Result     Result with line content in <code>data</code> field if successful.</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.insert_after","title":"<code>insert_after(content)</code>","text":"<p>Insert content after this line.</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.insert_after--parameters","title":"Parameters","text":"<p>content : str     Content to insert (will be added as a new line).</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.insert_after--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.insert_before","title":"<code>insert_before(content)</code>","text":"<p>Insert content before this line.</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.insert_before--parameters","title":"Parameters","text":"<p>content : str     Content to insert (will be added as a new line).</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.insert_before--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.remove_fmt_skip","title":"<code>remove_fmt_skip()</code>","text":"<p>Remove the fmt: skip comment from this line.</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.remove_fmt_skip--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.remove_no_cover","title":"<code>remove_no_cover()</code>","text":"<p>Remove the pragma: no cover comment from this line.</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.remove_no_cover--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.remove_noqa","title":"<code>remove_noqa()</code>","text":"<p>Remove the noqa comment from this line.</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.remove_noqa--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.remove_pylint_disable","title":"<code>remove_pylint_disable()</code>","text":"<p>Remove the pylint: disable comment from this line.</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.remove_pylint_disable--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.remove_type_ignore","title":"<code>remove_type_ignore()</code>","text":"<p>Remove the type: ignore comment from this line.</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.remove_type_ignore--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.rewrite","title":"<code>rewrite(new_content)</code>","text":"<p>Replace the content of this line.</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.rewrite--parameters","title":"Parameters","text":"<p>new_content : str     New content for the line.</p>"},{"location":"reference/targets/#rejig.targets.LineTarget.rewrite--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget","title":"<code>MethodTarget(rejig, class_name, name, file_path=None)</code>","text":"<p>               Bases: <code>Target</code></p> <p>Target for a method within a Python class.</p> <p>Provides operations for modifying method body, decorators, parameters, and more.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget--parameters","title":"Parameters","text":"<p>rejig : Rejig     The parent Rejig instance. class_name : str     Name of the class containing the method. name : str     Name of the method. file_path : Path | None     Optional path to the file containing the class.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget--examples","title":"Examples","text":"<p>method = rj.file(\"models.py\").find_class(\"User\").find_method(\"save\") method.insert_statement(\"self.validate()\") method.add_decorator(\"transaction.atomic\")</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.end_line","title":"<code>end_line</code>  <code>property</code>","text":"<p>Ending line number of this method definition (1-indexed).</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.file_path","title":"<code>file_path</code>  <code>property</code>","text":"<p>Path to the file containing this method.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.has_docstring","title":"<code>has_docstring</code>  <code>property</code>","text":"<p>Check if this method has a docstring.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.has_docstring--returns","title":"Returns","text":"<p>bool     True if the method has a docstring.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.has_docstring--examples","title":"Examples","text":"<p>if not method.has_docstring: ...     method.generate_docstring()</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.line_number","title":"<code>line_number</code>  <code>property</code>","text":"<p>Line number where the method is defined (alias for start_line).</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.start_line","title":"<code>start_line</code>  <code>property</code>","text":"<p>Starting line number of this method definition (1-indexed).</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_caching_decorator","title":"<code>add_caching_decorator(ttl=None)</code>","text":"<p>Add a caching decorator to this method.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_caching_decorator--parameters","title":"Parameters","text":"<p>ttl : int | None     Time-to-live in seconds. If None, uses lru_cache without maxsize.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_caching_decorator--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_caching_decorator--examples","title":"Examples","text":"<p>method.add_caching_decorator() method.add_caching_decorator(ttl=300)</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_decorator","title":"<code>add_decorator(decorator)</code>","text":"<p>Add a decorator to this method.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_decorator--parameters","title":"Parameters","text":"<p>decorator : str     Decorator to add (without @ prefix).</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_decorator--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_docstring_example","title":"<code>add_docstring_example(example)</code>","text":"<p>Add an example to the docstring.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_docstring_example--parameters","title":"Parameters","text":"<p>example : str     Example code (can include &gt;&gt;&gt; and output).</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_docstring_example--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_docstring_example--examples","title":"Examples","text":"<p>method.add_docstring_example(\"&gt;&gt;&gt; obj.save()\\n'saved'\")</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_docstring_raises","title":"<code>add_docstring_raises(exception, description)</code>","text":"<p>Add a raises entry to the docstring.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_docstring_raises--parameters","title":"Parameters","text":"<p>exception : str     Name of the exception (e.g., \"ValueError\"). description : str     Description of when the exception is raised.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_docstring_raises--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_docstring_raises--examples","title":"Examples","text":"<p>method.add_docstring_raises(\"ValueError\", \"If input is negative\")</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_docstring_returns","title":"<code>add_docstring_returns(description)</code>","text":"<p>Add or update the returns section in the docstring.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_docstring_returns--parameters","title":"Parameters","text":"<p>description : str     Description of the return value.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_docstring_returns--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_docstring_returns--examples","title":"Examples","text":"<p>method.add_docstring_returns(\"The saved instance\")</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_logging","title":"<code>add_logging(level='debug', include_args=False, logger_name='logger')</code>","text":"<p>Add logging statement at the start of this method.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_logging--parameters","title":"Parameters","text":"<p>level : str     Logging level: \"debug\", \"info\", \"warning\", \"error\", \"critical\".     Defaults to \"debug\". include_args : bool     If True, include argument values in the log message.     Defaults to False. logger_name : str     Name of the logger variable. Defaults to \"logger\".</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_logging--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_logging--examples","title":"Examples","text":"<p>method.add_logging(level=\"debug\", include_args=True)</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_no_cover","title":"<code>add_no_cover()</code>","text":"<p>Add pragma: no cover to exclude this method from coverage.</p> <p>Adds the pragma comment to the method definition line.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_no_cover--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_no_cover--examples","title":"Examples","text":"<p>method.add_no_cover()</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_parameter","title":"<code>add_parameter(param_name, type_annotation=None, default_value=None, position='end')</code>","text":"<p>Add a parameter to the method signature.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_parameter--parameters","title":"Parameters","text":"<p>param_name : str     Name of the parameter to add. type_annotation : str | None     Type annotation for the parameter. default_value : str | None     Default value for the parameter. position : str     Where to add: \"start\" (after self/cls), \"end\".     Defaults to \"end\".</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_parameter--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_pylint_disable","title":"<code>add_pylint_disable(codes)</code>","text":"<p>Add pylint: disable comment to this method's definition line.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_pylint_disable--parameters","title":"Parameters","text":"<p>codes : str | list[str]     Pylint error codes to disable.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_pylint_disable--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_pylint_disable--examples","title":"Examples","text":"<p>method.add_pylint_disable(\"C0116\")  # missing-function-docstring method.add_pylint_disable([\"C0116\", \"R0201\"])</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_retry_decorator","title":"<code>add_retry_decorator(max_attempts=3, exceptions=None)</code>","text":"<p>Add a retry decorator to this method.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_retry_decorator--parameters","title":"Parameters","text":"<p>max_attempts : int     Maximum number of retry attempts. Defaults to 3. exceptions : list[str] | None     List of exception types to catch for retry.     Defaults to [\"Exception\"].</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_retry_decorator--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_retry_decorator--examples","title":"Examples","text":"<p>method.add_retry_decorator(max_attempts=3, exceptions=[\"ConnectionError\"])</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_timing_decorator","title":"<code>add_timing_decorator()</code>","text":"<p>Add a timing decorator to this method.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_timing_decorator--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.add_timing_decorator--examples","title":"Examples","text":"<p>method.add_timing_decorator()</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.convert_to_async","title":"<code>convert_to_async()</code>","text":"<p>Convert this method to async.</p> <p>Adds the <code>async</code> keyword to the method definition.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.convert_to_async--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.convert_to_async--examples","title":"Examples","text":"<p>method.convert_to_async()</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.convert_to_classmethod","title":"<code>convert_to_classmethod()</code>","text":"<p>Convert a staticmethod to a classmethod and add cls parameter.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.convert_to_classmethod--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.convert_to_sync","title":"<code>convert_to_sync()</code>","text":"<p>Convert this method from async to sync.</p> <p>Removes the <code>async</code> keyword and all <code>await</code> expressions.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.convert_to_sync--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.convert_to_sync--examples","title":"Examples","text":"<p>method.convert_to_sync()</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.delete","title":"<code>delete()</code>","text":"<p>Delete this method from the class.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.delete--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.exists","title":"<code>exists()</code>","text":"<p>Check if this method exists.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.extract_to_function","title":"<code>extract_to_function(name)</code>","text":"<p>Extract this method to a module-level function.</p> <p>The method is converted to a standalone function, and the method is replaced with a call to that function. The first parameter (self/cls) is preserved.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.extract_to_function--parameters","title":"Parameters","text":"<p>name : str     Name for the extracted function.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.extract_to_function--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.extract_to_function--examples","title":"Examples","text":"<p>result = method.extract_to_function(\"process_user_data\") if result.success: ...     func = rj.find_function(\"process_user_data\")</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.generate_docstring","title":"<code>generate_docstring(style='google', summary='', overwrite=False)</code>","text":"<p>Generate a docstring for this method.</p> <p>Creates a docstring from the method signature including parameters, return type, and raised exceptions.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.generate_docstring--parameters","title":"Parameters","text":"<p>style : str     Docstring style: \"google\", \"numpy\", or \"sphinx\".     Defaults to \"google\". summary : str     Custom summary line. If empty, auto-generates from method name. overwrite : bool     Whether to overwrite existing docstring. Default False.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.generate_docstring--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.generate_docstring--examples","title":"Examples","text":"<p>method.generate_docstring() method.generate_docstring(style=\"numpy\") method.generate_docstring(summary=\"Save the model to disk.\")</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.generate_test","title":"<code>generate_test(test_cases=None, output_path=None)</code>","text":"<p>Generate a test for this method.</p> <p>Generates either a simple test stub or a parameterized test if test cases are provided.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.generate_test--parameters","title":"Parameters","text":"<p>test_cases : list[dict] | None     Optional list of test cases. Each dict should have:     - \"input\": dict of parameter name to value     - \"expected\": expected return value     - \"description\": optional test case description output_path : str | Path | None     Where to write the test. Defaults to tests/test_{class}.py.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.generate_test--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.generate_test--examples","title":"Examples","text":"<p>method.generate_test() method.generate_test( ...     test_cases=[ ...         {\"input\": {\"data\": \"valid\"}, \"expected\": True}, ...         {\"input\": {\"data\": \"\"}, \"expected\": False}, ...     ] ... )</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.get_content","title":"<code>get_content()</code>","text":"<p>Get the source code of this method.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.get_content--returns","title":"Returns","text":"<p>Result     Result with method source code in <code>data</code> field if successful.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.get_docstring","title":"<code>get_docstring()</code>","text":"<p>Get the docstring of this method.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.get_docstring--returns","title":"Returns","text":"<p>Result     Result with docstring text in <code>data</code> field if successful.     Returns empty string if no docstring exists.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.get_docstring--examples","title":"Examples","text":"<p>result = method.get_docstring() if result.success and result.data: ...     print(result.data)</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.infer_type_hints","title":"<code>infer_type_hints(overwrite=False)</code>","text":"<p>Infer and add type hints based on defaults and name heuristics.</p> <p>Uses heuristics to infer types from: - Default parameter values (e.g., = 0 \u2192 int) - Parameter names (e.g., count \u2192 int, is_valid \u2192 bool)</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.infer_type_hints--parameters","title":"Parameters","text":"<p>overwrite : bool     If True, overwrite existing type hints. Default False.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.infer_type_hints--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.infer_type_hints--examples","title":"Examples","text":"<p>method.infer_type_hints() method.infer_type_hints(overwrite=True)</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.insert_after_match","title":"<code>insert_after_match(pattern, code)</code>","text":"<p>Insert code after a line matching a regex pattern.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.insert_after_match--parameters","title":"Parameters","text":"<p>pattern : str     Regex pattern to match against line content. code : str     Code to insert after the matching line.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.insert_after_match--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.insert_before_match","title":"<code>insert_before_match(pattern, code)</code>","text":"<p>Insert code before a line matching a regex pattern.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.insert_before_match--parameters","title":"Parameters","text":"<p>pattern : str     Regex pattern to match against line content. code : str     Code to insert before the matching line.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.insert_before_match--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.insert_statement","title":"<code>insert_statement(statement, position='start')</code>","text":"<p>Insert a statement into the method body.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.insert_statement--parameters","title":"Parameters","text":"<p>statement : str     Python statement to insert. position : str     Where to insert: \"start\" (after docstring) or \"end\".     Defaults to \"start\".</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.insert_statement--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.insert_statement--examples","title":"Examples","text":"<p>method.insert_statement(\"self.validate()\") method.insert_statement(\"return result\", position=\"end\")</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.remove_decorator","title":"<code>remove_decorator(decorator)</code>","text":"<p>Remove a decorator from this method.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.remove_decorator--parameters","title":"Parameters","text":"<p>decorator : str     Decorator to remove (without @ prefix).</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.remove_decorator--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.remove_parameter","title":"<code>remove_parameter(param_name)</code>","text":"<p>Remove a parameter from the method signature.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.remove_parameter--parameters","title":"Parameters","text":"<p>param_name : str     Name of the parameter to remove.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.remove_parameter--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.remove_parameter--examples","title":"Examples","text":"<p>method.remove_parameter(\"deprecated_arg\")</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.remove_type_hints","title":"<code>remove_type_hints()</code>","text":"<p>Remove all type hints from this method.</p> <p>Removes return type annotations and parameter type annotations.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.remove_type_hints--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.remove_type_hints--examples","title":"Examples","text":"<p>method.remove_type_hints()</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.rename","title":"<code>rename(new_name)</code>","text":"<p>Rename this method.</p> <p>Note: This only renames the method definition. It does not update calls to the method throughout the codebase.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.rename--parameters","title":"Parameters","text":"<p>new_name : str     New name for the method.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.rename--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.rename_parameter","title":"<code>rename_parameter(old_name, new_name)</code>","text":"<p>Rename a parameter in the method signature.</p> <p>Also updates all references to the parameter within the method body.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.rename_parameter--parameters","title":"Parameters","text":"<p>old_name : str     Current name of the parameter. new_name : str     New name for the parameter.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.rename_parameter--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.rename_parameter--examples","title":"Examples","text":"<p>method.rename_parameter(\"old_arg\", \"new_arg\")</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.reorder_parameters","title":"<code>reorder_parameters(param_order)</code>","text":"<p>Reorder parameters in the method signature.</p> <p>Parameters not in the order list are appended at the end in their original relative order.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.reorder_parameters--parameters","title":"Parameters","text":"<p>param_order : list[str]     Ordered list of parameter names defining the new order.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.reorder_parameters--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.reorder_parameters--examples","title":"Examples","text":"<p>method.reorder_parameters([\"self\", \"required\", \"optional\"])</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.replace_identifier","title":"<code>replace_identifier(old_name, new_name)</code>","text":"<p>Replace identifier references within the method.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.replace_identifier--parameters","title":"Parameters","text":"<p>old_name : str     Identifier to replace. new_name : str     New identifier name (can include dots, e.g., \"cls.cache\").</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.replace_identifier--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.replace_identifier--examples","title":"Examples","text":"<p>method.replace_identifier(\"cache\", \"cls._cache\")</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.replace_match","title":"<code>replace_match(pattern, code)</code>","text":"<p>Replace a line matching a regex pattern with new code.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.replace_match--parameters","title":"Parameters","text":"<p>pattern : str     Regex pattern to match against line content. code : str     Code to replace the matching line with.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.replace_match--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.set_parameter_type","title":"<code>set_parameter_type(param_name, param_type)</code>","text":"<p>Set the type annotation for a parameter.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.set_parameter_type--parameters","title":"Parameters","text":"<p>param_name : str     Name of the parameter to annotate. param_type : str     The type annotation (e.g., \"dict[str, Any]\").</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.set_parameter_type--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.set_parameter_type--examples","title":"Examples","text":"<p>method.set_parameter_type(\"data\", \"dict[str, Any]\") method.set_parameter_type(\"timeout\", \"int\")</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.set_return_type","title":"<code>set_return_type(return_type)</code>","text":"<p>Set the return type annotation for this method.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.set_return_type--parameters","title":"Parameters","text":"<p>return_type : str     The return type annotation (e.g., \"list[str]\", \"None\").</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.set_return_type--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.set_return_type--examples","title":"Examples","text":"<p>method.set_return_type(\"list[str]\") method.set_return_type(\"Result\")</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.update_docstring_param","title":"<code>update_docstring_param(param_name, description)</code>","text":"<p>Update or add a parameter description in the docstring.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.update_docstring_param--parameters","title":"Parameters","text":"<p>param_name : str     Name of the parameter to document. description : str     Description of the parameter.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.update_docstring_param--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.update_docstring_param--examples","title":"Examples","text":"<p>method.update_docstring_param(\"timeout\", \"Maximum wait time in seconds\")</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.wrap_with_try_except","title":"<code>wrap_with_try_except(exceptions, handler)</code>","text":"<p>Wrap the method body with a try/except block.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.wrap_with_try_except--parameters","title":"Parameters","text":"<p>exceptions : list[str]     List of exception types to catch. handler : str     Handler code to execute in the except block.     Use 'e' to reference the caught exception.     Separate multiple statements with semicolons.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.wrap_with_try_except--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.MethodTarget.wrap_with_try_except--examples","title":"Examples","text":"<p>method.wrap_with_try_except( ...     [\"ValueError\", \"TypeError\"], ...     \"logger.error(f'Error: {e}'); raise\" ... )</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget","title":"<code>ModuleTarget(rejig, module_path)</code>","text":"<p>               Bases: <code>Target</code></p> <p>Target for a Python module identified by dotted path.</p> <p>This target resolves a dotted module path (e.g., 'myapp.models.user') to the corresponding Python file and provides operations on it.</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget--parameters","title":"Parameters","text":"<p>rejig : Rejig     The parent Rejig instance. module_path : str     Dotted module path (e.g., \"myapp.models\" or \"myapp.models.user\").</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget--examples","title":"Examples","text":"<p>module = rj.module(\"myapp.models\") module.find_class(\"User\").add_attribute(\"email\", \"str\") module.add_import(\"from typing import Optional\")</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.file_path","title":"<code>file_path</code>  <code>property</code>","text":"<p>Resolved filesystem path for this module.</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.add_class","title":"<code>add_class(name, body='pass', **kwargs)</code>","text":"<p>Add a class to this module.</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.add_class--parameters","title":"Parameters","text":"<p>name : str     Name of the class to add. body : str     Body of the class (default: \"pass\"). **kwargs     Additional options (bases, decorators).</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.add_class--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.add_function","title":"<code>add_function(name, body='pass', **kwargs)</code>","text":"<p>Add a module-level function to this module.</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.add_function--parameters","title":"Parameters","text":"<p>name : str     Name of the function to add. body : str     Body of the function (default: \"pass\"). **kwargs     Additional options (params, return_type, decorators).</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.add_function--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.add_import","title":"<code>add_import(import_statement)</code>","text":"<p>Add an import statement to this module.</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.add_import--parameters","title":"Parameters","text":"<p>import_statement : str     Import statement to add (without newline).</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.add_import--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.delete","title":"<code>delete()</code>","text":"<p>Delete this module's file.</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.delete--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.exists","title":"<code>exists()</code>","text":"<p>Check if this module exists.</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.find_class","title":"<code>find_class(name)</code>","text":"<p>Find a class by name in this module.</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.find_class--parameters","title":"Parameters","text":"<p>name : str     Name of the class to find.</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.find_class--returns","title":"Returns","text":"<p>ClassTarget | ErrorTarget     ClassTarget if found, ErrorTarget otherwise.</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.find_classes","title":"<code>find_classes(pattern=None)</code>","text":"<p>Find all classes in this module.</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.find_classes--parameters","title":"Parameters","text":"<p>pattern : str | None     Optional regex pattern to filter class names.</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.find_classes--returns","title":"Returns","text":"<p>TargetList[ClassTarget]     List of matching ClassTarget objects.</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.find_function","title":"<code>find_function(name)</code>","text":"<p>Find a module-level function by name in this module.</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.find_function--parameters","title":"Parameters","text":"<p>name : str     Name of the function to find.</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.find_function--returns","title":"Returns","text":"<p>FunctionTarget | ErrorTarget     FunctionTarget if found, ErrorTarget otherwise.</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.find_functions","title":"<code>find_functions(pattern=None)</code>","text":"<p>Find all module-level functions in this module.</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.find_functions--parameters","title":"Parameters","text":"<p>pattern : str | None     Optional regex pattern to filter function names.</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.find_functions--returns","title":"Returns","text":"<p>TargetList[FunctionTarget]     List of matching FunctionTarget objects.</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.get_content","title":"<code>get_content()</code>","text":"<p>Get the content of this module's file.</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.get_content--returns","title":"Returns","text":"<p>Result     Result with file content in <code>data</code> field if successful.</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.line","title":"<code>line(line_number)</code>","text":"<p>Get a specific line of this module.</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.line--parameters","title":"Parameters","text":"<p>line_number : int     1-based line number.</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.line--returns","title":"Returns","text":"<p>LineTarget     Target for the specified line.</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.lines","title":"<code>lines(start, end)</code>","text":"<p>Get a range of lines from this module.</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.lines--parameters","title":"Parameters","text":"<p>start : int     1-based starting line number. end : int     1-based ending line number (inclusive).</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.lines--returns","title":"Returns","text":"<p>LineBlockTarget     Target for the specified line range.</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.move_to","title":"<code>move_to(new_location, update_imports=True)</code>","text":"<p>Move this module to a new location with import updates.</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.move_to--parameters","title":"Parameters","text":"<p>new_location : str     New module path (e.g., \"myapp.core.utils\"). update_imports : bool     Whether to update imports across the project. Default True.</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.move_to--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.move_to--examples","title":"Examples","text":"<p>module = rj.module(\"myapp.utils\") module.move_to(\"myapp.core.utils\")  # Moves and updates imports</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.rename","title":"<code>rename(new_name, update_imports=True)</code>","text":"<p>Rename this module and update imports across the project.</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.rename--parameters","title":"Parameters","text":"<p>new_name : str     New module path (e.g., \"myapp.new_utils\"). update_imports : bool     Whether to update imports across the project. Default True.</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.rename--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.rename--examples","title":"Examples","text":"<p>module = rj.module(\"myapp.old_utils\") module.rename(\"myapp.new_utils\")  # Updates imports across project</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.rewrite","title":"<code>rewrite(new_content)</code>","text":"<p>Replace the entire content of this module.</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.rewrite--parameters","title":"Parameters","text":"<p>new_content : str     New content for the module.</p>"},{"location":"reference/targets/#rejig.targets.ModuleTarget.rewrite--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget","title":"<code>PackageTarget(rejig, path)</code>","text":"<p>               Bases: <code>Target</code></p> <p>Target for a Python package (directory with init.py).</p> <p>Provides operations for working with packages including finding modules, classes, and functions within the package.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget--parameters","title":"Parameters","text":"<p>rejig : Rejig     The parent Rejig instance. path : str | Path     Path to the package directory.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget--examples","title":"Examples","text":"<p>pkg = rj.package(\"myapp/models\") pkg.find_classes()  # Find all classes in the package pkg.init_file.add_import(\"from .user import User\")</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.file_path","title":"<code>file_path</code>  <code>property</code>","text":"<p>Path to the package directory.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.init_file","title":"<code>init_file</code>  <code>property</code>","text":"<p>Get the init.py file target.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.name","title":"<code>name</code>  <code>property</code>","text":"<p>The package name (directory name).</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.add_copyright_header","title":"<code>add_copyright_header(copyright_text, year=None, recursive=True)</code>","text":"<p>Add a copyright header to all Python files in this package.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.add_copyright_header--parameters","title":"Parameters","text":"<p>copyright_text : str     Copyright holder text (e.g., \"MyCompany Inc.\"). year : int | None     Copyright year. Defaults to current year. recursive : bool     Whether to include files in subpackages. Default True.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.add_copyright_header--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.add_copyright_header--examples","title":"Examples","text":"<p>pkg = rj.package(\"mypackage/\") pkg.add_copyright_header(\"Copyright 2024 MyCompany\")</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.add_import","title":"<code>add_import(import_statement)</code>","text":"<p>Add an import statement to the package's init.py.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.add_import--parameters","title":"Parameters","text":"<p>import_statement : str     Import statement to add.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.add_import--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.add_license_header","title":"<code>add_license_header(license_name, copyright_holder=None, year=None, recursive=True)</code>","text":"<p>Add a license header to all Python files in this package.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.add_license_header--parameters","title":"Parameters","text":"<p>license_name : str     License identifier: \"MIT\", \"Apache-2.0\", \"GPL-3.0\",     \"BSD-3-Clause\", or \"Proprietary\". copyright_holder : str | None     Copyright holder name. If None, uses a placeholder. year : int | None     Copyright year. Defaults to current year. recursive : bool     Whether to include files in subpackages. Default True.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.add_license_header--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.add_license_header--examples","title":"Examples","text":"<p>pkg = rj.package(\"mypackage/\") pkg.add_license_header(\"MIT\", \"MyCompany Inc.\")</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.convert_unittest_to_pytest","title":"<code>convert_unittest_to_pytest()</code>","text":"<p>Convert unittest test cases to pytest style.</p> <p>Transforms all test files in this package (recursively) from unittest style to pytest style, converting: - self.assertEqual(a, b) -&gt; assert a == b - self.assertTrue(x) -&gt; assert x - self.assertFalse(x) -&gt; assert not x - self.assertIsNone(x) -&gt; assert x is None - self.assertRaises(X) -&gt; pytest.raises(X) - And many more assertion methods</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.convert_unittest_to_pytest--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.convert_unittest_to_pytest--examples","title":"Examples","text":"<p>tests_pkg = rj.package(\"tests/\") tests_pkg.convert_unittest_to_pytest()</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.create_module","title":"<code>create_module(name, content='')</code>","text":"<p>Create a new module in this package.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.create_module--parameters","title":"Parameters","text":"<p>name : str     Module name (without .py extension). content : str     Initial content for the module.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.create_module--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.create_subpackage","title":"<code>create_subpackage(name, init_content='')</code>","text":"<p>Create a new subpackage in this package.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.create_subpackage--parameters","title":"Parameters","text":"<p>name : str     Subpackage name. init_content : str     Initial content for init.py.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.create_subpackage--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.delete","title":"<code>delete()</code>","text":"<p>Delete this package and all its contents.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.delete--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.exists","title":"<code>exists()</code>","text":"<p>Check if this package exists (directory with init.py).</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.find_class","title":"<code>find_class(name)</code>","text":"<p>Find a class by name across all modules in this package.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.find_class--parameters","title":"Parameters","text":"<p>name : str     Name of the class to find.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.find_class--returns","title":"Returns","text":"<p>ClassTarget | ErrorTarget     ClassTarget if found, ErrorTarget otherwise.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.find_classes","title":"<code>find_classes(pattern=None)</code>","text":"<p>Find all classes in this package.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.find_classes--parameters","title":"Parameters","text":"<p>pattern : str | None     Optional regex pattern to filter class names.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.find_classes--returns","title":"Returns","text":"<p>TargetList[ClassTarget]     List of matching ClassTarget objects.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.find_function","title":"<code>find_function(name)</code>","text":"<p>Find a module-level function by name across all modules.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.find_function--parameters","title":"Parameters","text":"<p>name : str     Name of the function to find.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.find_function--returns","title":"Returns","text":"<p>FunctionTarget | ErrorTarget     FunctionTarget if found, ErrorTarget otherwise.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.find_functions","title":"<code>find_functions(pattern=None)</code>","text":"<p>Find all module-level functions in this package.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.find_functions--parameters","title":"Parameters","text":"<p>pattern : str | None     Optional regex pattern to filter function names.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.find_functions--returns","title":"Returns","text":"<p>TargetList[FunctionTarget]     List of matching FunctionTarget objects.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.find_module","title":"<code>find_module(name)</code>","text":"<p>Find a module by name within this package.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.find_module--parameters","title":"Parameters","text":"<p>name : str     Module name (without .py extension).</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.find_module--returns","title":"Returns","text":"<p>FileTarget | ErrorTarget     FileTarget if found, ErrorTarget otherwise.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.find_subpackage","title":"<code>find_subpackage(name)</code>","text":"<p>Find a subpackage by name.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.find_subpackage--parameters","title":"Parameters","text":"<p>name : str     Subpackage name.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.find_subpackage--returns","title":"Returns","text":"<p>PackageTarget | ErrorTarget     PackageTarget if found, ErrorTarget otherwise.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.generate_stubs","title":"<code>generate_stubs(output=None)</code>","text":"<p>Generate type stub files (.pyi) for all modules in this package.</p> <p>Creates stub files that contain only function signatures, class definitions, and type annotations. This is useful for providing type hints for libraries or for use with type checkers.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.generate_stubs--parameters","title":"Parameters","text":"<p>output : str | Path | None     Output directory for stub files. If None, creates a 'stubs/'     directory next to the package.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.generate_stubs--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.generate_stubs--examples","title":"Examples","text":"<p>pkg = rj.package(\"src/mypackage\") pkg.generate_stubs()  # Creates stubs/ alongside package pkg.generate_stubs(\"custom_stubs/\")  # Use custom directory</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.generate_test_stubs","title":"<code>generate_test_stubs(test_dir=None)</code>","text":"<p>Generate test stubs for all classes and functions in this package.</p> <p>Creates test files with stub test functions for all public classes and functions found in the package.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.generate_test_stubs--parameters","title":"Parameters","text":"<p>test_dir : str | Path | None     Base directory for tests. Defaults to \"tests\" in project root.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.generate_test_stubs--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.generate_test_stubs--examples","title":"Examples","text":"<p>pkg = rj.package(\"src/myapp\") pkg.generate_test_stubs()  # Creates tests/test_*.py files</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.get_content","title":"<code>get_content()</code>","text":"<p>Get the content of the package's init.py file.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.get_content--returns","title":"Returns","text":"<p>Result     Result with init.py content in <code>data</code> field if successful.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.get_modules","title":"<code>get_modules()</code>","text":"<p>Get all Python modules in this package.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.get_modules--returns","title":"Returns","text":"<p>list[Path]     List of paths to Python files in the package (non-recursive).</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.get_subpackages","title":"<code>get_subpackages()</code>","text":"<p>Get all subpackages in this package.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.get_subpackages--returns","title":"Returns","text":"<p>list[Path]     List of paths to subpackage directories.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.merge_modules","title":"<code>merge_modules(module_names, into, delete_originals=False, generate_all=True)</code>","text":"<p>Merge multiple modules in this package into one.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.merge_modules--parameters","title":"Parameters","text":"<p>module_names : list[str]     List of module names to merge (without .py extension). into : str     Target module name (without .py extension). delete_originals : bool     Whether to delete the original files after merging. generate_all : bool     Whether to generate an all list.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.merge_modules--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.merge_modules--examples","title":"Examples","text":"<p>pkg = rj.package(\"mypackage/\") pkg.merge_modules([\"utils_a\", \"utils_b\"], into=\"utils\")</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.update_copyright_year","title":"<code>update_copyright_year(new_year=None, recursive=True)</code>","text":"<p>Update the copyright year in all Python files in this package.</p> <p>Updates patterns like: - \"Copyright 2023\" -&gt; \"Copyright 2023-2024\" - \"Copyright 2023-2024\" -&gt; \"Copyright 2023-2025\"</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.update_copyright_year--parameters","title":"Parameters","text":"<p>new_year : int | None     Target year. Defaults to current year. recursive : bool     Whether to include files in subpackages. Default True.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.update_copyright_year--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.update_copyright_year--examples","title":"Examples","text":"<p>pkg = rj.package(\"mypackage/\") pkg.update_copyright_year()</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.update_test_imports","title":"<code>update_test_imports(old_module, new_module)</code>","text":"<p>Update imports in test files after refactoring.</p> <p>Useful for updating test imports when source modules are moved or renamed.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.update_test_imports--parameters","title":"Parameters","text":"<p>old_module : str     The old module path (e.g., \"myapp.utils\"). new_module : str     The new module path (e.g., \"myapp.helpers.utils\").</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.update_test_imports--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.PackageTarget.update_test_imports--examples","title":"Examples","text":"<p>tests_pkg = rj.package(\"tests/\") tests_pkg.update_test_imports(\"myapp.utils\", \"myapp.helpers.utils\")</p>"},{"location":"reference/targets/#rejig.targets.Result","title":"<code>Result(success, message, files_changed=list(), data=None, diff=None, diffs=dict())</code>  <code>dataclass</code>","text":"<p>Base result for all operations.</p> <p>Operations never raise exceptions. Instead, they return Result objects that indicate success or failure.</p> <p>Attributes:</p> Name Type Description <code>success</code> <code>bool</code> <p>Whether the operation succeeded</p> <code>message</code> <code>str</code> <p>Human-readable description of what happened</p> <code>files_changed</code> <code>list[Path]</code> <p>List of files that were modified</p> <code>data</code> <code>Any</code> <p>Optional payload for operations that return data</p> <code>diff</code> <code>str | None</code> <p>Combined unified diff of all changes (if any)</p> <code>diffs</code> <code>dict[Path, str]</code> <p>Per-file diffs mapping path to diff string</p>"},{"location":"reference/targets/#rejig.targets.Result.get_diff","title":"<code>get_diff(path=None)</code>","text":"<p>Get diff for a specific file or combined diff.</p>"},{"location":"reference/targets/#rejig.targets.Result.get_diff--parameters","title":"Parameters","text":"<p>path : Path | None     If provided, returns diff for that specific file.     If None, returns the combined diff.</p>"},{"location":"reference/targets/#rejig.targets.Result.get_diff--returns","title":"Returns","text":"<p>str | None     The diff string, or None if no diff available.</p>"},{"location":"reference/targets/#rejig.targets.Result.is_error","title":"<code>is_error()</code>","text":"<p>Check if this result represents an error.</p>"},{"location":"reference/targets/#rejig.targets.StringLiteralTarget","title":"<code>StringLiteralTarget(rejig, file_path, line_number, value, raw_content, is_docstring=False)</code>","text":"<p>               Bases: <code>Target</code></p> <p>Target for a string literal in Python source code.</p> <p>Provides operations for reading, modifying, and analyzing string literals in Python files. Useful for finding hardcoded strings, SQL queries, or extracting strings for internationalization.</p>"},{"location":"reference/targets/#rejig.targets.StringLiteralTarget--parameters","title":"Parameters","text":"<p>rejig : Rejig     The parent Rejig instance. file_path : Path     Path to the file containing the string. line_number : int     1-based line number where the string starts. value : str     The string value (decoded, without quotes). raw_content : str     The raw string as it appears in source (with quotes). is_docstring : bool     Whether this string is a docstring.</p>"},{"location":"reference/targets/#rejig.targets.StringLiteralTarget--examples","title":"Examples","text":"<p>strings = rj.file(\"queries.py\").find_strings(pattern=\"SELECT\") for s in strings: ...     print(f\"{s.line_number}: {s.value[:50]}\")</p>"},{"location":"reference/targets/#rejig.targets.StringLiteralTarget.file_path","title":"<code>file_path</code>  <code>property</code>","text":"<p>Path to the file containing this string.</p>"},{"location":"reference/targets/#rejig.targets.StringLiteralTarget.is_fstring","title":"<code>is_fstring</code>  <code>property</code>","text":"<p>Check if this is an f-string.</p>"},{"location":"reference/targets/#rejig.targets.StringLiteralTarget.is_multiline","title":"<code>is_multiline</code>  <code>property</code>","text":"<p>Check if this is a multiline string (triple-quoted).</p>"},{"location":"reference/targets/#rejig.targets.StringLiteralTarget.is_raw_string","title":"<code>is_raw_string</code>  <code>property</code>","text":"<p>Check if this is a raw string.</p>"},{"location":"reference/targets/#rejig.targets.StringLiteralTarget.looks_like_path","title":"<code>looks_like_path</code>  <code>property</code>","text":"<p>Check if this string looks like a file path.</p>"},{"location":"reference/targets/#rejig.targets.StringLiteralTarget.looks_like_regex","title":"<code>looks_like_regex</code>  <code>property</code>","text":"<p>Check if this string looks like a regex pattern.</p>"},{"location":"reference/targets/#rejig.targets.StringLiteralTarget.looks_like_sql","title":"<code>looks_like_sql</code>  <code>property</code>","text":"<p>Check if this string looks like SQL.</p>"},{"location":"reference/targets/#rejig.targets.StringLiteralTarget.looks_like_url","title":"<code>looks_like_url</code>  <code>property</code>","text":"<p>Check if this string looks like a URL.</p>"},{"location":"reference/targets/#rejig.targets.StringLiteralTarget.name","title":"<code>name</code>  <code>property</code>","text":"<p>The string value, used by TargetList filtering.</p>"},{"location":"reference/targets/#rejig.targets.StringLiteralTarget.delete","title":"<code>delete()</code>","text":"<p>Delete this string literal (replace with empty string or remove assignment).</p> <p>Note: This replaces the string with an empty string. For more complex deletion (removing the entire statement), use the containing target.</p>"},{"location":"reference/targets/#rejig.targets.StringLiteralTarget.delete--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.StringLiteralTarget.exists","title":"<code>exists()</code>","text":"<p>Check if this string literal still exists at the recorded location.</p>"},{"location":"reference/targets/#rejig.targets.StringLiteralTarget.get_content","title":"<code>get_content()</code>","text":"<p>Get the value of this string literal.</p>"},{"location":"reference/targets/#rejig.targets.StringLiteralTarget.get_content--returns","title":"Returns","text":"<p>Result     Result with string value in <code>data</code> field if successful.</p>"},{"location":"reference/targets/#rejig.targets.StringLiteralTarget.rewrite","title":"<code>rewrite(new_value=None, *, new_content=None)</code>","text":"<p>Replace this string literal with a new value.</p>"},{"location":"reference/targets/#rejig.targets.StringLiteralTarget.rewrite--parameters","title":"Parameters","text":"<p>new_value : str     New string value (preferred parameter name for string literals). new_content : str     Alias for new_value for API consistency with other targets.</p>"},{"location":"reference/targets/#rejig.targets.StringLiteralTarget.rewrite--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.Target","title":"<code>Target(rejig)</code>","text":"<p>               Bases: <code>ABC</code></p> <p>Base class for all targets - things we can perform operations on.</p> <p>Targets never raise exceptions for unsupported or failed operations. Instead, they return ErrorResult with details of what went wrong.</p> <p>Subclasses should override methods to implement their specific behavior. The base implementation returns ErrorResult for all operations.</p>"},{"location":"reference/targets/#rejig.targets.Target.dry_run","title":"<code>dry_run</code>  <code>property</code>","text":"<p>Check if we're in dry-run mode.</p>"},{"location":"reference/targets/#rejig.targets.Target.rejig","title":"<code>rejig</code>  <code>property</code>","text":"<p>Access the parent Rejig instance.</p>"},{"location":"reference/targets/#rejig.targets.Target.add_attribute","title":"<code>add_attribute(name, type_hint, default='None')</code>","text":"<p>Add an attribute to this target.</p>"},{"location":"reference/targets/#rejig.targets.Target.add_class","title":"<code>add_class(name, body='pass', **kwargs)</code>","text":"<p>Add a class to this target.</p>"},{"location":"reference/targets/#rejig.targets.Target.add_decorator","title":"<code>add_decorator(decorator)</code>","text":"<p>Add a decorator to this target.</p>"},{"location":"reference/targets/#rejig.targets.Target.add_function","title":"<code>add_function(name, body='pass', **kwargs)</code>","text":"<p>Add a function to this target.</p>"},{"location":"reference/targets/#rejig.targets.Target.add_import","title":"<code>add_import(import_statement)</code>","text":"<p>Add an import statement to this target.</p>"},{"location":"reference/targets/#rejig.targets.Target.add_method","title":"<code>add_method(name, body='pass', **kwargs)</code>","text":"<p>Add a method to this target.</p>"},{"location":"reference/targets/#rejig.targets.Target.delete","title":"<code>delete()</code>","text":"<p>Delete this target.</p>"},{"location":"reference/targets/#rejig.targets.Target.exists","title":"<code>exists()</code>","text":"<p>Check if this target exists in the codebase.</p> <p>Default implementation returns False. Subclasses should override to provide proper existence checking.</p>"},{"location":"reference/targets/#rejig.targets.Target.exists--returns","title":"Returns","text":"<p>bool     True if the target exists, False otherwise.</p>"},{"location":"reference/targets/#rejig.targets.Target.find_class","title":"<code>find_class(name)</code>","text":"<p>Find a class within this target. Returns ErrorTarget if not supported.</p>"},{"location":"reference/targets/#rejig.targets.Target.find_classes","title":"<code>find_classes(pattern=None)</code>","text":"<p>Find all classes within this target.</p>"},{"location":"reference/targets/#rejig.targets.Target.find_function","title":"<code>find_function(name)</code>","text":"<p>Find a function within this target. Returns ErrorTarget if not supported.</p>"},{"location":"reference/targets/#rejig.targets.Target.find_functions","title":"<code>find_functions(pattern=None)</code>","text":"<p>Find all functions within this target.</p>"},{"location":"reference/targets/#rejig.targets.Target.find_method","title":"<code>find_method(name)</code>","text":"<p>Find a method within this target. Returns ErrorTarget if not supported.</p>"},{"location":"reference/targets/#rejig.targets.Target.find_methods","title":"<code>find_methods(pattern=None)</code>","text":"<p>Find all methods within this target.</p>"},{"location":"reference/targets/#rejig.targets.Target.get_content","title":"<code>get_content()</code>","text":"<p>Get the content/source code of this target.</p>"},{"location":"reference/targets/#rejig.targets.Target.insert_after","title":"<code>insert_after(content)</code>","text":"<p>Insert content after this target.</p>"},{"location":"reference/targets/#rejig.targets.Target.insert_before","title":"<code>insert_before(content)</code>","text":"<p>Insert content before this target.</p>"},{"location":"reference/targets/#rejig.targets.Target.insert_statement","title":"<code>insert_statement(statement, position='start')</code>","text":"<p>Insert a statement into this target.</p>"},{"location":"reference/targets/#rejig.targets.Target.line","title":"<code>line(line_number)</code>","text":"<p>Get a specific line of this target. Returns ErrorTarget if not supported.</p>"},{"location":"reference/targets/#rejig.targets.Target.lines","title":"<code>lines(start, end)</code>","text":"<p>Get a range of lines of this target. Returns ErrorTarget if not supported.</p>"},{"location":"reference/targets/#rejig.targets.Target.move_to","title":"<code>move_to(destination)</code>","text":"<p>Move this target to a new location.</p>"},{"location":"reference/targets/#rejig.targets.Target.remove_decorator","title":"<code>remove_decorator(decorator)</code>","text":"<p>Remove a decorator from this target.</p>"},{"location":"reference/targets/#rejig.targets.Target.rename","title":"<code>rename(new_name)</code>","text":"<p>Rename this target.</p>"},{"location":"reference/targets/#rejig.targets.Target.replace","title":"<code>replace(pattern, replacement)</code>","text":"<p>Replace pattern in this target's content.</p>"},{"location":"reference/targets/#rejig.targets.Target.rewrite","title":"<code>rewrite(new_content)</code>","text":"<p>Replace the content of this target.</p>"},{"location":"reference/targets/#rejig.targets.TargetList","title":"<code>TargetList(rejig, targets)</code>","text":"<p>               Bases: <code>Generic[T]</code></p> <p>A list of targets that can be operated on uniformly.</p> <p>Operations are applied to all targets, returning a BatchResult. This class is also returned by find operations (e.g., find_classes(), find_functions()).</p> Example <p>all_classes = rj.find_classes(pattern=\"^Test\") results = all_classes.add_decorator(\"pytest.mark.slow\") if results.partial_success:     print(f\"Modified {len(results.succeeded)} classes\")</p>"},{"location":"reference/targets/#rejig.targets.TargetList.add_copyright_header","title":"<code>add_copyright_header(copyright_text, year=None)</code>","text":"<p>Add a copyright header to all file targets.</p>"},{"location":"reference/targets/#rejig.targets.TargetList.add_copyright_header--parameters","title":"Parameters","text":"<p>copyright_text : str     Copyright holder text (e.g., \"MyCompany Inc.\"). year : int | None     Copyright year. Defaults to current year.</p>"},{"location":"reference/targets/#rejig.targets.TargetList.add_copyright_header--returns","title":"Returns","text":"<p>BatchResult     Results of all operations.</p>"},{"location":"reference/targets/#rejig.targets.TargetList.add_copyright_header--examples","title":"Examples","text":"<p>files = rj.find_files(\"*/.py\") files.add_copyright_header(\"MyCompany Inc.\")</p>"},{"location":"reference/targets/#rejig.targets.TargetList.add_decorator","title":"<code>add_decorator(decorator)</code>","text":"<p>Add a decorator to all targets.</p>"},{"location":"reference/targets/#rejig.targets.TargetList.add_decorator_all","title":"<code>add_decorator_all(decorator)</code>","text":"<p>Alias for add_decorator().</p>"},{"location":"reference/targets/#rejig.targets.TargetList.add_license_header","title":"<code>add_license_header(license_name, copyright_holder=None, year=None)</code>","text":"<p>Add a license header to all file targets.</p>"},{"location":"reference/targets/#rejig.targets.TargetList.add_license_header--parameters","title":"Parameters","text":"<p>license_name : str     License identifier: \"MIT\", \"Apache-2.0\", \"GPL-3.0\",     \"BSD-3-Clause\", or \"Proprietary\". copyright_holder : str | None     Copyright holder name. If None, uses a placeholder. year : int | None     Copyright year. Defaults to current year.</p>"},{"location":"reference/targets/#rejig.targets.TargetList.add_license_header--returns","title":"Returns","text":"<p>BatchResult     Results of all operations.</p>"},{"location":"reference/targets/#rejig.targets.TargetList.add_license_header--examples","title":"Examples","text":"<p>files = rj.find_files(\"*/.py\") files.add_license_header(\"MIT\")</p>"},{"location":"reference/targets/#rejig.targets.TargetList.convert_docstring_style","title":"<code>convert_docstring_style(from_style, to_style)</code>","text":"<p>Convert docstring style for all targets (FileTarget).</p>"},{"location":"reference/targets/#rejig.targets.TargetList.convert_docstring_style--parameters","title":"Parameters","text":"<p>from_style : str | None     Source docstring style (\"google\", \"numpy\", \"sphinx\"),     or None to auto-detect. to_style : str     Target docstring style (\"google\", \"numpy\", \"sphinx\").</p>"},{"location":"reference/targets/#rejig.targets.TargetList.convert_docstring_style--returns","title":"Returns","text":"<p>BatchResult     Results of all operations.</p>"},{"location":"reference/targets/#rejig.targets.TargetList.convert_docstring_style--examples","title":"Examples","text":"<p>files = rj.find_files(\"*/.py\") files.convert_docstring_style(\"sphinx\", \"google\")</p>"},{"location":"reference/targets/#rejig.targets.TargetList.convert_type_comments","title":"<code>convert_type_comments()</code>","text":"<p>Convert type comments to inline annotations in all targets.</p> Converts <p>x = 1  # type: int</p> <p>To:     x: int = 1</p>"},{"location":"reference/targets/#rejig.targets.TargetList.convert_type_comments--returns","title":"Returns","text":"<p>BatchResult     Results of all operations.</p>"},{"location":"reference/targets/#rejig.targets.TargetList.convert_type_comments--examples","title":"Examples","text":"<p>files = rj.find_files(\"*/.py\") files.convert_type_comments()</p>"},{"location":"reference/targets/#rejig.targets.TargetList.delete","title":"<code>delete()</code>","text":"<p>Delete all targets.</p>"},{"location":"reference/targets/#rejig.targets.TargetList.delete_all","title":"<code>delete_all()</code>","text":"<p>Alias for delete().</p>"},{"location":"reference/targets/#rejig.targets.TargetList.filter","title":"<code>filter(predicate)</code>","text":"<p>Filter targets by a predicate.</p>"},{"location":"reference/targets/#rejig.targets.TargetList.first","title":"<code>first()</code>","text":"<p>Get the first target, or None if empty.</p>"},{"location":"reference/targets/#rejig.targets.TargetList.generate_all_docstrings","title":"<code>generate_all_docstrings(style='google', overwrite=False)</code>","text":"<p>Generate all docstrings for all targets (FileTarget).</p> <p>This generates docstrings for all functions and methods in the files.</p>"},{"location":"reference/targets/#rejig.targets.TargetList.generate_all_docstrings--parameters","title":"Parameters","text":"<p>style : str     Docstring style: \"google\", \"numpy\", or \"sphinx\".     Defaults to \"google\". overwrite : bool     Whether to overwrite existing docstrings. Default False.</p>"},{"location":"reference/targets/#rejig.targets.TargetList.generate_all_docstrings--returns","title":"Returns","text":"<p>BatchResult     Results of all operations.</p>"},{"location":"reference/targets/#rejig.targets.TargetList.generate_all_docstrings--examples","title":"Examples","text":"<p>files = rj.find_files(\"*/.py\") files.generate_all_docstrings()</p>"},{"location":"reference/targets/#rejig.targets.TargetList.generate_docstrings","title":"<code>generate_docstrings(style='google', overwrite=False)</code>","text":"<p>Generate docstrings for all targets (FunctionTarget/MethodTarget/ClassTarget).</p> <p>Creates docstrings from function/method signatures including parameters, return type, and raised exceptions.</p>"},{"location":"reference/targets/#rejig.targets.TargetList.generate_docstrings--parameters","title":"Parameters","text":"<p>style : str     Docstring style: \"google\", \"numpy\", or \"sphinx\".     Defaults to \"google\". overwrite : bool     Whether to overwrite existing docstrings. Default False.</p>"},{"location":"reference/targets/#rejig.targets.TargetList.generate_docstrings--returns","title":"Returns","text":"<p>BatchResult     Results of all operations.</p>"},{"location":"reference/targets/#rejig.targets.TargetList.generate_docstrings--examples","title":"Examples","text":"<p>funcs = rj.find_functions() funcs.generate_docstrings() methods = cls.find_methods() methods.generate_docstrings(style=\"numpy\")</p>"},{"location":"reference/targets/#rejig.targets.TargetList.in_file","title":"<code>in_file(path)</code>","text":"<p>Filter to targets in a specific file.</p>"},{"location":"reference/targets/#rejig.targets.TargetList.infer_type_hints","title":"<code>infer_type_hints(overwrite=False)</code>","text":"<p>Infer and add type hints to all targets (FunctionTarget/MethodTarget).</p> <p>Uses heuristics to infer types from: - Default parameter values (e.g., = 0 \u2192 int) - Parameter names (e.g., count \u2192 int, is_valid \u2192 bool)</p>"},{"location":"reference/targets/#rejig.targets.TargetList.infer_type_hints--parameters","title":"Parameters","text":"<p>overwrite : bool     If True, overwrite existing type hints. Default False.</p>"},{"location":"reference/targets/#rejig.targets.TargetList.infer_type_hints--returns","title":"Returns","text":"<p>BatchResult     Results of all operations.</p>"},{"location":"reference/targets/#rejig.targets.TargetList.infer_type_hints--examples","title":"Examples","text":"<p>funcs = rj.find_functions() funcs.infer_type_hints()</p>"},{"location":"reference/targets/#rejig.targets.TargetList.insert_statement","title":"<code>insert_statement(statement, position='start')</code>","text":"<p>Insert a statement in all targets.</p>"},{"location":"reference/targets/#rejig.targets.TargetList.last","title":"<code>last()</code>","text":"<p>Get the last target, or None if empty.</p>"},{"location":"reference/targets/#rejig.targets.TargetList.matching","title":"<code>matching(pattern)</code>","text":"<p>Filter to targets whose name matches a regex pattern.</p>"},{"location":"reference/targets/#rejig.targets.TargetList.modernize_type_hints","title":"<code>modernize_type_hints()</code>","text":"<p>Modernize type hints in all targets (FileTarget).</p> <p>Converts old-style type hints to Python 3.10+ syntax: - List[str] \u2192 list[str] - Dict[str, int] \u2192 dict[str, int] - Optional[str] \u2192 str | None - Union[str, int] \u2192 str | int</p>"},{"location":"reference/targets/#rejig.targets.TargetList.modernize_type_hints--returns","title":"Returns","text":"<p>BatchResult     Results of all operations.</p>"},{"location":"reference/targets/#rejig.targets.TargetList.modernize_type_hints--examples","title":"Examples","text":"<p>files = rj.find_files(\"*/.py\") files.modernize_type_hints()</p>"},{"location":"reference/targets/#rejig.targets.TargetList.remove_decorator","title":"<code>remove_decorator(decorator)</code>","text":"<p>Remove a decorator from all targets.</p>"},{"location":"reference/targets/#rejig.targets.TargetList.remove_type_hints","title":"<code>remove_type_hints()</code>","text":"<p>Remove type hints from all targets (FunctionTarget/MethodTarget).</p> <p>Removes return type annotations and parameter type annotations.</p>"},{"location":"reference/targets/#rejig.targets.TargetList.remove_type_hints--returns","title":"Returns","text":"<p>BatchResult     Results of all operations.</p>"},{"location":"reference/targets/#rejig.targets.TargetList.remove_type_hints--examples","title":"Examples","text":"<p>funcs = rj.find_functions(\"^test_\") funcs.remove_type_hints()</p>"},{"location":"reference/targets/#rejig.targets.TargetList.rename","title":"<code>rename(pattern, replacement)</code>","text":"<p>Rename all targets using pattern substitution.</p>"},{"location":"reference/targets/#rejig.targets.TargetList.rename_all","title":"<code>rename_all(pattern, replacement)</code>","text":"<p>Alias for rename().</p>"},{"location":"reference/targets/#rejig.targets.TargetList.replace_all","title":"<code>replace_all(pattern, replacement)</code>","text":"<p>Replace pattern in all targets that support it.</p>"},{"location":"reference/targets/#rejig.targets.TargetList.to_list","title":"<code>to_list()</code>","text":"<p>Return the underlying list of targets.</p>"},{"location":"reference/targets/#rejig.targets.TargetList.update_copyright_year","title":"<code>update_copyright_year(new_year=None)</code>","text":"<p>Update the copyright year in all file targets.</p> <p>Updates patterns like: - \"Copyright 2023\" -&gt; \"Copyright 2023-2024\" - \"Copyright 2023-2024\" -&gt; \"Copyright 2023-2025\"</p>"},{"location":"reference/targets/#rejig.targets.TargetList.update_copyright_year--parameters","title":"Parameters","text":"<p>new_year : int | None     Target year. Defaults to current year.</p>"},{"location":"reference/targets/#rejig.targets.TargetList.update_copyright_year--returns","title":"Returns","text":"<p>BatchResult     Results of all operations.</p>"},{"location":"reference/targets/#rejig.targets.TargetList.update_copyright_year--examples","title":"Examples","text":"<p>files = rj.find_files(\"*/.py\") files.update_copyright_year()</p>"},{"location":"reference/targets/#rejig.targets.TargetList.with_docstrings","title":"<code>with_docstrings()</code>","text":"<p>Filter to targets that have docstrings.</p>"},{"location":"reference/targets/#rejig.targets.TargetList.with_docstrings--returns","title":"Returns","text":"<p>TargetList[T]     List of targets with docstrings.</p>"},{"location":"reference/targets/#rejig.targets.TargetList.with_docstrings--examples","title":"Examples","text":"<p>funcs = rj.find_functions() with_docs = funcs.with_docstrings()</p>"},{"location":"reference/targets/#rejig.targets.TargetList.without_docstrings","title":"<code>without_docstrings()</code>","text":"<p>Filter to targets that don't have docstrings.</p>"},{"location":"reference/targets/#rejig.targets.TargetList.without_docstrings--returns","title":"Returns","text":"<p>TargetList[T]     List of targets without docstrings.</p>"},{"location":"reference/targets/#rejig.targets.TargetList.without_docstrings--examples","title":"Examples","text":"<p>funcs = rj.find_functions() no_docs = funcs.without_docstrings() no_docs.generate_docstrings()</p>"},{"location":"reference/targets/#rejig.targets.TextBlock","title":"<code>TextBlock(rejig, path)</code>","text":"<p>               Bases: <code>Target</code></p> <p>Raw text manipulation without AST parsing.</p> <p>Use this for any text file where you need pattern-based manipulation without language-specific parsing.</p>"},{"location":"reference/targets/#rejig.targets.TextBlock--parameters","title":"Parameters","text":"<p>rejig : Rejig     The parent Rejig instance. path : Path     Path to the text file.</p>"},{"location":"reference/targets/#rejig.targets.TextBlock--examples","title":"Examples","text":"<p>block = rj.text_block(\"README.md\") block.find_pattern(r\"version: .*\").first().replace(\"version: 2.0.0\")</p>"},{"location":"reference/targets/#rejig.targets.TextBlock--or-use-class-method","title":"Or use class method","text":"<p>block = TextBlock.from_file(Path(\"config.txt\")) block.replace_pattern(r\"DEBUG = \\w+\", \"DEBUG = False\")</p>"},{"location":"reference/targets/#rejig.targets.TextBlock.file_path","title":"<code>file_path</code>  <code>property</code>","text":"<p>Path to the text file.</p>"},{"location":"reference/targets/#rejig.targets.TextBlock.append","title":"<code>append(content)</code>","text":"<p>Append content to the end of the file.</p>"},{"location":"reference/targets/#rejig.targets.TextBlock.append--parameters","title":"Parameters","text":"<p>content : str     Content to append.</p>"},{"location":"reference/targets/#rejig.targets.TextBlock.append--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.TextBlock.delete_line","title":"<code>delete_line(line_number)</code>","text":"<p>Delete a specific line.</p>"},{"location":"reference/targets/#rejig.targets.TextBlock.delete_line--parameters","title":"Parameters","text":"<p>line_number : int     1-based line number to delete.</p>"},{"location":"reference/targets/#rejig.targets.TextBlock.delete_line--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.TextBlock.delete_lines","title":"<code>delete_lines(start, end)</code>","text":"<p>Delete a range of lines (inclusive).</p>"},{"location":"reference/targets/#rejig.targets.TextBlock.delete_lines--parameters","title":"Parameters","text":"<p>start : int     1-based starting line number. end : int     1-based ending line number (inclusive).</p>"},{"location":"reference/targets/#rejig.targets.TextBlock.delete_lines--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.TextBlock.exists","title":"<code>exists()</code>","text":"<p>Check if this file exists.</p>"},{"location":"reference/targets/#rejig.targets.TextBlock.exists--returns","title":"Returns","text":"<p>bool     True if the file exists.</p>"},{"location":"reference/targets/#rejig.targets.TextBlock.find_first","title":"<code>find_first(pattern, flags=0)</code>","text":"<p>Find the first match of a pattern.</p>"},{"location":"reference/targets/#rejig.targets.TextBlock.find_first--parameters","title":"Parameters","text":"<p>pattern : str     Regular expression pattern. flags : int     Regex flags.</p>"},{"location":"reference/targets/#rejig.targets.TextBlock.find_first--returns","title":"Returns","text":"<p>TextMatch | None     First match, or None if not found.</p>"},{"location":"reference/targets/#rejig.targets.TextBlock.find_pattern","title":"<code>find_pattern(pattern, flags=0)</code>","text":"<p>Find all matches of a regex pattern.</p>"},{"location":"reference/targets/#rejig.targets.TextBlock.find_pattern--parameters","title":"Parameters","text":"<p>pattern : str     Regular expression pattern to search for. flags : int     Regex flags (e.g., re.IGNORECASE, re.MULTILINE).</p>"},{"location":"reference/targets/#rejig.targets.TextBlock.find_pattern--returns","title":"Returns","text":"<p>TargetList[TextMatch]     List of TextMatch targets for each match.</p>"},{"location":"reference/targets/#rejig.targets.TextBlock.find_pattern--examples","title":"Examples","text":"<p>matches = block.find_pattern(r\"TODO:.*\") for match in matches: ...     print(f\"Line {match.line_number}: {match.text}\")</p>"},{"location":"reference/targets/#rejig.targets.TextBlock.from_file","title":"<code>from_file(path, dry_run=False)</code>  <code>classmethod</code>","text":"<p>Create a TextBlock from a file path without a Rejig instance.</p>"},{"location":"reference/targets/#rejig.targets.TextBlock.from_file--parameters","title":"Parameters","text":"<p>path : Path     Path to the text file. dry_run : bool     Whether to run in dry-run mode.</p>"},{"location":"reference/targets/#rejig.targets.TextBlock.from_file--returns","title":"Returns","text":"<p>TextBlock     A TextBlock for the specified file.</p>"},{"location":"reference/targets/#rejig.targets.TextBlock.from_file--examples","title":"Examples","text":"<p>block = TextBlock.from_file(Path(\"config.txt\")) block.replace_pattern(r\"DEBUG = \\w+\", \"DEBUG = False\")</p>"},{"location":"reference/targets/#rejig.targets.TextBlock.get_content","title":"<code>get_content()</code>","text":"<p>Get the content of this file.</p>"},{"location":"reference/targets/#rejig.targets.TextBlock.get_content--returns","title":"Returns","text":"<p>Result     Result with file content in <code>data</code> field.</p>"},{"location":"reference/targets/#rejig.targets.TextBlock.insert_at_line","title":"<code>insert_at_line(line_number, content)</code>","text":"<p>Insert content at a specific line.</p>"},{"location":"reference/targets/#rejig.targets.TextBlock.insert_at_line--parameters","title":"Parameters","text":"<p>line_number : int     1-based line number to insert at. content : str     Content to insert.</p>"},{"location":"reference/targets/#rejig.targets.TextBlock.insert_at_line--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.TextBlock.prepend","title":"<code>prepend(content)</code>","text":"<p>Prepend content to the beginning of the file.</p>"},{"location":"reference/targets/#rejig.targets.TextBlock.prepend--parameters","title":"Parameters","text":"<p>content : str     Content to prepend.</p>"},{"location":"reference/targets/#rejig.targets.TextBlock.prepend--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.TextBlock.replace_pattern","title":"<code>replace_pattern(pattern, replacement, count=0, flags=0)</code>","text":"<p>Replace all occurrences of a pattern.</p>"},{"location":"reference/targets/#rejig.targets.TextBlock.replace_pattern--parameters","title":"Parameters","text":"<p>pattern : str     Regular expression pattern to replace. replacement : str     Replacement string (can use backreferences like \\1). count : int     Maximum replacements (0 = unlimited). flags : int     Regex flags.</p>"},{"location":"reference/targets/#rejig.targets.TextBlock.replace_pattern--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.TextBlock.rewrite","title":"<code>rewrite(new_content)</code>","text":"<p>Replace the entire content of this file.</p>"},{"location":"reference/targets/#rejig.targets.TextBlock.rewrite--parameters","title":"Parameters","text":"<p>new_content : str     New content for the file.</p>"},{"location":"reference/targets/#rejig.targets.TextBlock.rewrite--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.TextFileTarget","title":"<code>TextFileTarget(rejig, path)</code>","text":"<p>               Bases: <code>Target</code></p> <p>Target for any text file.</p> <p>Provides basic line-based operations for text files that don't have a specific format (like Python, TOML, JSON, etc.).</p>"},{"location":"reference/targets/#rejig.targets.TextFileTarget--parameters","title":"Parameters","text":"<p>rejig : Rejig     The parent Rejig instance. path : str | Path     Path to the text file.</p>"},{"location":"reference/targets/#rejig.targets.TextFileTarget--examples","title":"Examples","text":"<p>readme = rj.text_file(\"README.md\") readme.get_content() readme.replace(\"old text\", \"new text\")</p>"},{"location":"reference/targets/#rejig.targets.TextFileTarget.file_path","title":"<code>file_path</code>  <code>property</code>","text":"<p>Path to the text file.</p>"},{"location":"reference/targets/#rejig.targets.TextFileTarget.append","title":"<code>append(content)</code>","text":"<p>Append content to the end of the file.</p>"},{"location":"reference/targets/#rejig.targets.TextFileTarget.append--parameters","title":"Parameters","text":"<p>content : str     Content to append.</p>"},{"location":"reference/targets/#rejig.targets.TextFileTarget.append--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.TextFileTarget.delete","title":"<code>delete()</code>","text":"<p>Delete this file.</p>"},{"location":"reference/targets/#rejig.targets.TextFileTarget.delete--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.TextFileTarget.delete_line","title":"<code>delete_line(line_number)</code>","text":"<p>Delete a specific line.</p>"},{"location":"reference/targets/#rejig.targets.TextFileTarget.delete_line--parameters","title":"Parameters","text":"<p>line_number : int     1-based line number to delete.</p>"},{"location":"reference/targets/#rejig.targets.TextFileTarget.delete_line--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.TextFileTarget.delete_lines","title":"<code>delete_lines(start, end)</code>","text":"<p>Delete a range of lines.</p>"},{"location":"reference/targets/#rejig.targets.TextFileTarget.delete_lines--parameters","title":"Parameters","text":"<p>start : int     1-based starting line number. end : int     1-based ending line number (inclusive).</p>"},{"location":"reference/targets/#rejig.targets.TextFileTarget.delete_lines--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.TextFileTarget.exists","title":"<code>exists()</code>","text":"<p>Check if this file exists.</p>"},{"location":"reference/targets/#rejig.targets.TextFileTarget.find_lines","title":"<code>find_lines(pattern)</code>","text":"<p>Find lines matching a pattern.</p>"},{"location":"reference/targets/#rejig.targets.TextFileTarget.find_lines--parameters","title":"Parameters","text":"<p>pattern : str     Regex pattern to search for.</p>"},{"location":"reference/targets/#rejig.targets.TextFileTarget.find_lines--returns","title":"Returns","text":"<p>list[tuple[int, str]]     List of (line_number, line_content) tuples.</p>"},{"location":"reference/targets/#rejig.targets.TextFileTarget.get_content","title":"<code>get_content()</code>","text":"<p>Get the content of this file.</p>"},{"location":"reference/targets/#rejig.targets.TextFileTarget.get_content--returns","title":"Returns","text":"<p>Result     Result with file content in <code>data</code> field if successful.</p>"},{"location":"reference/targets/#rejig.targets.TextFileTarget.get_line","title":"<code>get_line(line_number)</code>","text":"<p>Get a specific line.</p>"},{"location":"reference/targets/#rejig.targets.TextFileTarget.get_line--parameters","title":"Parameters","text":"<p>line_number : int     1-based line number.</p>"},{"location":"reference/targets/#rejig.targets.TextFileTarget.get_line--returns","title":"Returns","text":"<p>str | None     The line content, or None if out of range.</p>"},{"location":"reference/targets/#rejig.targets.TextFileTarget.insert_at_line","title":"<code>insert_at_line(line_number, content)</code>","text":"<p>Insert content at a specific line.</p>"},{"location":"reference/targets/#rejig.targets.TextFileTarget.insert_at_line--parameters","title":"Parameters","text":"<p>line_number : int     1-based line number to insert at. content : str     Content to insert.</p>"},{"location":"reference/targets/#rejig.targets.TextFileTarget.insert_at_line--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.TextFileTarget.line_count","title":"<code>line_count()</code>","text":"<p>Get the number of lines in the file.</p>"},{"location":"reference/targets/#rejig.targets.TextFileTarget.line_count--returns","title":"Returns","text":"<p>int     Number of lines.</p>"},{"location":"reference/targets/#rejig.targets.TextFileTarget.prepend","title":"<code>prepend(content)</code>","text":"<p>Prepend content to the beginning of the file.</p>"},{"location":"reference/targets/#rejig.targets.TextFileTarget.prepend--parameters","title":"Parameters","text":"<p>content : str     Content to prepend.</p>"},{"location":"reference/targets/#rejig.targets.TextFileTarget.prepend--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.TextFileTarget.replace","title":"<code>replace(pattern, replacement, count=0)</code>","text":"<p>Replace pattern in the file content.</p>"},{"location":"reference/targets/#rejig.targets.TextFileTarget.replace--parameters","title":"Parameters","text":"<p>pattern : str     Regex pattern to search for. replacement : str     Replacement string. count : int     Maximum number of replacements (0 = all).</p>"},{"location":"reference/targets/#rejig.targets.TextFileTarget.replace--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.TextFileTarget.rewrite","title":"<code>rewrite(new_content)</code>","text":"<p>Replace the entire content of this file.</p>"},{"location":"reference/targets/#rejig.targets.TextFileTarget.rewrite--parameters","title":"Parameters","text":"<p>new_content : str     New content for the file.</p>"},{"location":"reference/targets/#rejig.targets.TextFileTarget.rewrite--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.TextMatch","title":"<code>TextMatch(rejig, path, match, content)</code>","text":"<p>               Bases: <code>Target</code></p> <p>Target for a pattern match within a text file.</p> <p>Represents a specific match found by TextBlock.find_pattern(). Allows chaining operations on the matched text.</p>"},{"location":"reference/targets/#rejig.targets.TextMatch--parameters","title":"Parameters","text":"<p>rejig : Rejig     The parent Rejig instance. path : Path     Path to the file containing the match. match : re.Match     The regex match object. content : str     The full file content (for position calculations).</p>"},{"location":"reference/targets/#rejig.targets.TextMatch--examples","title":"Examples","text":"<p>matches = rj.text_block(\"config.py\").find_pattern(r\"VERSION = ['\"].*['\"]\") for match in matches: ...     match.replace(\"VERSION = '2.0.0'\")</p>"},{"location":"reference/targets/#rejig.targets.TextMatch.end","title":"<code>end</code>  <code>property</code>","text":"<p>Character offset of match end.</p>"},{"location":"reference/targets/#rejig.targets.TextMatch.file_path","title":"<code>file_path</code>  <code>property</code>","text":"<p>Path to the file containing this match.</p>"},{"location":"reference/targets/#rejig.targets.TextMatch.groups","title":"<code>groups</code>  <code>property</code>","text":"<p>Captured groups from the match.</p>"},{"location":"reference/targets/#rejig.targets.TextMatch.line_number","title":"<code>line_number</code>  <code>property</code>","text":"<p>1-based line number of match start.</p>"},{"location":"reference/targets/#rejig.targets.TextMatch.position","title":"<code>position</code>  <code>property</code>","text":"<p>Get line/column position of match.</p>"},{"location":"reference/targets/#rejig.targets.TextMatch.position--returns","title":"Returns","text":"<p>MatchPosition     Position information for the match.</p>"},{"location":"reference/targets/#rejig.targets.TextMatch.start","title":"<code>start</code>  <code>property</code>","text":"<p>Character offset of match start.</p>"},{"location":"reference/targets/#rejig.targets.TextMatch.text","title":"<code>text</code>  <code>property</code>","text":"<p>The matched text.</p>"},{"location":"reference/targets/#rejig.targets.TextMatch.delete","title":"<code>delete()</code>","text":"<p>Delete this match.</p>"},{"location":"reference/targets/#rejig.targets.TextMatch.delete--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.TextMatch.exists","title":"<code>exists()</code>","text":"<p>Check if the match still exists in the file.</p>"},{"location":"reference/targets/#rejig.targets.TextMatch.exists--returns","title":"Returns","text":"<p>bool     True if the exact matched text is still in the file.</p>"},{"location":"reference/targets/#rejig.targets.TextMatch.get_content","title":"<code>get_content()</code>","text":"<p>Get the matched text.</p>"},{"location":"reference/targets/#rejig.targets.TextMatch.get_content--returns","title":"Returns","text":"<p>Result     Result with matched text in <code>data</code> field.</p>"},{"location":"reference/targets/#rejig.targets.TextMatch.insert_after","title":"<code>insert_after(content)</code>","text":"<p>Insert content after this match.</p>"},{"location":"reference/targets/#rejig.targets.TextMatch.insert_after--parameters","title":"Parameters","text":"<p>content : str     Content to insert.</p>"},{"location":"reference/targets/#rejig.targets.TextMatch.insert_after--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.TextMatch.insert_before","title":"<code>insert_before(content)</code>","text":"<p>Insert content before this match.</p>"},{"location":"reference/targets/#rejig.targets.TextMatch.insert_before--parameters","title":"Parameters","text":"<p>content : str     Content to insert.</p>"},{"location":"reference/targets/#rejig.targets.TextMatch.insert_before--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.TextMatch.replace","title":"<code>replace(replacement)</code>","text":"<p>Replace this match with new text.</p>"},{"location":"reference/targets/#rejig.targets.TextMatch.replace--parameters","title":"Parameters","text":"<p>replacement : str     Text to replace the match with.</p>"},{"location":"reference/targets/#rejig.targets.TextMatch.replace--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget","title":"<code>TomlTarget(rejig, path)</code>","text":"<p>               Bases: <code>Target</code></p> <p>Target for a TOML configuration file.</p> <p>Provides operations for reading, modifying, and querying TOML files like pyproject.toml.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget--parameters","title":"Parameters","text":"<p>rejig : Rejig     The parent Rejig instance. path : str | Path     Path to the TOML file.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget--examples","title":"Examples","text":"<p>toml = rj.toml(\"pyproject.toml\") toml.get(\"project.name\") toml.set(\"project.version\", \"1.0.0\") toml.get_section(\"tool.black\")</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.file_path","title":"<code>file_path</code>  <code>property</code>","text":"<p>Path to the TOML file.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.add_dependency","title":"<code>add_dependency(dependency)</code>","text":"<p>Add a dependency to project.dependencies.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.add_dependency--parameters","title":"Parameters","text":"<p>dependency : str     Dependency specification (e.g., \"requests&gt;=2.28.0\").</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.add_dependency--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.delete","title":"<code>delete(key_path)</code>","text":"<p>Delete a key by dotted key path.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.delete--parameters","title":"Parameters","text":"<p>key_path : str     Dotted path to the key to delete.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.delete--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.exists","title":"<code>exists()</code>","text":"<p>Check if this TOML file exists.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.get","title":"<code>get(key_path, default=None)</code>","text":"<p>Get a value by dotted key path.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.get--parameters","title":"Parameters","text":"<p>key_path : str     Dotted path to the key (e.g., \"project.name\", \"tool.black.line-length\"). default : Any     Default value if key not found.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.get--returns","title":"Returns","text":"<p>Any     The value at the key path, or default if not found.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.get--examples","title":"Examples","text":"<p>toml.get(\"project.name\") \"myproject\" toml.get(\"tool.black.line-length\", 88) 110</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.get_content","title":"<code>get_content()</code>","text":"<p>Get the raw content of the TOML file.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.get_content--returns","title":"Returns","text":"<p>Result     Result with file content in <code>data</code> field if successful.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.get_data","title":"<code>get_data()</code>","text":"<p>Get the parsed TOML data as a dictionary.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.get_data--returns","title":"Returns","text":"<p>Result     Result with parsed dict in <code>data</code> field if successful.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.get_dependencies","title":"<code>get_dependencies()</code>","text":"<p>Get project dependencies from pyproject.toml.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.get_optional_dependencies","title":"<code>get_optional_dependencies(group)</code>","text":"<p>Get optional dependencies for a group.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.get_project_name","title":"<code>get_project_name()</code>","text":"<p>Get the project name from pyproject.toml.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.get_project_version","title":"<code>get_project_version()</code>","text":"<p>Get the project version from pyproject.toml.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.get_section","title":"<code>get_section(section_path)</code>","text":"<p>Get a section as a dictionary.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.get_section--parameters","title":"Parameters","text":"<p>section_path : str     Dotted path to the section (e.g., \"tool.black\").</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.get_section--returns","title":"Returns","text":"<p>dict | None     The section dictionary, or None if not found.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.get_tool_config","title":"<code>get_tool_config(tool_name)</code>","text":"<p>Get configuration for a specific tool.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.get_tool_config--parameters","title":"Parameters","text":"<p>tool_name : str     Tool name (e.g., \"black\", \"ruff\", \"mypy\").</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.get_tool_config--returns","title":"Returns","text":"<p>dict | None     Tool configuration, or None if not found.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.has_key","title":"<code>has_key(key_path)</code>","text":"<p>Check if a key exists.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.has_key--parameters","title":"Parameters","text":"<p>key_path : str     Dotted path to check.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.has_key--returns","title":"Returns","text":"<p>bool     True if the key exists.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.keys","title":"<code>keys(section_path=None)</code>","text":"<p>Get keys at a section path.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.keys--parameters","title":"Parameters","text":"<p>section_path : str | None     Dotted path to section, or None for root keys.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.keys--returns","title":"Returns","text":"<p>list[str]     List of keys at the section.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.remove_dependency","title":"<code>remove_dependency(package_name)</code>","text":"<p>Remove a dependency from project.dependencies.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.remove_dependency--parameters","title":"Parameters","text":"<p>package_name : str     Package name to remove (version spec ignored).</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.remove_dependency--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.rewrite","title":"<code>rewrite(new_content)</code>","text":"<p>Replace the entire content of the TOML file.</p> <p>Validates the content is valid TOML before writing.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.rewrite--parameters","title":"Parameters","text":"<p>new_content : str     New TOML content.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.rewrite--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.set","title":"<code>set(key_path, value)</code>","text":"<p>Set a value by dotted key path.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.set--parameters","title":"Parameters","text":"<p>key_path : str     Dotted path to the key (e.g., \"project.version\"). value : Any     Value to set.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.set--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.set--examples","title":"Examples","text":"<p>toml.set(\"project.version\", \"2.0.0\") toml.set(\"tool.black.line-length\", 110)</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.set_project_version","title":"<code>set_project_version(version)</code>","text":"<p>Set the project version in pyproject.toml.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.set_section","title":"<code>set_section(section_path, data)</code>","text":"<p>Set an entire section.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.set_section--parameters","title":"Parameters","text":"<p>section_path : str     Dotted path to the section (e.g., \"tool.ruff\"). data : dict     Section data to set.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.set_section--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.set_tool_config","title":"<code>set_tool_config(tool_name, config)</code>","text":"<p>Set configuration for a specific tool.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.set_tool_config--parameters","title":"Parameters","text":"<p>tool_name : str     Tool name (e.g., \"black\", \"ruff\"). config : dict     Tool configuration.</p>"},{"location":"reference/targets/#rejig.targets.TomlTarget.set_tool_config--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget","title":"<code>YamlTarget(rejig, path)</code>","text":"<p>               Bases: <code>Target</code></p> <p>Target for a YAML configuration file.</p> <p>Provides operations for reading, modifying, and querying YAML files.</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget--parameters","title":"Parameters","text":"<p>rejig : Rejig     The parent Rejig instance. path : str | Path     Path to the YAML file.</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget--examples","title":"Examples","text":"<p>yaml_file = rj.yaml(\"config.yaml\") yaml_file.get(\"database.host\") yaml_file.set(\"database.port\", 5432)</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget.file_path","title":"<code>file_path</code>  <code>property</code>","text":"<p>Path to the YAML file.</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget.append_to_list","title":"<code>append_to_list(key_path, value)</code>","text":"<p>Append a value to a list at the specified key path.</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget.append_to_list--parameters","title":"Parameters","text":"<p>key_path : str     Dotted path to the list. value : Any     Value to append.</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget.append_to_list--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget.delete","title":"<code>delete(key_path)</code>","text":"<p>Delete a key by dotted key path.</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget.delete--parameters","title":"Parameters","text":"<p>key_path : str     Dotted path to the key to delete.</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget.delete--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget.exists","title":"<code>exists()</code>","text":"<p>Check if this YAML file exists.</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget.get","title":"<code>get(key_path, default=None)</code>","text":"<p>Get a value by dotted key path.</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget.get--parameters","title":"Parameters","text":"<p>key_path : str     Dotted path to the key (e.g., \"database.host\", \"servers.0.name\"). default : Any     Default value if key not found.</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget.get--returns","title":"Returns","text":"<p>Any     The value at the key path, or default if not found.</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget.get--examples","title":"Examples","text":"<p>yaml_file.get(\"database.host\") \"localhost\" yaml_file.get(\"database.port\", 5432) 5432</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget.get_content","title":"<code>get_content()</code>","text":"<p>Get the raw content of the YAML file.</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget.get_content--returns","title":"Returns","text":"<p>Result     Result with file content in <code>data</code> field if successful.</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget.get_data","title":"<code>get_data()</code>","text":"<p>Get the parsed YAML data.</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget.get_data--returns","title":"Returns","text":"<p>Result     Result with parsed data in <code>data</code> field if successful.</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget.get_section","title":"<code>get_section(section_path)</code>","text":"<p>Get a section as a dictionary.</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget.get_section--parameters","title":"Parameters","text":"<p>section_path : str     Dotted path to the section.</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget.get_section--returns","title":"Returns","text":"<p>dict | None     The section dictionary, or None if not found.</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget.has_key","title":"<code>has_key(key_path)</code>","text":"<p>Check if a key exists.</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget.has_key--parameters","title":"Parameters","text":"<p>key_path : str     Dotted path to check.</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget.has_key--returns","title":"Returns","text":"<p>bool     True if the key exists.</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget.keys","title":"<code>keys(section_path=None)</code>","text":"<p>Get keys at a section path.</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget.keys--parameters","title":"Parameters","text":"<p>section_path : str | None     Dotted path to section, or None for root keys.</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget.keys--returns","title":"Returns","text":"<p>list[str]     List of keys at the section.</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget.remove_from_list","title":"<code>remove_from_list(key_path, value)</code>","text":"<p>Remove a value from a list at the specified key path.</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget.remove_from_list--parameters","title":"Parameters","text":"<p>key_path : str     Dotted path to the list. value : Any     Value to remove.</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget.remove_from_list--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget.rewrite","title":"<code>rewrite(new_content)</code>","text":"<p>Replace the entire content of the YAML file.</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget.rewrite--parameters","title":"Parameters","text":"<p>new_content : str     New YAML content.</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget.rewrite--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget.set","title":"<code>set(key_path, value)</code>","text":"<p>Set a value by dotted key path.</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget.set--parameters","title":"Parameters","text":"<p>key_path : str     Dotted path to the key (e.g., \"database.host\"). value : Any     Value to set.</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget.set--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget.set--examples","title":"Examples","text":"<p>yaml_file.set(\"database.host\", \"localhost\") yaml_file.set(\"database.port\", 5432)</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget.set_section","title":"<code>set_section(section_path, data)</code>","text":"<p>Set an entire section.</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget.set_section--parameters","title":"Parameters","text":"<p>section_path : str     Dotted path to the section. data : dict     Section data to set.</p>"},{"location":"reference/targets/#rejig.targets.YamlTarget.set_section--returns","title":"Returns","text":"<p>Result     Result of the operation.</p>"},{"location":"sample-projects/","title":"Sample Projects","text":"<p>This directory contains sample Python projects for testing Rejig recipes and exploring the library's capabilities.</p>"},{"location":"sample-projects/#projects","title":"Projects","text":""},{"location":"sample-projects/#1-legacy-flask-app","title":"1. legacy-flask-app","text":"<p>A deliberately outdated Flask application with: - Old-style type comments instead of annotations - Missing docstrings - Hardcoded configuration values - No type hints - Deprecated patterns</p> <p>Use for testing: - Type hint inference and modernization - Docstring generation - Security scanning (hardcoded secrets) - Flask framework refactoring</p>"},{"location":"sample-projects/#2-modern-fastapi","title":"2. modern-fastapi","text":"<p>A FastAPI application with some issues: - Inconsistent async/sync patterns - Missing response models - Some security issues (SQL injection patterns) - Incomplete documentation</p> <p>Use for testing: - FastAPI refactoring - Async conversion - Security analysis - API documentation generation</p>"},{"location":"sample-projects/#3-django-blog","title":"3. django-blog","text":"<p>A Django blog application with: - Basic models, views, and URLs - Some code duplication - Missing migrations patterns - Configuration in settings.py</p> <p>Use for testing: - Django framework operations - Settings management - URL configuration - Model operations</p>"},{"location":"sample-projects/#4-cli-tool","title":"4. cli-tool","text":"<p>A command-line tool using Click with: - Multiple commands - Configuration handling - Some complexity issues - Testing gaps</p> <p>Use for testing: - Code analysis (complexity) - Test generation - Docstring generation - Dead code detection</p>"},{"location":"sample-projects/#5-data-processor","title":"5. data-processor","text":"<p>A data processing library with: - Heavy use of pandas patterns - Missing type hints - Magic numbers and hardcoded strings - Optimization opportunities</p> <p>Use for testing: - DRY analysis (duplicate code) - Loop optimization - Type hint inference - Code modernization</p>"},{"location":"sample-projects/#usage","title":"Usage","text":"<p>Each project can be used standalone with Rejig:</p> <pre><code>from rejig import Rejig\n\n# Work with a specific sample project\nrj = Rejig(\"docs/sample-projects/legacy-flask-app/\")\n\n# Run analysis\nissues = rj.find_analysis_issues()\nprint(issues.summary())\n\n# Try transformations\nrj.find_functions().infer_type_hints()\n</code></pre>"},{"location":"sample-projects/#testing-recipes","title":"Testing Recipes","text":"<p>Use these projects to test the recipes in <code>docs/examples/</code>:</p> <pre><code># Run analysis recipes\npython docs/examples/analysis-recipes.py docs/sample-projects/cli-tool/\n\n# Run security recipes\npython docs/examples/security-recipes.py docs/sample-projects/legacy-flask-app/\n\n# Run optimization recipes\npython docs/examples/optimization-recipes.py docs/sample-projects/data-processor/\n</code></pre>"}]}